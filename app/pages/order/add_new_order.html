<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no">

    <title>Add New Order</title><!--[if IE]>
    <meta http-equiv="X-UA-Compatible" content="IE = edge"><![endif]-->


    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900&display=swap" rel="stylesheet">

    <link href="https://test.cargo4s.com/js/plugins/bootstrap-slider/bootstrap-slider.min.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900&amp;display=swap" rel="stylesheet">
    <link href="../../css/libs.min.css" rel="stylesheet">
    <link href="https://test.cargo4s.com/css/acargo/daterangepicker.css" rel="stylesheet">
    <link href="../../css/style.css" rel="stylesheet">
    <link href="../../css/main.css" rel="stylesheet">
</head>

<body id="page-top">
    <div class="chat-fixed d-flex align-items-end"></div>
    <div id="wrapper" class="d-md-flex pt-md-0">
        <div class="overlay"></div>
        <!-- Sidebar -->
        <div id="collapseSidebar" class="sidebar b-1 b-gray-e0 d-block collapse show">
            <div class="sidebar__container bg-white p-3 scroll-y d-flex flex-column sticky-top h-100vh">
                <div class="flex-between-center mb-4">
                    <a href="https://test.cargo4s.com/dashboard/" class="sidebar-full">
                        <svg class="svg-sprite-icon mx-1" fill="#F54617" width="100" height="22">
                            <use xlink:href="../../img/sprite/symbol/sprite.svg#logo">
                            </use>
                        </svg>
                    </a>
                    <button type="button" class="p-2 collapsed" data-target="#collapseSidebar" data-toggle="collapse"
                        aria-expanded="false">
                        <svg class="svg-sprite-icon collapsed-arrow d-md-block d-none" fill="#757575" width="20"
                            height="10">
                            <use xlink:href="../../img/sprite/symbol/sprite.svg#arrow-left-1">
                            </use>
                        </svg>
                        <svg class="svg-sprite-icon d-md-none" stroke="#757575" width="24" height="24">
                            <use xlink:href="../../img/sprite/symbol/sprite.svg#close2">
                            </use>
                        </svg>
                    </button>
                </div>
                <hr class="d-md-none">
                <div class="d-md-none py-1">
                    <div class="items-center pb-2">
                        <img src="https://test.cargo4s.com/uploads/profiles/1/alex-dev-1751272562.png" alt="avatar"
                            class="br-50 wh-27 b-1 b-gray-e0 mr-1">
                        <div class="pl-1">
                            <h3>Alex Primary ACC</h3>
                            <p class="c-gray-75"></p>
                        </div>
                    </div>
                    <div class="px-2 br-4 py-1 items-center bg-gray-f5 w-fit-content">
                        <svg class="svg-sprite-icon mr-1" fill="#F54617" width="20" height="20">
                            <use xlink:href="../../img/sprite/symbol/sprite.svg#user-5">
                            </use>
                        </svg>
                        <p class="fs-14 weight-medium c-gray-75">Baltvia, UAB</p>
                    </div>
                </div>
                <hr class="d-md-none">
                <nav>
                    <ul class="fs-14 weight-medium py-2">
                        <li class="mt-2">
                            <a href="https://test.cargo4s.com/dashboard/"
                                class="items-center p-2 br-4 hover-bg_f5_10 c-gray-75">
                                <svg class="svg-sprite-icon" stroke="#757575" width="20" height="20">
                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#layout-dashboard">
                                    </use>
                                </svg>
                                <span class="pl-2 sidebar-full">Dashboard</span>
                            </a>
                        </li>
                        <li class="mt-2">
                            <a href="https://test.cargo4s.com/bookings/"
                                class="items-center p-2 br-4 hover-bg_f5_10 c-gray-75">
                                <svg class="svg-sprite-icon" stroke="#757575" width="20" height="20">
                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#calendar-check-2">
                                    </use>
                                </svg>
                                <span class="pl-2 sidebar-full">Bookings</span>
                                <span class="count-message position-static d-block ml-2 sidebar-full">1797</span>
                            </a>
                        </li>
                        <li class="mt-2">
                            <a href="https://test.cargo4s.com/orders/"
                                class="items-center p-2 br-4 hover-bg_f5_10 c-gray-75">
                                <svg class="svg-sprite-icon" stroke="#F54617" width="20" height="20">
                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#clipboard-list">
                                    </use>
                                </svg>
                                <span class="pl-2 sidebar-full">Orders</span>
                                <span class="count-message position-static d-block ml-2 sidebar-full">1190</span>
                            </a>
                        </li>
                        <li class="mt-2 collapse d-block h-100" id="collapseRate">
                            <a type="button"
                                onclick="$(this).find('.collapsed-arrow').toggleClass('collapsed');$(this).find('.count-message').toggleClass('hide')"
                                data-target="#collapseRate" data-toggle="collapse"
                                class="items-center p-2 br-4 hover-bg_f5_10 c-gray-75">
                                <svg class="svg-sprite-icon" stroke="#757575" width="20" height="20">
                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#bar-chart-2">
                                    </use>
                                </svg>
                                <span class="pl-2 sidebar-full">Rates</span>
                                <span class="count-message position-static d-block ml-2 sidebar-full">5</span>
                                <svg class="svg-sprite-icon ml-auto sidebar-full collapsed-arrow collapsed "
                                    fill="#757575" width="13" height="13">
                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#arrow-up-2">
                                    </use>
                                </svg>
                            </a>


                            <!--                    <a type="button" onclick="$(this).find('.collapsed-arrow').toggleClass('collapsed');$(this).find('.count-message').toggleClass('hide')" data-target="#collapseRate" data-toggle="collapse" class="items-center p-2 br-4 hover-bg_f5_10 c-gray-75">
                        <svg class="svg-sprite-icon" stroke="#757575" width="20" height="20">
                            <use xlink:href="../../img/sprite/symbol/sprite.svg#bar-chart-2"></use>
                        </svg>
                        <span class="pl-2 sidebar-full">Rates</span>
                        <span class="count-message position-static d-block ml-2 sidebar-full">5</span>
                        <svg class="svg-sprite-icon ml-auto sidebar-full collapsed-arrow collapsed " fill="#757575" width="13" height="13" >
                            <use xlink:href="../../img/sprite/symbol/sprite.svg#arrow-up-2"></use>
                        </svg>
                    </a>-->


                            <ul class="collapse pl-4 bg-gray-f5 br-4 weight-normal" id="collapseRate">
                                <li>
                                    <a href="https://test.cargo4s.com/sales/rates/"
                                        class="c-gray-75 items-center p-2"><span class="p-1">Shipping rates</span></a>
                                </li>
                                <li>
                                    <a href="https://test.cargo4s.com/requests/" class="c-gray-75 items-center p-2">
                                        <span class="p-1">Rate requests</span>
                                        <span class="count-message position-static d-block ml-auto">5</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://test.cargo4s.com/rates/contract/"
                                        class="c-gray-75 items-center p-2">
                                        <span class="p-1">Quotations</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="mt-2">
                            <a href="https://test.cargo4s.com/customers/companies/"
                                class="items-center p-2 br-4 hover-bg_f5_10 c-gray-75">
                                <svg class="svg-sprite-icon" fill="#757575" width="20" height="20">
                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#building-2">
                                    </use>
                                </svg>
                                <span class="pl-2 sidebar-full">Companies</span>
                            </a>
                        </li>
                        <!--                <li class="mt-2">
                    <a href="javascript:void(0)" class="items-center p-2 br-4 hover-bg_f5_10 c-gray-75">
                        <svg class="svg-sprite-icon" stroke="#757575" width="20" height="20">
                            <use xlink:href="../../img/sprite/symbol/sprite.svg#file-pie-chart"></use>
                        </svg>
                        <span class="pl-2 sidebar-full">Quotations</span>
                    </a>
                </li>-->
                        <!--                <li class="mt-2">
                    <a href="javascript:void(0)" class="items-center p-2 br-4 hover-bg_f5_10 c-gray-75">
                        <svg class="svg-sprite-icon" stroke="#757575" width="20" height="20">
                            <use xlink:href="../../img/sprite/symbol/sprite.svg#euro-2"></use>
                        </svg>
                        <span class="pl-2 sidebar-full">Finances</span>
                    </a>
                </li>-->
                        <hr class="my-3">

                        <li class="mt-2">
                            <a href="https://test.cargo4s.com/company/details/"
                                class="items-center p-2 br-4 hover-bg_f5_10 c-gray-75">
                                <svg class="svg-sprite-icon" stroke="#757575" width="20" height="20">
                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#settings-2">
                                    </use>
                                </svg>
                                <span class="pl-2 sidebar-full">Settings</span>
                            </a>
                        </li>
                        <li class="mt-2">
                            <a href="https://test.cargo4s.com/access/users/"
                                class="items-center p-2 br-4 hover-bg_f5_10 c-gray-75">
                                <svg class="svg-sprite-icon" stroke="#757575" width="20" height="20">
                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#user-6">
                                    </use>
                                </svg>
                                <span class="pl-2 sidebar-full">Users</span>
                            </a>
                        </li>

                        <li class="mt-2">
                            <a href="https://test.cargo4s.com/customers/profile/"
                                class="items-center p-2 br-4 hover-bg_f5_10 c-gray-75">
                                <svg class="svg-sprite-icon" stroke="#757575" width="20" height="20">
                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#user-6">
                                    </use>
                                </svg>
                                <span class="pl-2 sidebar-full">User profile</span>
                            </a>
                        </li>
                        <!--                <li class="mt-2 d-md-none">
                    <a href="javascript:void(0)" class="items-center p-2 br-4 hover-bg_f5_10 c-gray-75">
                        <svg class="svg-sprite-icon" fill="#757575" width="20" height="20">
                            <use xlink:href="../../img/sprite/symbol/sprite.svg#moon"></use>
                        </svg>
                        <span class="pl-2 sidebar-full">Dark mode</span>
                    </a>
                </li>-->
                        <li class="mt-2">
                            <a href="javascript:void(0)" class="items-center p-2 br-4 hover-bg_f5_10 c-gray-75">
                                <svg class="svg-sprite-icon" stroke="#757575" width="20" height="20">
                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#life-buoy">
                                    </use>
                                </svg>
                                <span class="pl-2 sidebar-full">Support</span>
                            </a>
                        </li>
                    </ul>
                </nav>
                <a href="https://test.cargo4s.com/logout/"
                    class="items-center p-2 br-4 hover-bg_f5_10 c-gray-75 mt-auto fs-14 weight-medium">
                    <svg class="svg-sprite-icon" stroke="#757575" width="20" height="20">
                        <use xlink:href="../../img/sprite/symbol/sprite.svg#logout">
                        </use>
                    </svg>
                    <span class="pl-2 sidebar-full">Logout</span>
                </a>
            </div>
        </div>
        <header class="header bg-gray-f5 d-md-none items-center p-2 shadow-none">
            <b class="fs-24 pl-1">Cargo4s.com</b>
            <button type="button" class="ml-auto p-1" data-target="#collapseSidebar" data-toggle="collapse">
                <svg class="svg-sprite-icon" stroke="#757575" width="16" height="12">
                    <use xlink:href="../../img/sprite/symbol/sprite.svg#burger"></use>
                </svg>
            </button>
        </header>
        <div class="d-flex flex-column w-100" id="content-wrapper">
            <header class="sticky-top z-99 bg-white get-height d-md-flex d-none align-items-center justify-content-end"
                data-index="0">
                <!--    <a href="javascript:void(0)" class="p-1">
                <svg class="svg-sprite-icon" fill="#757575" width="24" height="24">
                    <use xlink:href="../../img/sprite/symbol/sprite.svg#moon"></use>
                </svg>
            </a>-->
                <div class="currenty mx-3 d-lg-flex d-none">
                    <div class="select b-0 h-100 small">
                        <input type="hidden" name="defaultcurrency" value="2">
                        <div class="select__item">USD</div>
                        <div class="select__drop ">
                            <ul class="select__menu br-4">
                                <li onclick="showCurrencyDefRate(event, this)" data-from-code="EUR" data-to-code="USD"
                                    data-rate="1.2029" data-from-rate="1.0000" data-to-rate="0.8226"
                                    class="select__option">
                                    EUR->USD </li>
                                <li onclick="showCurrencyDefRate(event, this)" data-from-code="EUR" data-to-code="GBP"
                                    data-rate="0.8911" data-from-rate="1.0000" data-to-rate="1.1313"
                                    class="select__option">
                                    EUR->GBP </li>
                                <li onclick="showCurrencyDefRate(event, this)" data-from-code="USD" data-to-code="EUR"
                                    data-rate="0.8826" data-from-rate="0.8826" data-to-rate="1.0000"
                                    class="select__option active">
                                    USD->EUR </li>
                                <li onclick="showCurrencyDefRate(event, this)" data-from-code="GBP" data-to-code="EUR"
                                    data-rate="1.1913" data-from-rate="1.1913" data-to-rate="1.0000"
                                    class="select__option">
                                    GBP->EUR </li>
                            </ul>
                        </div>
                    </div>
                    <div class="price weight-bold" id="default_currency_rate">
                        0.8826 EUR </div>
                </div>

                <div class="items-center bl-1 px-3 py-2 b-gray-e0">
                    <a href="https://test.cargo4s.com/calendar/" class="p-1">
                        <svg class="svg-sprite-icon" stroke="#757575" width="20" height="20">
                            <use xlink:href="../../img/sprite/symbol/sprite.svg#calendar-8">
                            </use>
                        </svg>
                        <!-- <div class="count-message">99+</div> -->
                    </a>
                    <div class="dropdown no-arrow right-sticky m-1">
                        <a onclick="loadUserMessages(this, 'dialogs')" href="javascript:void(0)" id="messagesDropdown"
                            class="dropdown-toggle p-1" role="button" data-toggle="dropdown">
                            <svg class="svg-sprite-icon" stroke="#757575" width="20" height="20">
                                <use xlink:href="../../img/sprite/symbol/sprite.svg#message-square">
                                </use>
                            </svg>
                            <div class="count-message" id="is_new_messages">2</div>
                        </a>
                        <div class="dropdown-list dropdown-menu animated--grow-in" aria-labelledby="messagesDropdown">
                            <div class="d-flex justify-content-between align-items-center px-1 py-2 bg-blue-v6">
                                <h6 class="px-2 fs-14 weight-medium c-blue ">Messages</h6>
                                <div class="items-center px-2">

                                    <a href="javascript:void(0)" class="ml-3" onclick="muteMessages(this)">
                                        <svg class="svg-sprite-icon c-gray" width="14px" height="14px">
                                            <use xlink:href="../../img/sprite/symbol/sprite.svg#subway_sound">
                                            </use>
                                        </svg>
                                    </a>
                                    <a href="javascript:void(0)" onclick="$('#messagesDropdown').trigger('click');"
                                        class="ml-3">
                                        <svg class="svg-sprite-icon c-gray" width="10px" height="10px">
                                            <use xlink:href="../../img/sprite/symbol/sprite.svg#close">
                                            </use>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                            <div class="h-dropdown">
                                <div class="p-2">
                                    <div class="px-1">
                                        <input type="text" placeholder="Search" onkeyup="searchTopChat(this)" name="q"
                                            id="top_chat_q" class="input-search py-2 h-auto b-blue-v3">
                                    </div>
                                </div>
                                <ul id="top_messages"></ul>
                            </div>
                        </div>
                    </div>

                    <div class="dropdown no-arrow ml-3 my-1 right-sticky">
                        <a href="javascript:void(0)"
                            class="dropdown-toggle items-center b-1 br-200 bg-light-ee b-gray-e0" id="userDropdown"
                            role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <img src="https://test.cargo4s.com/uploads/profiles/1/alex-dev-1751272562.png" alt="avatar"
                                class="br-50 wh-27 b-1 b-gray-e0 mr-1">
                            <svg class="svg-sprite-icon mr-2" fill="#757575" width="9" height="5">
                                <use xlink:href="../../img/sprite/symbol/sprite.svg#arrow-drop-down">
                                </use>
                            </svg>
                        </a>
                        <div class="dropdown-menu shadow animated--grow-in pt-3" aria-labelledby="userDropdown">
                            <a class="dropdown-item mb-2" href="https://test.cargo4s.com/profile/">
                                <svg class="svg-sprite-icon icon-user-4 mr-3 c-gray" width="15px" height="14px">
                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#user-4">
                                    </use>
                                </svg>
                                My profile
                            </a>
                            <a class="dropdown-item mb-2" href="https://test.cargo4s.com/calendar/">
                                <svg class="svg-sprite-icon icon-calendar_2 mr-3 c-gray" width="15px" height="14px">
                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#calendar_2">
                                    </use>
                                </svg>
                                Calendar
                            </a>
                            <a class="dropdown-item mb-2" href="https://test.cargo4s.com/dashboard/">
                                <svg class="svg-sprite-icon icon-miscellaneous mr-3 c-gray" width="15px" height="14px">
                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#miscellaneous ">
                                    </use>
                                </svg>
                                Dashboard
                            </a>
                            <a class="dropdown-item mb-2" href="https://test.cargo4s.com/logout/">
                                <svg class="svg-sprite-icon icon-miscellaneous mr-3 c-gray" width="15px" height="14px">
                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#miscellaneous ">
                                    </use>
                                </svg>
                                Logout
                            </a>

                            <!--                    <a class="dropdown-item mb-2" href="https://test.cargo4s.com/todolistnew/">
                    <svg class="svg-sprite-icon icon-miscellaneous  mr-3 c-gray" width="15px" height="14px">
                        <use xlink:href="../../img/sprite/symbol/sprite.svg#miscellaneous "></use>
                    </svg>
                    To-do list
                </a>-->
                            <!--<div class="row px-3 py-3 mt-1">-->

                            <!--</div>-->
                        </div>
                    </div>

                </div>
            </header>
            <script>
                function showCurrencyDefRate(event, input) {
                    $(input).closest('.select').find('.select__item').html($(input).attr('data-from-code'));
                    event.stopPropagation();
                    event.preventDefault();
                    $('#default_currency_rate').html($(input).attr('data-rate') + ' ' + $(input).attr('data-to-code'));
                    setTimeout(function () {
                        $(input).closest('.select').find('.select__item').html($(input).attr('data-from-code'));
                    }, 10);
                }
            </script>
            <div id="content">
                <div class="container-fluid p-0" id="container-wrapper">
                    <div id="box" class="px-md-3 px-2">
                        <div class="scroll-action-panel py-1 my-md-1">
                            <div class="overflow-md-visible py-2 w-100">
                                <div class="px-3 py-2 bg-white items-center w-100">
                                    <a href="#" class="mr-2 wh-40 d-flex hover-bg-light">
                                        <svg class="svg-sprite-icon c-orange-f4 m-auto" width="18px" height="15px">
                                            <use xlink:href="../../img/sprite/symbol/sprite.svg#arrow-left-2"></use>
                                        </svg>
                                    </a>
                                    <nav class="breadcrumbs_v3 pl-1  scroll-x">
                                        <ul class="d-flex">
                                            <li class="active">
                                                <a href="#">
                                                    <span>
                                                        <svg class="svg-sprite-icon mr-2" width="11px" height="11px">
                                                            <use xlink:href="../../img/sprite/symbol/sprite.svg#check">
                                                            </use>
                                                        </svg>
                                                        Orders
                                                    </span>
                                                </a>
                                            </li>
                                            <li class="active2">
                                                <a href="#"><span>Booking</span> </a>
                                            </li>
                                            <li class="item">
                                                <a href="#"><span>Pre-carriage</span> </a>
                                            </li>
                                            <li class="">
                                                <a href="#"><span>Cargo loading</span> </a>
                                            </li>
                                            <li class="">
                                                <a href="#"><span>Documents</span> </a>
                                            </li>
                                            <li class="">
                                                <a href="#"><span>Tracking</span> </a>
                                            </li>
                                        </ul>
                                    </nav>
                                    <div class="d-flex ml-auto" id="people-group">
                                        <div class="d-flex people-group ml-4">
                                            <div class="">
                                                <button type="button" class="item collapsed" id="heading7"
                                                    data-toggle="collapse" data-target="#collapseDropUser7">
                                                    <p class="d-flex"> <span class="m-auto d-block">TD</span></p>
                                                </button>
                                                <div class="relative">
                                                    <div class="collapse weight-medium fs-13" id="collapseDropUser7"
                                                        aria-labelledby="heading7" data-parent="#people-group">
                                                        <div class="p-3 text-center ">
                                                            <img src="https://test.cargo4s.com/uploads/profiles/3/alex-admin-1709659287.png"
                                                                alt="avatar"
                                                                class="mx-auto mb-1 wh-57 br-50 b-1 b-gray-75">
                                                            <p class="c-light-green mb-1">Online</p>
                                                            <!-- c-gray-9e -->
                                                            <p class="fs-18 text-truncate mb-1">Anna Ivanova -
                                                                IvanovaIvanova
                                                                lmdlkfdklbvskfdmbksmfbk</p>
                                                            <p class="lh-1_4 c-gray-75">YALOVA FiDE TARIM URUNLERI
                                                                PAZARLAMA
                                                                INS.TUR.SAN.VE TIC.LTD.STI.</p>
                                                        </div>
                                                        <div class="p-2 bg-gray-f5 row mx-0 text-truncate-all">
                                                            <div
                                                                class="col-10 mx-auto items-center justify-content-between mb-2">
                                                                <p>alexandr.gospodarets@gmail.com</p>
                                                                <button type="button"
                                                                    class="p-1 bg-light-ee hover-bg-gray-d6 ">
                                                                    <svg class="svg-sprite-icon c-black-1e "
                                                                        width="12px" height="12px">
                                                                        <use
                                                                            xlink:href="../../img/sprite/symbol/sprite.svg#copy2">
                                                                        </use>
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                            <div
                                                                class="col-10 mx-auto items-center justify-content-between">
                                                                <p>+370 681 54861</p>
                                                                <button type="button"
                                                                    class="p-1 bg-light-ee hover-bg-gray-d6 ">
                                                                    <svg class="svg-sprite-icon c-black-1e" width="12px"
                                                                        height="12px">
                                                                        <use
                                                                            xlink:href="../../img/sprite/symbol/sprite.svg#copy2">
                                                                        </use>
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="">
                                                <button type="button" class="item collapsed" id="heading8"
                                                    data-toggle="collapse" data-target="#collapseDropUser8">
                                                    <p class="d-flex"> <span class="m-auto d-block">JP</span></p>
                                                </button>
                                                <div class="relative">
                                                    <div class="collapse weight-medium fs-13" id="collapseDropUser8"
                                                        aria-labelledby="heading8" data-parent="#people-group">
                                                        <div class="p-3 text-center ">
                                                            <img src="../../img/avatars/avatar.png" alt="avatar"
                                                                class="mx-auto mb-1 wh-57 br-50 b-1 b-gray-75">
                                                            <p class="c-light-green mb-1">Online</p>
                                                            <!-- c-gray-9e -->
                                                            <p class="fs-18 text-truncate mb-1">Anna Ivanova -
                                                                IvanovaIvanova
                                                                lmdlkfdklbvskfdmbksmfbk</p>
                                                            <p class="lh-1_4 c-gray-75">YALOVA FiDE TARIM URUNLERI
                                                                PAZARLAMA
                                                                INS.TUR.SAN.VE TIC.LTD.STI.</p>
                                                        </div>
                                                        <div class="p-2 bg-gray-f5 row mx-0 text-truncate-all">
                                                            <div
                                                                class="col-10 mx-auto items-center justify-content-between mb-2">
                                                                <p>info@cargo4s.com</p>
                                                                <button type="button"
                                                                    class="p-1 bg-light-ee hover-bg-gray-d6 ">
                                                                    <svg class="svg-sprite-icon c-black-1e "
                                                                        width="12px" height="12px">
                                                                        <use
                                                                            xlink:href="../../img/sprite/symbol/sprite.svg#copy2">
                                                                        </use>
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                            <div
                                                                class="col-10 mx-auto items-center justify-content-between">
                                                                <p>+370 681 54861</p>
                                                                <button type="button"
                                                                    class="p-1 bg-light-ee hover-bg-gray-d6 ">
                                                                    <svg class="svg-sprite-icon c-black-1e" width="12px"
                                                                        height="12px">
                                                                        <use
                                                                            xlink:href="../../img/sprite/symbol/sprite.svg#copy2">
                                                                        </use>
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="">
                                                <button type="button" class="item collapsed" id="heading9"
                                                    data-toggle="collapse" data-target="#collapseDropUser9">
                                                    <p class="d-flex"> <span class="m-auto d-block">JP</span></p>
                                                </button>
                                                <div class="relative">
                                                    <div class="collapse weight-medium fs-13" id="collapseDropUser9"
                                                        aria-labelledby="heading9" data-parent="#people-group">
                                                        <div class="p-3 text-center ">
                                                            <img src="../../img/avatars/avatar.png" alt="avatar"
                                                                class="mx-auto mb-1 wh-57 br-50 b-1 b-gray-75">
                                                            <p class="c-light-green mb-1">Online</p>
                                                            <!-- c-gray-9e -->
                                                            <p class="fs-18 text-truncate mb-1">Anna Ivanova -
                                                                IvanovaIvanova
                                                                lmdlkfdklbvskfdmbksmfbk</p>
                                                            <p class="lh-1_4 c-gray-75">YALOVA FiDE TARIM URUNLERI
                                                                PAZARLAMA
                                                                INS.TUR.SAN.VE TIC.LTD.STI.</p>
                                                        </div>
                                                        <div class="p-2 bg-gray-f5 row mx-0 text-truncate-all">
                                                            <div
                                                                class="col-10 mx-auto items-center justify-content-between mb-2">
                                                                <p>info@cargo4s.com</p>
                                                                <button type="button"
                                                                    class="p-1 bg-light-ee hover-bg-gray-d6 ">
                                                                    <svg class="svg-sprite-icon c-black-1e "
                                                                        width="12px" height="12px">
                                                                        <use
                                                                            xlink:href="../../img/sprite/symbol/sprite.svg#copy2">
                                                                        </use>
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                            <div
                                                                class="col-10 mx-auto items-center justify-content-between">
                                                                <p>+370 681 54861</p>
                                                                <button type="button"
                                                                    class="p-1 bg-light-ee hover-bg-gray-d6 ">
                                                                    <svg class="svg-sprite-icon c-black-1e" width="12px"
                                                                        height="12px">
                                                                        <use
                                                                            xlink:href="../../img/sprite/symbol/sprite.svg#copy2">
                                                                        </use>
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="d-flex people-group ml-4">
                                            <div class="">
                                                <button type="button" class="item collapsed" id="heading5"
                                                    data-toggle="collapse" data-target="#collapseDropUser5">
                                                    <p class="d-flex"> <span class="m-auto d-block">HS</span></p>
                                                </button>
                                                <div class="relative">
                                                    <div class="collapse weight-medium fs-13" id="collapseDropUser5"
                                                        aria-labelledby="heading5" data-parent="#people-group">
                                                        <div class="p-3 text-center ">
                                                            <img src="../../img/avatars/avatar.png" alt="avatar"
                                                                class="mx-auto mb-1 wh-57 br-50 b-1 b-gray-75">
                                                            <p class="c-light-green mb-1">Online</p>
                                                            <!-- c-gray-9e -->
                                                            <p class="fs-18 text-truncate mb-1">Anna Ivanova -
                                                                IvanovaIvanova
                                                                lmdlkfdklbvskfdmbksmfbk</p>
                                                            <p class="lh-1_4 c-gray-75">YALOVA FiDE TARIM URUNLERI
                                                                PAZARLAMA
                                                                INS.TUR.SAN.VE TIC.LTD.STI.</p>
                                                        </div>
                                                        <div class="p-2 bg-gray-f5 row mx-0 text-truncate-all">
                                                            <div
                                                                class="col-10 mx-auto items-center justify-content-between mb-2">
                                                                <p>info@cargo4s.com</p>
                                                                <button type="button"
                                                                    class="p-1 bg-light-ee hover-bg-gray-d6 ">
                                                                    <svg class="svg-sprite-icon c-black-1e "
                                                                        width="12px" height="12px">
                                                                        <use
                                                                            xlink:href="../../img/sprite/symbol/sprite.svg#copy2">
                                                                        </use>
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                            <div
                                                                class="col-10 mx-auto items-center justify-content-between">
                                                                <p>+370 681 54861</p>
                                                                <button type="button"
                                                                    class="p-1 bg-light-ee hover-bg-gray-d6 ">
                                                                    <svg class="svg-sprite-icon c-black-1e" width="12px"
                                                                        height="12px">
                                                                        <use
                                                                            xlink:href="../../img/sprite/symbol/sprite.svg#copy2">
                                                                        </use>
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="">
                                                <button type="button" class="item collapsed" id="heading6"
                                                    data-toggle="collapse" data-target="#collapseDropUser6">
                                                    <p class="d-flex"> <span class="m-auto d-block">AS</span></p>
                                                </button>
                                                <div class="relative">
                                                    <div class="collapse weight-medium fs-13" id="collapseDropUser6"
                                                        aria-labelledby="heading6" data-parent="#people-group">
                                                        <div class="p-3 text-center ">
                                                            <img src="../../img/avatars/avatar.png" alt="avatar"
                                                                class="mx-auto mb-1 wh-57 br-50 b-1 b-gray-75">
                                                            <p class="c-light-green mb-1">Online</p>
                                                            <!-- c-gray-9e -->
                                                            <p class="fs-18 text-truncate mb-1">Anna Ivanova -
                                                                IvanovaIvanova
                                                                lmdlkfdklbvskfdmbksmfbk</p>
                                                            <p class="lh-1_4 c-gray-75">YALOVA FiDE TARIM URUNLERI
                                                                PAZARLAMA
                                                                INS.TUR.SAN.VE TIC.LTD.STI.</p>
                                                        </div>
                                                        <div class="p-2 bg-gray-f5 row mx-0 text-truncate-all">
                                                            <div
                                                                class="col-10 mx-auto items-center justify-content-between mb-2">
                                                                <p>info@cargo4s.com</p>
                                                                <button type="button"
                                                                    class="p-1 bg-light-ee hover-bg-gray-d6 ">
                                                                    <svg class="svg-sprite-icon c-black-1e "
                                                                        width="12px" height="12px">
                                                                        <use
                                                                            xlink:href="../../img/sprite/symbol/sprite.svg#copy2">
                                                                        </use>
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                            <div
                                                                class="col-10 mx-auto items-center justify-content-between">
                                                                <p>+370 681 54861</p>
                                                                <button type="button"
                                                                    class="p-1 bg-light-ee hover-bg-gray-d6 ">
                                                                    <svg class="svg-sprite-icon c-black-1e" width="12px"
                                                                        height="12px">
                                                                        <use
                                                                            xlink:href="../../img/sprite/symbol/sprite.svg#copy2">
                                                                        </use>
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="d-flex people-group ml-4">
                                            <div class="">
                                                <button type="button" class="item collapsed" id="heading1"
                                                    data-toggle="collapse" data-target="#collapseDropUser1">
                                                    <img src="../../img/avatars/avatar.png" alt="avatar">
                                                </button>
                                                <div class="relative">
                                                    <div class="collapse weight-medium fs-13" id="collapseDropUser1"
                                                        aria-labelledby="heading1" data-parent="#people-group">
                                                        <div class="p-3 text-center ">
                                                            <img src="../../img/avatars/avatar.png" alt="avatar"
                                                                class="mx-auto mb-1 wh-57 br-50 b-1 b-gray-75">
                                                            <p class="c-light-green mb-1">Online</p>
                                                            <!-- c-gray-9e -->
                                                            <p class="fs-18 text-truncate mb-1">Anna Ivanova -
                                                                IvanovaIvanova
                                                                lmdlkfdklbvskfdmbksmfbk</p>
                                                            <p class="lh-1_4 c-gray-75">YALOVA FiDE TARIM URUNLERI
                                                                PAZARLAMA
                                                                INS.TUR.SAN.VE TIC.LTD.STI.</p>
                                                        </div>
                                                        <div class="p-2 bg-gray-f5 row mx-0 text-truncate-all">
                                                            <div
                                                                class="col-10 mx-auto items-center justify-content-between mb-2">
                                                                <p>info@cargo4s.com</p>
                                                                <button type="button"
                                                                    class="p-1 bg-light-ee hover-bg-gray-d6 ">
                                                                    <svg class="svg-sprite-icon c-black-1e "
                                                                        width="12px" height="12px">
                                                                        <use
                                                                            xlink:href="../../img/sprite/symbol/sprite.svg#copy2">
                                                                        </use>
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                            <div
                                                                class="col-10 mx-auto items-center justify-content-between">
                                                                <p>+370 681 54861</p>
                                                                <button type="button"
                                                                    class="p-1 bg-light-ee hover-bg-gray-d6 ">
                                                                    <svg class="svg-sprite-icon c-black-1e" width="12px"
                                                                        height="12px">
                                                                        <use
                                                                            xlink:href="../../img/sprite/symbol/sprite.svg#copy2">
                                                                        </use>
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="">
                                                <button type="button" class="item collapsed" id="heading2"
                                                    data-toggle="collapse" data-target="#collapseDropUser2">
                                                    <img src="../../img/avatars/avatar2.png" alt="avatar">
                                                </button>
                                                <div class="relative">
                                                    <div class="collapse weight-medium fs-13" id="collapseDropUser2"
                                                        aria-labelledby="heading2" data-parent="#people-group">
                                                        <div class="p-3 text-center ">
                                                            <img src="../../img/avatars/avatar2.png" alt="avatar"
                                                                class="mx-auto mb-1 wh-57 br-50 b-1 b-gray-75">
                                                            <p class="c-gray-9e mb-1">3 hours ago</p>
                                                            <p class="fs-18 text-truncate mb-1">James Powell</p>
                                                            <p class="lh-1_4 c-gray-75">Other Company</p>
                                                        </div>
                                                        <div class="p-2 bg-gray-f5 row mx-0 text-truncate-all">
                                                            <div
                                                                class="col-10 mx-auto items-center justify-content-between mb-2">
                                                                <p>info@cargo4s.com</p>
                                                                <button type="button"
                                                                    class="p-1 bg-light-ee hover-bg-gray-d6 ">
                                                                    <svg class="svg-sprite-icon c-black-1e "
                                                                        width="12px" height="12px">
                                                                        <use
                                                                            xlink:href="../../img/sprite/symbol/sprite.svg#copy2">
                                                                        </use>
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                            <div
                                                                class="col-10 mx-auto items-center justify-content-between">
                                                                <p>+370 681 54861</p>
                                                                <button type="button"
                                                                    class="p-1 bg-light-ee hover-bg-gray-d6 ">
                                                                    <svg class="svg-sprite-icon c-black-1e" width="12px"
                                                                        height="12px">
                                                                        <use
                                                                            xlink:href="../../img/sprite/symbol/sprite.svg#copy2">
                                                                        </use>
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="">
                                                <button type="button" class="item collapsed" id="heading3"
                                                    data-toggle="collapse" data-target="#collapseDropUser3">
                                                    <img src="../../img/avatars/avatar.png" alt="avatar">
                                                </button>
                                                <div class="relative">
                                                    <div class="collapse weight-medium fs-13" id="collapseDropUser3"
                                                        aria-labelledby="heading3" data-parent="#people-group">
                                                        <div class="p-3 text-center ">
                                                            <img src="../../img/avatars/avatar.png" alt="avatar"
                                                                class="mx-auto mb-1 wh-57 br-50 b-1 b-gray-75">
                                                            <p class="c-light-green mb-1">Online</p>
                                                            <!-- c-gray-9e -->
                                                            <p class="fs-18 text-truncate mb-1">Anna Ivanova -
                                                                IvanovaIvanova
                                                                lmdlkfdklbvskfdmbksmfbk</p>
                                                            <p class="lh-1_4 c-gray-75">YALOVA FiDE TARIM URUNLERI
                                                                PAZARLAMA
                                                                INS.TUR.SAN.VE TIC.LTD.STI.</p>
                                                        </div>
                                                        <div class="p-2 bg-gray-f5 row mx-0 text-truncate-all">
                                                            <div
                                                                class="col-10 mx-auto items-center justify-content-between mb-2">
                                                                <p>info@cargo4s.com</p>
                                                                <button type="button"
                                                                    class="p-1 bg-light-ee hover-bg-gray-d6 ">
                                                                    <svg class="svg-sprite-icon c-black-1e "
                                                                        width="12px" height="12px">
                                                                        <use
                                                                            xlink:href="../../img/sprite/symbol/sprite.svg#copy2">
                                                                        </use>
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                            <div
                                                                class="col-10 mx-auto items-center justify-content-between">
                                                                <p>+370 681 54861</p>
                                                                <button type="button"
                                                                    class="p-1 bg-light-ee hover-bg-gray-d6 ">
                                                                    <svg class="svg-sprite-icon c-black-1e" width="12px"
                                                                        height="12px">
                                                                        <use
                                                                            xlink:href="../../img/sprite/symbol/sprite.svg#copy2">
                                                                        </use>
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="">
                                                <button type="button" class="item collapsed" id="heading4"
                                                    data-toggle="collapse" data-target="#collapseDropUser4">
                                                    <img src="../../img/avatars/avatar2.png" alt="avatar">
                                                </button>
                                                <div class="relative">
                                                    <div class="collapse weight-medium fs-13" id="collapseDropUser4"
                                                        aria-labelledby="heading4" data-parent="#people-group">
                                                        <div class="p-3 text-center ">
                                                            <p class="d-flex wh-57 br-50 b-1 b-gray-75 mx-auto mb-1">
                                                                <span class="m-auto d-block  ">AP</span>
                                                            </p>
                                                            <p class="c-gray-9e mb-1">3 hours ago</p>
                                                            <p class="fs-18 text-truncate mb-1">James Powell</p>
                                                            <p class="lh-1_4 c-gray-75">Other Company</p>
                                                        </div>
                                                        <div class="p-2 bg-gray-f5 row mx-0 text-truncate-all">
                                                            <div
                                                                class="col-10 mx-auto items-center justify-content-between mb-2">
                                                                <p>info@cargo4s.com</p>
                                                                <button type="button"
                                                                    class="p-1 bg-light-ee hover-bg-gray-d6 ">
                                                                    <svg class="svg-sprite-icon c-black-1e "
                                                                        width="12px" height="12px">
                                                                        <use
                                                                            xlink:href="../../img/sprite/symbol/sprite.svg#copy2">
                                                                        </use>
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                            <div
                                                                class="col-10 mx-auto items-center justify-content-between">
                                                                <p>+370 681 54861</p>
                                                                <button type="button"
                                                                    class="p-1 bg-light-ee hover-bg-gray-d6 ">
                                                                    <svg class="svg-sprite-icon c-black-1e" width="12px"
                                                                        height="12px">
                                                                        <use
                                                                            xlink:href="../../img/sprite/symbol/sprite.svg#copy2">
                                                                        </use>
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <button type="button" class="wh-40 d-flex ml-2 hover-bg-light collapsed"
                                        data-toggle="collapse" data-target="#collapseAddPeople">
                                        <svg class="svg-sprite-icon c-orange-f4 m-auto" width="20px" height="20px">
                                            <use xlink:href="../../img/sprite/symbol/sprite.svg#userCirclePlus"></use>
                                        </svg>
                                    </button>

                                </div>
                            </div>
                        </div>

                        <div class="px-3 py-2 bg-white mb-3">
                            <div class="items-end flex-wrap fs-14 lh-31">
                                <div class="d-flex mb-2 mr-auto">
                                    <label class="pr-2 relative pt-2 mr-1">
                                        <input type="radio" name="radio_type" class="checkbox" checked="">
                                        <span class="radio-active px-2 flex-center br-4 bg-gray-e0 hover-red">
                                            Export
                                            <span class="d-none absolute br-50 t-0 r-0 wh-20 b-2 b-white bg-orange-f4">
                                                <svg class="svg-sprite-icon m-auto" fill="white" width="10" height="10">
                                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#check">
                                                    </use>
                                                </svg>
                                            </span>
                                        </span>
                                    </label>
                                    <label class="pr-2 relative pt-2 mr-1">
                                        <input type="radio" name="radio_type" class="checkbox">
                                        <span class="radio-active px-2 flex-center br-4 bg-gray-e0 hover-red">
                                            Import
                                            <span class="d-none absolute br-50 t-0 r-0 wh-20 b-2 b-white bg-orange-f4">
                                                <svg class="svg-sprite-icon m-auto" fill="white" width="10" height="10">
                                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#check">
                                                    </use>
                                                </svg>
                                            </span>
                                        </span>
                                    </label>
                                    <label class="pr-2 relative pt-2 mr-1">
                                        <input type="radio" name="radio_type" class="checkbox">
                                        <span class="radio-active px-2 flex-center br-4 bg-gray-e0 hover-red">
                                            Cross-trade
                                            <span class="d-none absolute br-50 t-0 r-0 wh-20 b-2 b-white bg-orange-f4">
                                                <svg class="svg-sprite-icon m-auto" fill="white" width="10" height="10">
                                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#check">
                                                    </use>
                                                </svg>
                                            </span>
                                        </span>
                                    </label>
                                </div>
                                <div class="d-flex mb-2">
                                    <label class="mr-2">
                                        <input type="radio" name="ord_cat" class="checkbox" checked>
                                        <span
                                            class="radio-active w-100px flex-center br-4 bg-gray-e0 c-gray-75 hover-red">
                                            <svg class="svg-sprite-icon mr-1" width="14px" height="14px">
                                                <use xlink:href="../../img/sprite/symbol/sprite.svg#boat5"></use>
                                            </svg>
                                            Sea
                                        </span>
                                    </label>
                                    <label>
                                        <input type="radio" name="ord_cat" class="checkbox">
                                        <span
                                            class="radio-active w-100px flex-center br-4 bg-gray-e0 c-gray-75 hover-red">
                                            <svg class="svg-sprite-icon mr-1" width="15px" height="11px">
                                                <use xlink:href="../../img/sprite/symbol/sprite.svg#truck-line2">
                                                </use>
                                            </svg>
                                            Road
                                        </span>
                                    </label>
                                </div>
                            </div>
                            <div class="d-lg-flex">
                                <div class="row col-xl-9 px-0 block_resize-input">
                                    <div class="col-lg-4 items-center mt-3 ">
                                        <svg class="svg-sprite-icon mr-2 c-orange-f4" width="17" height="20">
                                            <use xlink:href="../../img/sprite/symbol/sprite.svg#wallet"></use>
                                        </svg>
                                        <div class="d-flex align-items-end">
                                            <p>Payment terms: </p>
                                            <div class="table__span" style="display: none;">. . . . .</div>
                                            <input id="payment_terms" type="number" placeholder=". . . . ."
                                                name="payment_terms" value="" class="input-normal ml-3">
                                        </div>
                                    </div>
                                    <div class="col-lg-4 items-center mt-3">
                                        <svg class="svg-sprite-icon mr-2" stroke="#F45617" width="17" height="20">
                                            <use xlink:href="../../img/sprite/symbol/sprite.svg#calendar-8"></use>
                                        </svg>
                                        <div class="d-flex align-items-end">
                                            <p>Estimated ready week:</p>
                                            <div class="table__span" style="display: none;">. . . . .</div>
                                            <input type="number" id="ready_week" placeholder=". . . . ."
                                                name="ready_week" value="" class=" input-normal ml-3" inited="1">
                                            <input type="hidden" name="ready_year" id="ready_year" value="2000">
                                        </div>
                                    </div>
                                    <div class="col-lg-4 items-center mt-3">
                                        <svg class="svg-sprite-icon mr-2" stroke="#F45617" width="17" height="20">
                                            <use xlink:href="../../img/sprite/symbol/sprite.svg#calendar-8"></use>
                                        </svg>
                                        <div class="d-flex align-items-end">
                                            <p>Requested delivery:</p>
                                            <div class="table__span" style="display: none;">. . . . .</div>
                                            <input type="text" placeholder=". . . . ." id="requested_delivery"
                                                name="requested" value="" class="fromdate input-normal ml-3" inited="1">
                                        </div>
                                    </div>
                                </div>

                                <label class="items-center mt-3 mr-4">
                                    <input type="checkbox" name="asap"
                                        onclick="$('#requested_delivery').prop('disabled', $(this).prop('checked')?true:false)"
                                        value="1" class="checkbox">
                                    <span class="checked-customer dark mr-2 br-4">
                                        <svg class="svg-sprite-icon c-none mx-auto" width="12px" height="18px">
                                            <use xlink:href="../../img/sprite/symbol/sprite.svg#check">
                                            </use>
                                        </svg>
                                    </span>
                                    <span class="pl-1">ASAP</span>
                                </label>
                                <label class="items-center mt-3">
                                    <input type="checkbox" class="checkbox" checked="">
                                    <span class="checked-customer dark mr-2 br-4">
                                        <svg class="svg-sprite-icon c-none mx-auto" width="12px" height="18px">
                                            <use xlink:href="../../img/sprite/symbol/sprite.svg#check">
                                            </use>
                                        </svg>
                                    </span>
                                    <span class="pl-1">Private</span>
                                </label>
                            </div>
                        </div>

                        <div class="br-4 mb-3 bg-white p-3">
                            <div class="items-center flex-wrap">
                                <h2 class="mr-3">Orders</h2>
                                <div class="block bg-purple-7e_10 c-purple-7e weight-normal mr-1">Loading No</div>
                                <div class="block bg-green-43_10 c-green-43 weight-normal mr-1">Loading No</div>
                                <div class="block bg-yellow-ff_10 c-yellow-ff weight-normal mr-1">Loading No</div>
                                <div class="block bg-blue-21_10 c-blue-21 weight-normal mr-1">Loading No</div>
                                <div class="block bg-red-e6_10 c-red-e6 weight-normal mr-1">Loading No</div>
                                <div class="block bg-orange_fe c-orange-f4 weight-normal">Loading No</div>
                            </div>
                            <div class="row">
                                <div class="col-md-4 mt-3">
                                    <p class="c-gray-69 mb-1">Order No.</p>
                                    <input type="text" class="bg-white br-4 b-gray-bd" autocomplete="off"
                                        id="internalorderid" data-disabled="1" readonly="" name="internalorderid"
                                        value="OR4397">
                                </div>
                                <div class="col-md-4 mt-3">
                                    <p class="c-gray-69 mb-1">Shipper Order No.</p>
                                    <input type="text" class="bg-white br-4 b-gray-bd"
                                        onchange="renewCustomLoadings(this)" autocomplete="off" id="shipperorderid"
                                        name="shipperorderid" value="">
                                </div>
                                <div class="col-md-4 mt-3">
                                    <p class="c-gray-69 mb-1">Client Order No.</p>
                                    <input type="text" class="bg-white br-4 b-gray-bd" autocomplete="off"
                                        onkeyup="renewCustomLoadings(this)" id="clientorderid" name="clientorderid"
                                        value="">
                                </div>
                            </div>
                        </div>

                        <div class="br-4 mb-3 bg-white p-3" id="parties">
                            <div class="items-center flex-wrap">
                                <h2 class="mr-3">Parties</h2>
                                <div class="block bg-purple-7e_10 c-purple-7e weight-normal mr-1">BL notify</div>
                                <div class="block bg-green-43_10 c-green-43 weight-normal mr-1">BL notify</div>
                                <div class="block bg-yellow-ff_10 c-yellow-ff weight-normal mr-1">BL notify</div>
                                <div class="block bg-blue-21_10 c-blue-21 weight-normal mr-1">BL notify</div>
                                <div class="block bg-red-e6_10 c-red-e6 weight-normal mr-1">BL notify</div>
                                <div class="block bg-orange_fe c-orange-f4 weight-normal">BL notify</div>

                                <button type="button" onclick="slideParties(this)" class="btn ml-auto px-4"
                                    data-hidden="1">+ Add</button>
                            </div>
                            <div class="row">
                                <div class="col-md-4 mt-3">
                                    <p class="c-gray-69 mb-1">Customer</p>
                                    <input type="hidden" onchange="getCustomerDestination(this)" autocomplete="off"
                                        name="partiesid[8][]" id="partyid_8_1" value="">
                                    <input name="parties[8][]" data-type="8" autocomplete="off"
                                        data-target="#partyid_8_1" id="party_8_1" value="" type="text"
                                        class="typeaheadcompany bg-white br-4 b-gray-bd">
                                </div>
                                <div class="col-md-4 mt-3">
                                    <p class="c-gray-69 mb-1">Consignee</p>
                                    <input type="hidden" autocomplete="off" onchange="" name="partiesid[4][]"
                                        id="partyid_4_1" value="">
                                    <input name="parties[4][]" data-type="4" autocomplete="off" id="party_4_1"
                                        data-target="#partyid_4_1" value="" type="text"
                                        class="typeaheadcompany bg-white br-4 b-gray-bd">
                                </div>
                                <div class="col-md-4 mt-3">
                                    <p class="c-gray-69 mb-1">Shipper</p>
                                    <input type="hidden" autocomplete="off" name="partiesid[3][]" id="partyid_3_1"
                                        value="" onchange="getShipperOrigin(this)">
                                    <input name="parties[3][]" data-type="3" autocomplete="off"
                                        data-target="#partyid_3_1" id="party_3_1" value="" type="text"
                                        class="typeaheadcompany bg-white br-4 b-gray-bd">
                                </div>
                            </div>
                            <div class="row parties-item" style="display:none;">
                                <div class="col-md-4 mt-3">
                                    <p class="c-gray-69 mb-1">Agent</p>
                                    <input type="hidden" autocomplete="off" name="partiesid[5][]" id="partyid_5_1" value=""/>
                                    <input name="parties[5][]" data-type="5" autocomplete="off" data-target="#partyid_5_1" id="party_5_1" value="" type="text" class="typeaheadcompany bg-white br-4 b-gray-bd"/>
                                </div>
                                <div class="col-md-4 mt-3">
                                    <p class="c-gray-69 mb-1">Customs Broker</p>
                                    <input type="hidden" autocomplete="off" onchange="" name="partiesid[6][]"
                                        id="partyid_6_1" value=""/>
                                    <input name="parties[6][]" data-type="6" autocomplete="off" id="party_6_1"
                                        data-target="#partyid_6_1" value="" type="text" class="typeaheadcompany bg-white br-4 b-gray-bd"/>
                                </div>
                                <div class="col-md-4 mt-3">
                                    <p class="c-gray-69 mb-1">Trucker dest.</p>
                                    <input type="hidden" autocomplete="off" name="partiesid[9][]" id="partyid_9_1"
                                        value=""/> 
                                        <input name="parties[9][]" data-type="9" autocomplete="off"
                                        data-target="#partyid_9_1" id="party_9_1" type="text"
                                        class="typeaheadcompany bg-white br-4 b-gray-bd" value=""/>
                                </div>
                            </div>
                        </div>

                        <div class="br-4 mb-3 bg-white p-3">
                            <div class="items-center mb-4">
                                <ul class="nav nav-tabs_v10 border_nav mr-auto" data-index="0" id="order_tabs">
                                    <li class="nav-item">
                                        <a class="nav-link py-2 mr-5 active" onclick="switchOrderTabs(this)"
                                            data-toggle="tab" href="#contents__item-1">Orders No</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link py-2 mr-5 ml-2" onclick="switchOrderTabs(this)"
                                            data-toggle="tab" href="#contents__item-3">Transport</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link py-2 mr-5 ml-2" onclick="switchOrderTabs(this)"
                                            data-toggle="tab" href="#contents__item-2">Products</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link py-2 mr-5 ml-2" onclick="switchOrderTabs(this)"
                                            data-toggle="tab" href="#contents__item-4">Documents</a>
                                    </li>
                                </ul>
                                <div class="items-center completed-hide">
                                    <a href="javascript:void(0)" onclick="addOrderTabItem(this)" id="order_tab_add_item"
                                        class="btn hide">
                                        <svg class="svg-sprite-icon" fill="#fff" width="15" height="15">
                                            <use xlink:href="../../img/sprite/symbol/sprite.svg#plus"></use>
                                        </svg>
                                    </a>
                                    <a href="javascript:void(0)" onclick="editOrderTabItem(this)"
                                        id="order_tab_edit_item" class="btn ml-2 hide">
                                        <svg class="svg-sprite-icon" stroke="#fff" width="15" height="15">
                                            <use xlink:href="../../img/sprite/symbol/sprite.svg#create3"></use>
                                        </svg>
                                    </a>
                                    <a href="javascript:void(0)" onclick="saveOrderTabItem(this)"
                                        id="order_tab_save_item" class="btn ml-2 hide">
                                        <svg class="svg-sprite-icon" fill="#fff" width="15" height="15">
                                            <use xlink:href="../../img/sprite/symbol/sprite.svg#check"></use>
                                        </svg>
                                    </a>
                                    <a href="javascript:void(0)" onclick="removeCargoItems(this)"
                                        id="cargo_remove_button" class="btn ml-2 hide">
                                        <svg class="svg-sprite-icon" fill="#fff" width="15" height="15">
                                            <use xlink:href="../../img/sprite/symbol/sprite.svg#bin3"></use>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                            <div class="contents p-0" data-index="0">
                                <div class="contents__item active" id="contents__item-1">
                                    <div class="items-center fs-13 weight-medium c-gray-69">
                                        <p class="mr-2">Custom No.</p>
                                        <label id="add_custom_orderno">
                                            <input type="checkbox" id="customordload" name="customordload" checked=""
                                                value="1" onclick="checkCustomLoadings();saveOrderCustomLoadings()"
                                                class="checkbox">
                                            <span class="switch-yn d-flex orange">
                                                <span class="switch-n ">No</span>
                                                <span class="switch-y">Yes</span>
                                                <span class="switch-yn_circle "></span>
                                            </span>
                                        </label>
                                        <div class="pl-5 mb-3">
                                            <p class="pb-1">Quantity</p>
                                            <div class="calc calc_v1 max-w-156">
                                                <button class="calc__btn calc__btn-minus">-</button>
                                                <input type="number" class="calc__input" data-step="1"
                                                    autocomplete="off" onchange="renewCustomLoadings(this);"
                                                    id="quantity" name="quantity" value="0" placeholder="...">
                                                <button class="calc__btn calc__btn-plus">+</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mx-0 bg-gray-f5 br-4 py-3">
                                        <div class="col-6">
                                            <label class="items-center">
                                                <input type="checkbox" class="checkbox" />
                                                <span class="checked-customer dark mr-2 br-4">
                                                    <svg class="svg-sprite-icon c-none mx-auto" width="12px"
                                                        height="18px">
                                                        <use xlink:href="../../img/sprite/symbol/sprite.svg#check">
                                                        </use>
                                                    </svg>
                                                </span>
                                                <span class="pl-1">Order No</span>
                                            </label>
                                        </div>
                                        <div class="col-3">PRODUCTS</div>
                                        <div class="col-3">QUANTITY</div>
                                    </div>
                                    <ul>
                                        <li class="bb-1 py-3">
                                            <div class="row mx-0">
                                                <div class="col-6">
                                                    <div class="items-center">
                                                        <label>
                                                            <input type="checkbox" class="checkbox" />
                                                            <span class="checked-customer dark mr-2 br-4">
                                                                <svg class="svg-sprite-icon c-none mx-auto" width="12px"
                                                                    height="18px">
                                                                    <use
                                                                        xlink:href="../../img/sprite/symbol/sprite.svg#check">
                                                                    </use>
                                                                </svg>
                                                            </span>
                                                        </label>
                                                        <p class="pl-1">P20-653878568-787923798</p>
                                                        <a type="button" class="collapsed-arrow px-3 collapsed"
                                                            data-toggle="collapse" data-target="#collapseOrderNo_1">
                                                            <svg class="svg-sprite-icon c-gray-69" width="13"
                                                                height="10">
                                                                <use
                                                                    xlink:href="../../img/sprite/symbol/sprite.svg#arrow-up-2">
                                                                </use>
                                                            </svg>
                                                        </a>
                                                    </div>
                                                </div>
                                                <div class="col-3">15x</div>
                                                <div class="col-3">180</div>
                                            </div>
                                            <ul class="collapse pt-3" id="collapseOrderNo_1">
                                                <li class="row mx-0 pt-2">
                                                    <div class="col-6">1. QTS 0-20 White Peat, WA, pH 5.5-6.0</div>
                                                    <div class="col-3">15x</div>
                                                    <div class="col-3">180</div>
                                                </li>
                                                <li class="row mx-0 pt-2">
                                                    <div class="col-6">2. QTS 0-20 White Peat, WA, pH 5.5-6.0</div>
                                                    <div class="col-3">15x</div>
                                                    <div class="col-3">180</div>
                                                </li>
                                            </ul>
                                        </li>
                                        <li class="bb-1 py-3">
                                            <div class="row mx-0">
                                                <div class="col-6 ">
                                                    <input type="text" placeholder="  . . . . . "
                                                        class="input-normal text-left c-dark ml-4 pl-2" />
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                <div class="contents__item" id="contents__item-2">
                                    <div class="row">
                                        <div class="col-xl-4 col-sm-6 col-12">
                                            <p class="c-gray-69 mb-2">Transport rate in separate line</p>
                                            <div class="d-flex b-1 p-1 b-gray-9e bg-gray-f5 w-fit-content br-4 mb-3">
                                                <label>
                                                    <input type="radio" name="radio_1" class="checkbox" checked=""
                                                        data-value="fcl" checked
                                                        onclick="setContainerLoad(this, 'fcl')">
                                                    <span
                                                        class="radio-active px-3 py-2 h-100 items-center mr-1 br-4 c-gray-75 hover-red weight-medium">
                                                        <svg class="svg-sprite-icon mr-2" alt="icon" width="15"
                                                            height="15">
                                                            <use
                                                                xlink:href="../../img/sprite/symbol/sprite.svg#container2">
                                                            </use>
                                                        </svg>
                                                        FCL
                                                    </span>
                                                </label>
                                                <label>
                                                    <input type="radio" name="radio_1" class="checkbox" data-value="lcl"
                                                        onclick="setContainerLoad(this, 'lcl')">
                                                    <span
                                                        class="radio-active px-3 py-2 h-100 items-center br-4 c-gray-75 hover-red weight-medium">
                                                        <svg class="svg-sprite-icon mr-2" width="15" height="15">
                                                            <use
                                                                xlink:href="../../img/sprite/symbol/sprite.svg#container5">
                                                            </use>
                                                        </svg>
                                                        LCL
                                                    </span>
                                                </label>
                                            </div>
                                            <p class="transport-mode__container">FULL CONTAINER LOAD</p>

                                        </div>
                                        <div class="col-xl-8 col-12">
                                            <div class="incoterms-container">
                                                <div class="row">
                                                    <div class="col-md-6 mb-3">
                                                        <p class="c-gray-69 mb-1">Incoterm</p>
                                                        <div class="select bg-white br-4 b-gray-bd" inited="1">
                                                            <input type="hidden" id="incoterm"
                                                                onchange="reloadIncotermsConditions(this)"
                                                                name="incoterm" value="0">
                                                            <div class="select__item"></div>
                                                            <div class="select__drop">
                                                                <ul class="select__menu p-2">
                                                                    <li class="select__option p-1 mb-1" data-value="1">
                                                                        EXW</li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 mb-3">
                                                        <p class="c-gray-69 mb-1">Move type</p>
                                                        <div class="select bg-white br-4 b-gray-bd" inited="1">
                                                            <input type="hidden" name="movetype" id="movetype"
                                                                onchange="filterMovetypeLine(this);" value="0">
                                                            <div class="select__item"></div>
                                                            <div class="select__drop">
                                                                <ul class="select__menu p-2">
                                                                    <li class="select__option p-1 mb-1" data-value="1">
                                                                        Door to port</li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="cont-load__container hide" data-value="lcl">
                                                <div class="row">
                                                    <label class="absolute l-0 py-4 ml--25">
                                                        <input type="checkbox" name="cargo_item[]" value=""
                                                            class="checkbox" onclick="checkCargoRemove()">
                                                        <span class="checked-customer dark br-4">
                                                            <svg class="svg-sprite-icon c-none mx-auto" width="12px"
                                                                height="18px">
                                                                <use
                                                                    xlink:href="../../img/sprite/symbol/sprite.svg#check">
                                                                </use>
                                                            </svg>
                                                        </span>
                                                    </label>
                                                    <div class="col-md-6 mb-3">
                                                        <p class="c-gray-69 mb-1">Cargo type</p>
                                                        <div class="select bg-white br-4 b-gray-bd" inited="1">
                                                            <input type="hidden" name="transport_items[cargo_type][]"
                                                                value="pallet">
                                                            <div class="select__item">Pallet</div>
                                                            <div class="select__drop">
                                                                <ul class="select__menu p-2">
                                                                    <li class="select__option p-1 mb-1"
                                                                        data-value="pallet">Pallet</li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 mb-3">
                                                        <p class="c-gray-69 mb-1">Weight of one</p>
                                                        <input type="text" class="bg-white br-4 b-gray-bd"
                                                            name="transport_items[weight_of_one][]" value="">
                                                    </div>
                                                    <div class="col-md-6 mb-3 d-flex">
                                                        <p class="c-white w-100px bg-orange-f4 br-4 h-100 flex-center">
                                                            QTY</p>
                                                        <input type="text" name="transport_items[qty][]"
                                                            class="bg-white br-4 b-gray-bd ml--1" value="">
                                                    </div>
                                                    <div class="col-md-6 mb-3">
                                                        <div class="d-flex fs-13">
                                                            <div class="relative">
                                                                <p class="absolute l-0 t-center px-2">L</p>
                                                                <input type="number" name="transport_items[i_length][]"
                                                                    class="br-4-left b-gray-bd pl-4" value=""
                                                                    inited="1">
                                                            </div>
                                                            <div class="relative">
                                                                <p class="absolute l-0 t-center px-2">H</p>
                                                                <input type="number" name="transport_items[i_height][]"
                                                                    class="b-gray-bd pl-4" value="" inited="1">
                                                            </div>
                                                            <div class="relative">
                                                                <p class="absolute l-0 t-center px-2">W</p>
                                                                <input type="number" name="transport_items[i_width][]"
                                                                    class="b-gray-bd pl-4" value="" inited="1"></li>
                                                            </div>
                                                            <div
                                                                class="w-100px flex-center bg-orange-f4 c-white br-4-right ">
                                                                cm</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <button type="button" id="add_lcl_item" onclick="allLclItem(this)"
                                                    class="btn mb-3">Add new box </button>
                                            </div>
                                            <div class="cont-load__container" data-value="fcl">
                                                <div class="row">
                                                    <div class="col-md-6 mb-3">
                                                        <p class="c-gray-69 mb-1">Container type</p>
                                                        <div class="select bg-white br-4 b-gray-bd" inited="1">
                                                            <input type="hidden" name="container" value="2">
                                                            <div class="select__item"></div>
                                                            <div class="select__drop">
                                                                <ul class="select__menu p-2">
                                                                    <li class="select__option p-1 mb-1" data-value="1">
                                                                        EXW</li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 mb-3">
                                                        <p class="c-gray-69 mb-1">Weight, kg</p>
                                                        <div class="calc calc_v1">
                                                            <button class="calc__btn calc__btn-minus">-</button>
                                                            <input type="number" name="weight" data-step="500"
                                                                id="weight" data-default=""
                                                                class="calc__input b-gray-bd" value="26000">
                                                            <button class="calc__btn calc__btn-plus">+</button>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 mb-3 d-flex ml-auto">
                                                        <input type="text" class="b-gray-9e mr-1 br-4 bg-white"
                                                            name="transport_price">
                                                        <div class="select bg-white br-4 b-gray-bd w-100px" inited="1">
                                                            <input type="hidden" name="transport_currency" value="1">
                                                            <div class="select__item">EUR</div>
                                                            <div class="select__drop">
                                                                <ul class="select__menu p-2">
                                                                    <li class="select__option p-1 mb-1" data-value="1">
                                                                        EUR</li>
                                                                    <li class="select__option p-1 mb-1" data-value="2">
                                                                        USD</li>
                                                                    <li class="select__option p-1 mb-1" data-value="3">
                                                                        GBP</li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="b-1 br-4 p-3">
                                        <div class="row">
                                            <div class="col-lg-4 mb-3 d-flex">
                                                <p
                                                    class="c-white w-100px bg-orange-f4 br-4 h-100 flex-center flex-shrink-0">
                                                    Port</p>
                                                <input type="hidden" autocomplete="off" name="location_from"
                                                    id="from_port" value="">
                                                <input type="text" autocomplete="off" name="location_from_str"
                                                    id="str_from_port" data-target="#from_port" placeholder="From..."
                                                    value="" class="typeahead bg-white br-4 b-gray-bd ml--1">
                                            </div>
                                            <div class="col-lg-4 mb-3 d-flex">
                                                <p
                                                    class="c-white w-100px bg-orange-f4 br-4 h-100 flex-center flex-shrink-0">
                                                    Freight</p>
                                                <div class="select card__select" inited="1">
                                                    <input type="hidden" name="freight" value="">
                                                    <div class="select__item"></div>
                                                    <div class="select__drop" style="display: none;">
                                                        <ul class="select__menu">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-4 mb-3 d-flex">
                                                <p
                                                    class="c-white w-100px bg-orange-f4 br-4 h-100 flex-center flex-shrink-0">
                                                    Port</p>
                                                <input type="hidden" autocomplete="off" name="location_to" id="to_port"
                                                    value="">
                                                <input type="text" autocomplete="off" name="location_to_str"
                                                    id="str_to_port" data-target="#to_port" placeholder="To..." value=""
                                                    class="typeahead bg-white br-4 b-gray-bd ml--1">
                                            </div>
                                            <div class="col-lg-4 mb-3 d-flex">
                                                <div
                                                    class="c-white w-100px bg-orange-f4 br-4 h-100 flex-center flex-shrink-0">
                                                    Origin</div>
                                                <input type="hidden" name="originid" id="originid" autocomplete="off"
                                                    value="0">
                                                <input type="text"
                                                    class="bg-white br-4 b-gray-bd ml--1 typeaheadaddress"
                                                    autocomplete="off" data-target="#originid" name="origin" id="origin"
                                                    placeholder="From place of loading" value="">
                                            </div>
                                            <div class="col-lg-4"></div>
                                            <div class="col-lg-4 mb-3 d-flex">
                                                <div
                                                    class="c-white w-100px bg-orange-f4 br-4 h-100 flex-center flex-shrink-0">
                                                    Destination</div>
                                                <input type="hidden" name="destinationid" id="destinationid"
                                                    autocomplete="off" value="0">
                                                <input type="text"
                                                    class="bg-white br-4 b-gray-bd ml--1 typeaheadaddress"
                                                    autocomplete="off" data-target="#destinationid" name="destination"
                                                    id="destination" placeholder="To place of delivery" value="">
                                            </div>
                                        </div>
                                        <div class="items-center fs-14 min-h-95">
                                            <div class="way2 items-center relative">
                                                <!-- <div class="way3-content items-center text-nowrap">
                                                    <img src="../../img/flag.svg" alt=" flag" width="14px" height="14px" class="mr-2 wh-13_1440">
                                                    <p class=" weight-medium  fs-12_1440">Vilnius, LT <span class="c-gray-69"> (Port)</span></p>
                                                </div> -->
                                                <div class="way3-pin orange"></div>
                                                <div class="bg-orange-f4 way2-line "></div>
                                                <!-- <div class="way2-content l-0 fs-13 fs-11_1440">
                                                    <p class="weight-light"><span class="weight-medium">Loading</span>  18 Apr. 2020</p>
                                                </div> -->
                                            </div>
                                            <div class="way2 items-center">
                                                <svg class="svg-sprite-icon" fill="#F45617" width="15" height="15">
                                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#truck-line2">
                                                    </use>
                                                </svg>
                                                <div class="bg-orange-f4 way2-line"></div>
                                            </div>
                                            <div class="way2 items-center relative">
                                                <div class="way3-content l-center text-center">
                                                    <p class="fs-13 weight-medium c-gray-69 lh-1_4 fs-10_1440">POL</p>
                                                </div>
                                                <div class="way3-pin gray"></div>
                                                <div class="way2-line bg-gray-92"></div>
                                            </div>

                                            <div class="way2 items-center relative">
                                                <svg class="svg-sprite-icon" fill="#929292" width="15" height="15">
                                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#boat5"></use>
                                                </svg>
                                                <div class="way2-line bg-gray-92"></div>
                                            </div>
                                            <div class="way2 items-center relative">
                                                <div class="way3-content l-center text-center">
                                                    <p class="fs-13 weight-medium c-gray-69 lh-1_4 fs-10_1440">POD</p>
                                                </div>
                                                <div class="way3-pin gray"></div>
                                                <div class="way2-line bg-gray-92"></div>
                                            </div>
                                            <div class="way2 items-center">
                                                <svg class="svg-sprite-icon" fill="#929292" width="15" height="15">
                                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#truck-line2">
                                                    </use>
                                                </svg>
                                                <div class="way2-line bg-gray-92"></div>
                                            </div>
                                            <div class="way2 items-center relative text-right">
                                                <!-- <div class="way3-content l-auto r-0 items-center text-nowrap">
                                                    <p class="weight-medium fs-12_1440">Florida, US <span class="c-gray-69"> (Port)</span> </p>
                                                    <img src="../../img/flag.svg" alt=" flag" width="14px" height="14px" class="ml-2">
                                                </div> -->
                                                <div class="way3-pin gray"></div>
                                                <!-- <div class="way2-content r-0 fs-14 fs-11_1440">
                                                    <p class="weight-light "><span class="weight-medium">Delivery</span> 30 Apr. 2020 </p>
                                                </div> -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="contents__item" id="contents__item-3">
                                    <div class="items-center mb-3">
                                        <p class="mr-2">Transport rate in separate line</p>
                                        <label id="add_custom_orderno" class="">
                                            <input type="checkbox" id="price_calc" onclick="showTransportPrice(this)"
                                                name="price_calc" value="excluded" class="checkbox">
                                            <span class="switch-yn d-flex orange">
                                                <span class="switch-n ">No</span>
                                                <span class="switch-y">Yes</span>
                                                <span class="switch-yn_circle "></span>
                                            </span>
                                        </label>
                                    </div>
                                    <div class="row mx-0 bg-gray-f5 br-4 py-3">
                                        <div class="col-3">PRODUCT NAME</div>
                                        <div class="col-7">
                                            <div class="row">
                                                <div class="col-3">ORDERS</div>
                                                <div class="col-3">PACKING</div>
                                                <div class="col-3">PRICE</div>
                                                <div class="col-3">QUANTITY</div>
                                            </div>
                                        </div>
                                        <div class="col-2">PALLETS</div>
                                    </div>
                                    <ul>
                                        <li class="bb-1 py-3">
                                            <div class="row mx-0">
                                                <div class="col-3 px-2">
                                                    <div class="d-flex">
                                                        <label>
                                                            <input type="checkbox" class="checkbox">
                                                            <span class="checked-customer dark mr-2 br-4">
                                                                <svg class="svg-sprite-icon c-none mx-auto" width="12px"
                                                                    height="18px">
                                                                    <use
                                                                        xlink:href="../../img/sprite/symbol/sprite.svg#check">
                                                                    </use>
                                                                </svg>
                                                            </span>
                                                        </label>
                                                        <div>
                                                            <p class="pl-1"> QTS White Peat 0-10mm, 250 liter</p>
                                                            <div class="select h-auto b-0 max-204 mt-2"
                                                                id="product_all_loadings_11574" inited="1">
                                                                <input type="hidden" name="add_product_loading[]"
                                                                    onchange="addProductLoading(this, 11574)" value="">
                                                                <div class="select__item fs-14 lh-1 px-0 text-italic c-gray-69 underline"
                                                                    data-label="+ Assign to order">+ Assign to order
                                                                </div>
                                                                <div class="select__drop" style="display: none;">
                                                                    <ul class="select__menu">
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="col-7">
                                                    <div class="row">
                                                        <div class="col-3">0 x</div>
                                                        <div class="col-3">6.5m3</div>
                                                        <div class="col-3">0.00 EUR</div>
                                                        <div class="col-3">2</div>
                                                    </div>
                                                </div>
                                                <div class="col-2 ">0</div>
                                            </div>
                                        </li>
                                        <li class="bb-1 py-3">
                                            <div class="row mx-0 block_resize-input">
                                                <div class="col-3">
                                                    <label>
                                                        <input type="checkbox" class="checkbox">
                                                        <span class="checked-customer dark mr-2 br-4">
                                                            <svg class="svg-sprite-icon c-none mx-auto" width="12px"
                                                                height="18px">
                                                                <use
                                                                    xlink:href="../../img/sprite/symbol/sprite.svg#check">
                                                                </use>
                                                            </svg>
                                                        </span>
                                                    </label>
                                                    <div class="table__span" style="display: none;"></div>
                                                    <input type="text" class="input-normal mr-2" value=""
                                                        placeholder=". . . . .">
                                                </div>
                                                <div class="col-7">
                                                    <div class="row">
                                                        <div class="col-3 lh-1_8">0 x</div>
                                                        <div class="col-3">
                                                            <div class="select bg-white br-4 b-0 h-fit w-100px">
                                                                <input type="hidden" name="product[packaging]"
                                                                    onchange="saveOrderProductValue(this, 11577, 'packaging')"
                                                                    value="0" placeholder="...." />
                                                                <div class="select__item px-0 lh-1">
                                                                    <div class="c-blue-gray"> . . . . .</div>
                                                                </div>
                                                                <div class="select__drop">
                                                                    <ul class="select__menu p-2">
                                                                        <li class="select__option p-1 mb-1"
                                                                            data-value="24">6.5m3</li>
                                                                        <li class="select__option p-1 mb-1"
                                                                            data-value="3">6.0m3</li>
                                                                        <li class="select__option p-1 mb-1"
                                                                            data-value="21">5.8m3</li>
                                                                        <li class="select__option p-1 mb-1"
                                                                            data-value="19">5.0m3</li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-3 items-center">
                                                            <div class="table__span" style="display: none;"></div>
                                                            <input type="text" class="input-normal mr-2" value=""
                                                                placeholder=". . . . .">
                                                            <div class="select h-auto b-0 w-fit-content arrow-r-8"
                                                                inited="1">
                                                                <input type="hidden"
                                                                    onchange="saveOrderProductValue(this, 11574, 'currency')"
                                                                    name="product[currency]" value="1">
                                                                <div class="select__item lh-1 pl-1 c-dark">EUR</div>
                                                                <div class="select__drop">
                                                                    <ul class="select__menu">
                                                                        <li class="select__option active"
                                                                            data-value="1">EUR</li>
                                                                        <li class="select__option" data-value="2">USD
                                                                        </li>
                                                                        <li class="select__option" data-value="3">GBP
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-3 block_resize-input">
                                                            <div class="table__span" style="display: none;"></div>
                                                            <input type="text" class="input-normal mr-2" value=""
                                                                placeholder=". . . . .">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-2 block_resize-input">
                                                    <div class="table__span" style="display: none;"></div>
                                                    <input type="text" class="input-normal mr-2" value=""
                                                        placeholder=". . . . .">
                                                </div>
                                            </div>
                                        </li>
                                        <li class="bb-1 py-3">
                                            <div class="row mx-0">
                                                <div class="col-6 ">
                                                    <input type="text" placeholder="  . . . . . "
                                                        class="input-normal text-left c-dark ml-4 pl-2" />
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                <div class="contents__item" id="contents__item-4">
                                    <div class="row">
                                        <div class="col-md-4 col-12 max-400">
                                            <label class="flex-between-center mb-2 bb-1">
                                                <input name="documents[invoice]" checked="" readonly=""
                                                    data-disabled="1" id="invoice" type="checkbox" value="invoice"
                                                    class="checkbox">
                                                <span class="pr-2">Invoice</span>
                                                <span class="checked-customer dark ml-1 br-4">
                                                    <svg class="svg-sprite-icon c-none mx-auto" width="12px"
                                                        height="18px">
                                                        <use xlink:href="../../img/sprite/symbol/sprite.svg#check">
                                                        </use>
                                                    </svg>
                                                </span>
                                            </label>
                                            <label class="flex-between-center mb-2 bb-1">
                                                <input name="documents[packing]" id="packing" type="checkbox"
                                                    value="packing" class="checkbox">
                                                <span class="pr-2">Packing List</span>
                                                <span class="checked-customer dark ml-1 br-4">
                                                    <svg class="svg-sprite-icon c-none mx-auto" width="12px"
                                                        height="18px">
                                                        <use xlink:href="../../img/sprite/symbol/sprite.svg#check">
                                                        </use>
                                                    </svg>
                                                </span>
                                            </label>
                                        </div>
                                        <div class="col-md-4 col-12 max-400">
                                            <label class="flex-between-center mb-2 bb-1">
                                                <input name="documents[sd]" id="sd" type="checkbox" value="sd"
                                                    class="checkbox"> <span class="pr-2">Supplier Declaration</span>
                                                <span class="checked-customer dark ml-1 br-4">
                                                    <svg class="svg-sprite-icon c-none mx-auto" width="12px"
                                                        height="18px">
                                                        <use xlink:href="../../img/sprite/symbol/sprite.svg#check">
                                                        </use>
                                                    </svg>
                                                </span>
                                            </label>
                                        </div>
                                        <div class="col-md-4 col-12 max-400">
                                            <input type="text" class="bg-white br-4 b-gray-bd completed-hide mb-3"
                                                name="add_document"
                                                onkeyup="onEnter(event, function(){addOrderTabItem($('#order_tab_add_item'))})"
                                                id="add_document" placeholder="+ Add new document">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="br-4 mb-3 bg-white p-3">
                            <p class="c-gray-69 mb-1">Notes</p>
                            <textarea class="w-100 b-1 b-gray-bd lh-22 h-fit p-2 br-4" required="" rows="2"
                                oninput="autoResize(event.target)"></textarea>

                        </div>
                        <div class="flex-center mx-auto max-500">
                            <a href="javascript:void(0)" data-value="save" onclick="sendOrder(this)"
                                class="btn white w-45 mr-2">Save </a>
                            <a href="javascript:void(0)" data-value="next" type="button" onclick="sendOrder(this)"
                                class="btn w-45 ml-2">Save &amp; Next </a>
                        </div>
                    </div>
                    <div class="popup py-4"></div>
                </div>
                <div class="hide">
                    <textarea name="form_data" id="form_data"></textarea>
                    <div class="uploader" id="general_uploader" data-id="4397">
                        <input type="file" title="Click to add Files" id="general_uploader_file" multiple name="file"
                            class="hide">
                        <input type="hidden" value="" name="section">
                        <input type="hidden" value="" name="target">
                    </div>
                </div>
                <style>
                    .contents__item .input {
                        margin-bottom: 27px;
                    }

                    .shipper__head a {
                        color: #fff;
                    }

                    .notify-name {
                        margin-bottom: 15px;
                    }

                    #print_origin_cer textarea {
                        margin: 0;
                        font-family: inherit;
                        font-size: inherit;
                        line-height: inherit;
                        overflow: auto;
                        resize: none;
                        padding-left: 40px;
                        padding-top: 10px;

                        display: block;
                        width: 100%;
                        background-color: #fff;
                        border: none;
                        height: 100%;
                        font-size: 12px;
                        font-weight: bold;
                    }

                    .pdfobject-container {
                        height: 30rem;
                        border: 1px solid rgba(0, 0, 0, .1);
                    }
                </style>
                <script>

                    var product_codes = { "27030000": "27030000", "392390": "392390", "44011100": "44011100", "44039510": "44039510", "84368090": "84368090", "270300": "270300" };
                    var currencies = { "1": { "id": "1", "name": "Euro", "code": "EUR", "symbol": "&euro;", "default": "1", "rate": "1.0000", "currency_margin": "0.00", "b1_currency_id": "2", "curency_date": "2025-07-07" }, "2": { "id": "2", "name": "Dollar", "code": "USD", "symbol": "&dollar;", "default": "0", "rate": "0.8526", "currency_margin": "0.03", "b1_currency_id": "3", "curency_date": "2025-07-07" }, "3": { "id": "3", "name": "Great Britain Pound", "code": "GBP", "symbol": "&pound;", "default": "0", "rate": "1.1613", "currency_margin": "0.03", "b1_currency_id": "7", "curency_date": "2025-07-07" } };
                    var companies_types = { "16": { "id": "16", "name": "Transporter", "active": "1", "abbreviation": "TRK-DST", "info_enabled": "0", "parentid": null, "sorting": "0", "image": null, "full_abbreviation": "Trucker dest." }, "8": { "id": "8", "name": "Customer", "active": "1", "abbreviation": "CLNT", "info_enabled": "1", "parentid": null, "sorting": "1", "image": "customer.svg", "full_abbreviation": "Client" }, "5": { "id": "5", "name": "Agent", "active": "1", "abbreviation": "AGNT", "info_enabled": "1", "parentid": null, "sorting": "2", "image": "leader.svg", "full_abbreviation": "Agent" }, "9": { "id": "9", "name": "Carrier", "active": "1", "abbreviation": "TRK-DST", "info_enabled": "1", "parentid": "16", "sorting": "3", "image": "gray__delivery-truck-1.svg", "full_abbreviation": "Trucker dest." }, "10": { "id": "10", "name": "Forwarder", "active": "1", "abbreviation": "FORWDR", "info_enabled": "0", "parentid": "16", "sorting": "4", "image": "boat-gray.svg", "full_abbreviation": "Forwarder" }, "11": { "id": "11", "name": "Supplier", "active": "1", "abbreviation": "SPLIER", "info_enabled": "1", "parentid": null, "sorting": "5", "image": "factory.svg", "full_abbreviation": "Supplier" }, "6": { "id": "6", "name": "Customs Broker", "active": "1", "abbreviation": "CUST-BR", "info_enabled": "1", "parentid": null, "sorting": "6", "image": "leader_2.svg", "full_abbreviation": "Customs broker" }, "14": { "id": "14", "name": "Fumigation", "active": "1", "abbreviation": null, "info_enabled": "0", "parentid": "13", "sorting": "7", "image": null, "full_abbreviation": "" }, "15": { "id": "15", "name": "Certificates", "active": "1", "abbreviation": null, "info_enabled": "0", "parentid": "13", "sorting": "9", "image": null, "full_abbreviation": "" }, "1": { "id": "1", "name": "Booking party", "active": "1", "abbreviation": null, "info_enabled": "0", "parentid": null, "sorting": "10", "image": null, "full_abbreviation": "" }, "4": { "id": "4", "name": "Consignee", "active": "1", "abbreviation": "CNEE", "info_enabled": "1", "parentid": null, "sorting": "10", "image": "customer.svg", "full_abbreviation": "Consignee" }, "12": { "id": "12", "name": "Notify", "active": "1", "abbreviation": null, "info_enabled": "1", "parentid": null, "sorting": "10", "image": null, "full_abbreviation": "" }, "2": { "id": "2", "name": "Paying party", "active": "1", "abbreviation": null, "info_enabled": "0", "parentid": null, "sorting": "10", "image": null, "full_abbreviation": "" }, "13": { "id": "13", "name": "Service provider", "active": "1", "abbreviation": null, "info_enabled": "0", "parentid": null, "sorting": "10", "image": null, "full_abbreviation": "" }, "3": { "id": "3", "name": "Shipper", "active": "1", "abbreviation": "SIPER", "info_enabled": "0", "parentid": null, "sorting": "10", "image": "boat-gray.svg", "full_abbreviation": "Shipper" }, "7": { "id": "7", "name": "Shipping line", "active": "1", "abbreviation": "TRK-ORG", "info_enabled": "0", "parentid": null, "sorting": "10", "image": null, "full_abbreviation": "Trucker orig." } };
                    var providers_parties = { "SPLIER": "Supplier", "FORWDR": "Forwarder", "TRK-ORG": "Trucker orig.", "TRK-DST": "Trucker dest.", "SIPER": "Shipper", "CNEE": "Consignee", "CLNT": "Client", "AGNT": "Agent", "CUST-BR": "Customs broker" };
                    var currdate = '07.07.2025';
                    var id = 4397;

                    var transportinvoicerequest = null;
                    var productsinvoicerequest = null;


                    function setCompanyTaxLaw(country) {
                        if ($('#tax_law').length) {
                            switch (country) {
                                case 'lt':
                                    $('#tax_law').find('.select__option[data-value="1"]').trigger('click');
                                    $('#tax_law').addClass('disabled');
                                    break;
                                default:
                                    resetSelectDropdown($('#tax_law'));
                                    $('#tax_law').removeClass('disabled');
                                    break;
                            }
                        }
                    }

                    function showMergeSplitMessage(label, splitted, merged) {
                        var message = 'After order merge, the order loading number can\'t be changed';
                        if (splitted) {
                            var message = 'After order split, the order loading number can\'t be changed';
                        }
                        if ($(label).closest('.fields__item').find('.error-message').length) {
                            $(label).closest('.fields__item').find('.error-message').remove();
                        }
                        $(label).closest('.fields__item').addClass('error').append('<p class="error-message">' + message + '</p>');
                        setTimeout(function () {
                            $(label).closest('.fields__item').removeClass('error').find('.error-message');
                            $(label).closest('.fields__item').find('.error-message').remove();
                        }, 2000);
                        //        $(label).closest('.fields__item').addClass('error').find('.error-message').removeClass('hide');
                    }

                    function addBookingSI(button, booking) {
                        //        backToShippingPopup(button);
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/booking/loadshippingspopup/",
                            data: { 'id': booking, 'orderid': id },
                            success: function (html) {
                                $('.popup').html(html);
                                showPopup('#order_shippings');
                                initSelectDropdown('#order_shippings');
                            }
                        });
                    }

                    function addBookingVGM(button, booking) {
                        $(button).blur();
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/bookings/vgmpopup/",
                            data: { 'id': booking },
                            success: function (html) {
                                $('.popup').html(html);
                                showPopup('#order_vgm');
                            }
                        });
                    }
                    function checkPrecarriageCompleted() {
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/order/precarriage/completed/",
                            data: { 'id': id },
                            success: function (res) {
                                if (res.completed) {
                                    $('#complete_order_step_button').trigger('click');
                                    //                    markStepCompleted(this, 'trucks');
                                }
                            }
                        });
                    }
                    function checkDocumentsCompleted() {
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/order/documents/completed/",
                            data: { 'id': id },
                            success: function (res) {
                                if (res.completed) {
                                    $('#complete_order_step_button').trigger('click');
                                    //                    markStepCompleted(this, 'trucks');
                                }
                            }
                        });
                    }

                    function loadOrderContainersProducts(input) {
                        productsinvoicerequest = $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/getordercontainersproducts/",
                            data: { 'id': id, 'containers': $(input).val() },
                            beforeSend: function () {
                                if (productsinvoicerequest != null) {
                                    productsinvoicerequest.abort();
                                }
                            },
                            success: function (html) {
                                $('#invoice_products').html(html);
                            }
                        });
                    }

                    function renewTransportLabels(input, invoiceid) {


                        var editservices = [];
                        $.each($('.transport-order__item:checked'), function (ind, item) {
                            editservices.push($(item).val());
                        });

                        //        $('#containers_label').text(labels.join(','));
                        transportinvoicerequest = $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/editorderinvoiceservices/",
                            data: { 'id': id, 'invoiceid': invoiceid, 'editservices': editservices, 'containers': $(input).val() },
                            beforeSend: function () {
                                if (transportinvoicerequest != null) {
                                    transportinvoicerequest.abort();
                                }
                            },
                            success: function (html) {
                                $('#invoice_payments').html(html);
                                resetSelectDropdown($('#add_service'));
                                initSelectDropdown($('#invoice_payments'));
                                renewTransportLocation($('#invoice_route'));
                            }
                        });

                        //        var labels = [];
                        //        $.each($(input).closest('.select').find('li.active'), function(ind, item){
                        //            labels.push($(item).attr('data-label'));
                        //        });

                    }

                    function renewTransportLocation(input) {
                        var locations = JSON.parse($(input).attr('data-values'));
                        var values = $(input).val().split(',');
                        $('#transport_label').text('Freight: ' + locations[values[0]] + ' - ' + locations[values[1]]);
                    }

                    function checkInvoiceServiceAction(input) {
                        if ($('.transport-order__item:checked').length) {
                            $('#transpoert_service_delete').removeClass('hide');
                            $('#transpoert_service_edit').removeClass('hide');
                        } else {
                            $('#transpoert_service_delete').addClass('hide');
                            $('#transpoert_service_edit').addClass('hide');
                        }
                    }


                    function editTransportServices(button, invoiceid) {
                        $(button).blur();
                        $(button).attr('onclick', 'saveTransportServices(this, ' + invoiceid + ')');
                        $(button).html('<img src="' + baseUrl + '/img/acargo/check-white.svg" alt="save" class="check">');
                        var editservices = [];
                        $.each($('.transport-order__item:checked'), function (ind, item) {
                            editservices.push($(item).val());
                        });
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/editorderinvoiceservices/",
                            data: { 'id': id, 'invoiceid': invoiceid, 'editservices': editservices, 'containers': $('input[name="loadings"]').val() },
                            success: function (html) {
                                $('#invoice_payments').html(html);
                                resetSelectDropdown($('#add_service'));
                                initSelectDropdown($('#invoice_payments'));
                            }
                        });
                    }

                    function saveInvoiceServiceValue(input, invoiceid, serviceid, field) {
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/orderinvoiceservicesavevalue/",
                            data: { 'orderid': id, 'invoiceid': invoiceid, 'field': field, 'serviceid': serviceid, 'value': $(input).val() },
                            success: function (res) {
                            }
                        });
                    }

                    function saveTransportServices(button, invoiceid) {
                        $(button).blur();
                        $(button).attr('onclick', 'editTransportServices(this, ' + invoiceid + ')');
                        $(button).html('<img src="' + baseUrl + '/img/acargo/white__create-24-px.svg" alt="save" class="check">');
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/editorderinvoiceservices/",
                            data: { 'id': id, 'invoiceid': invoiceid, 'containers': $('input[name="loadings"]').val() },
                            success: function (html) {
                                $('#invoice_payments').html(html);
                                resetSelectDropdown($('#add_service'));
                                initSelectDropdown($('#invoice_payments'));
                            }
                        });

                    }

                    function removeTransportServices(button, invoiceid) {
                        $(button).blur();
                        var services = [];
                        $.each($('.transport-order__item:checked'), function (ind, item) {
                            if ($(item).attr('name') == "transport_service") {
                                $(item).prop('checked', false);
                            } else {
                                services.push($(item).val());
                                $(item).closest('li').remove();
                            }
                        });

                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/removeorderinvoiceservices/",
                            data: { 'id': id, 'invoiceid': invoiceid, 'services': services, 'containers': $('input[name="loadings"]').val() },
                            success: function (html) {
                                $('#transpoert_service_delete').addClass('hide');
                                $('#transpoert_service_edit').addClass('hide');
                                $('#invoice_payments').html(html);
                                resetSelectDropdown($('#add_service'));
                                initSelectDropdown($('#invoice_payments'));
                            }
                        });


                    }

                    function addInvoiceService(input, invoiceid) {

                        var service = $('#add_service').find('.select__item').val() ? $('#add_service').find('.select__item').val() : $('#add_service').find('li.active').text();
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/addorderinvoiceservice/",
                            data: { 'orderid': id, 'invoiceid': invoiceid, 'service': service },
                            success: function (res) {
                                $('#transpoert_service_edit').removeClass('hide');
                                $('#transpoert_service_delete').removeClass('hide');
                                $('#transpoert_service_edit').attr('onclick', 'saveTransportServices(this, ' + invoiceid + ')');
                                $('#transpoert_service_edit').html('<img src="' + baseUrl + '/img/acargo/check-white.svg" alt="save" class="check">');
                                var html = '<li class="row px-sm-2 py-sm-4 pb-3 mx-0 bb-1 order-service__item">\
    <div class="col-lg-6">\
        <p class="d-lg-none d-block mb-2 mt-3 c-blue-gray text-up"><span>product name</span></p>\
        <div class="d-flex">\
            <label class="mr-3">\
                <input type="checkbox" checked onclick="checkInvoiceServiceAction(this)" class="checkbox transport-order__item" name="service[id]['+ res.serviceid + ']" value="' + res.serviceid + '">\
                <span class="checkbox__icon-blue ml-0"></span>\
            </label>\
            <div>\
                <div class="block_resize-input product-edit__element w-100">\
                    <div class="table__span" style="display: none;"></div>\
                    <input style="min-width:200px;" onchange="saveInvoiceServiceValue(this, '+ invoiceid + ', ' + res.serviceid + ', \'name\')" type="text" name="service[name][' + res.serviceid + ']" value="' + service + '" placeholder=". . . . ." class="input-resize text-left w-min-35">\
                </div>\
             </div>\
        </div>\
    </div>\
    <div class="col-lg-6">\
        <div class="row">\
            <div class="col-md-5 col-6">\
                <div class="d-flex">\
                    <input type="text" name="service[price]['+ res.serviceid + ']" onchange="saveInvoiceServiceValue(this, ' + invoiceid + ', ' + res.serviceid + ', \'price\')" class="px-2" value="">\
                    <div class="select w-fit-content select-current br-4 ml--1 arrow-r-13">\
                        <input type="hidden" onchange="saveInvoiceServiceValue(this, '+ invoiceid + ', ' + res.serviceid + ', \'currency\')" value="1" name="service[currency][' + res.id + ']">\
                        <div class="select__item c-white pl-3 fs-14">EUR</div>\
                        <div class="select__drop">\
                            <ul class="select__menu">\
                                <li class="select__option active" data-value="1" >EUR</li><li class="select__option" data-value="2" >USD</li><li class="select__option" data-value="3" >GBP</li>\
                            </ul>\
                        </div>\
                    </div>\
                </div>\
            </div>\
            <div class="col-md-3 col-6">\
                <div class="block_resize-input pt-2 product-edit__element w-100">\
                    <div class="table__span" style="display: none;"></div>\
                    <input style="min-width:200px;" type="text" name="service[quantity]['+ res.serviceid + ']" onchange="saveInvoiceServiceValue(this, ' + invoiceid + ', ' + res.serviceid + ', \'quantity\')" value="" placeholder=". . . . ." class="input-resize text-left w-min-35">\
                </div>\
            </div>\
            <div class="col-md-4 col-6 service-item__subtotal"></div>\
        </div>\
    </div>\
</li>';
                                $(html).insertBefore($('.add-new__service'));
                                resetSelectDropdown($('#add_service'));
                                initSelectDropdown($('#invoice_payments'));
                            }
                        });

                    }

                    function showTransportPrice(input) {
                        if ($(input).prop('checked')) {
                            $('.products-transppot__item').removeClass('hide');
                        } else {
                            $('.products-transppot__item').addClass('hide');
                        }
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/addorderproducttransport/",
                            data: { 'id': id, 'price_calc': $(input).prop('checked') ? $(input).val() : 'included' },
                            success: function (res) {
                            }
                        });
                    }

                    function showEditButton(input) {
                        if ($(input).prop('checked')) {
                            $('#order_tab_edit_item').removeClass('hide');
                        } else {
                            $('#order_tab_edit_item').addClass('hide');
                        }
                    }

                    function toogleVechicleTypes(button) {
                        $(button).blur();
                        if ($(button).attr('data-status') == "closed") {
                            $('.vechicle-type__item').removeClass('hide');
                            $(button).addClass('active');
                            $(button).attr('data-status', 'open');
                            $(button).html('<span class="underline mr-2">Less option</span>\
            <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 16 9">\
                <path fill="none" fill-rule="evenodd" stroke="#156ce4" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M0 0L7 7 14 0" transform="translate(1 1)"/>\
            </svg>');
                        } else {
                            $('.vechicle-type__item').addClass('hide');
                            $(button).removeClass('active');
                            $(button).attr('data-status', 'closed');
                            $(button).html('<span class="underline mr-2">More option</span>\
            <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 16 9">\
                <path fill="none" fill-rule="evenodd" stroke="#156ce4" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M0 0L7 7 14 0" transform="translate(1 1)"/>\
            </svg>');
                        }
                    }

                    function editInvoiceProduct(button) {
                        $(button).closest('.product-item').find('input').removeAttr('readonly').css('border-bottom', '1px dashed grey');
                        $(button).attr('src', baseUrl + '/img/acargo/check.svg');
                        $(button).attr('onclick', 'saveInvoiceProduct(this)');
                    }
                    function saveInvoiceProduct(button) {
                        $(button).closest('.product-item').find('input').attr('readonly', 1).css('border-bottom', '');
                        $(button).attr('src', baseUrl + '/img/acargo/create-24-px.svg');
                        $(button).attr('onclick', 'editInvoiceProduct(this)');
                    }



                    function setDayTime(input, direction, target) {
                        if ($(target).length) {
                            switch (direction) {
                                case 'from':
                                    $(target).attr('data-from', $(input).val());
                                    break;
                                case 'to':
                                    $(target).attr('data-to', $(input).val());
                                    break;
                            }
                            $(target).val(($(target).attr('data-from') ? $(target).attr('data-from') : '') + ' - ' + ($(target).attr('data-to') ? $(target).attr('data-to') : ''));
                            $(target).trigger('change');
                        }
                    }


                    function get_origin_cert(button, file) {
                        $(button).blur();
                        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/getorigincert/",
                            data: { 'id': id, 'file': file },
                            success: function (html) {

                                $('.popup').html(html);
                                showPopup('#print_origin_cer');

                            }
                        });
                    }
                    function stopParentEvent(event) {
                        event.stopPropagation();
                        event.preventDefault();
                    }

                    function addNewOrderProduct(input, event) {
                        if (event.keyCode == 13) {
                            //            console.log($(input).val())
                            //            var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/addorderproduct/",
                                data: { 'id': id, 'name': $(input).val() },
                                success: function (res) {

                                    appendNewProduct(res);
                                }
                            });

                        }
                    }

                    function removeProductLoading(button, product, containernumber) {
                        $(button).blur();
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/removeorderproductloading/",
                            data: { 'id': id, 'productid': product, 'containernumber': containernumber },
                            success: function (res) {
                                $(button).closest('li').remove();
                                $('#product_all_loadings_' + product).find('.select__option[data-value="' + containernumber + '"]').removeClass('hide');
                                $('#product_loading_count_' + product).html($('#product_loadings_' + product).find('li.product-loading__item').length + ' x');
                            }
                        });

                    }


                    function showOrderProductContent(button) {
                        $(button).find(".table__arrow").toggleClass('active');
                        $(button).closest("li").find(".table__drop").slideToggle(300);
                    }

                    function saveOrderProductValue(input, product, field) {
                        var value = ($(input).prop('type') == "checkbox" && !$(input).prop('checked')) ? '' : $(input).val();
                        saveOrderProductValueRequest(value, product, field);
                    }
                    function saveOrderProductValueRequest(value, product, field) {
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/saveproductvalue/",
                            data: { 'id': id, 'productid': product, 'value': value, 'field': field },
                            success: function (res) {
                            }
                        });
                    }
                    function saveOrderTransportValue(element, field) {
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/saveordertransportvalue/",
                            data: { 'id': id, 'value': $(element).val(), 'field': field },
                            success: function (res) {
                            }
                        });
                    }

                    function saveOrderProductTemp(input, event, product) {
                        if (!$(input).parent().find('.switch-yn').hasClass('b-gray')) {
                            if ($(input).prop('checked')) {
                                $(input).closest('.product-temp__item').find('.product-temp__control').removeClass('hide');
                            } else {
                                $(input).closest('.product-temp__item').find('.product-temp__control').addClass('hide');
                                $(input).closest('.product-temp__item').find('.product-temp__control').find('input[name="product[tempval]"]').val('');
                                $(input).closest('.product-temp__item').find('.product-temp__control').find('input[name="product[tempval]"]').trigger('onkeyup');
                            }
                            saveOrderProductValueRequest($(input).prop('checked') ? 'yes' : 'no', product, 'tempcontrol');
                        } else {
                            event.preventDefault();
                        }

                    }
                    function saveOrderProductAdr(input, event, product) {
                        if (!$(input).parent().find('.switch-yn').hasClass('b-gray')) {
                            if ($(input).prop('checked')) {
                                $(input).closest('.product-adr__item').find('.product-imo__class').removeClass('hide');
                            } else {
                                $(input).closest('.product-adr__item').find('.product-imo__class').addClass('hide');
                                $(input).closest('.product-adr__item').find('.product-imo__class').find('input[name="product[imo]"]').val('');
                                $(input).closest('.product-adr__item').find('.product-imo__class').find('input[name="product[imo]"]').trigger('onkeyup');
                            }
                            saveOrderProductValueRequest($(input).prop('checked') ? 'yes' : 'no', product, 'adr');
                        } else {
                            event.preventDefault();
                        }
                    }
                    function saveOrderProductTempUnit(input, event, product) {
                        if (!$(input).parent().find('.switch-yn').hasClass('b-gray')) {
                            if ($(input).prop('checked')) {
                                $(input).closest('.product-temp__item').find('.product-temp__item-label').html('F');
                            } else {
                                $(input).closest('.product-temp__item').find('.product-temp__item-label').html('C');
                            }
                            saveOrderProductValueRequest($(input).prop('checked') ? 'f' : 'c', product, 'tempunit');
                        } else {
                            event.preventDefault();
                        }
                    }

                    function saveOrderProductLoadingQuantity(input, product, containernumber) {

                        var total_loading_quantity = 0;
                        var product_quantity = parseInt($('#product_total_quantity_' + product).val());
                        $.each($('#product_loadings_' + product).find('input[name="product[loading_quantity]"]'), function (index, item) {
                            if (parseInt($(item).val())) {
                                total_loading_quantity += parseInt($(item).val());
                            }
                        });
                        if (product_quantity < total_loading_quantity) {
                            $('#product_total_quantity_' + product).val(total_loading_quantity);
                        }

                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/saveproductloadingquantity/",
                            data: { 'id': id, 'productid': product, 'value': $(input).val(), 'containernumber': containernumber },
                            success: function (res) {
                            }
                        });

                    }
                    function saveOrderProductLoadingPallets(input, product, containernumber, field) {

                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/saveproductloadingpallets/",
                            data: { 'id': id, 'productid': product, 'field': field, 'value': $(input).val(), 'containernumber': containernumber },
                            success: function (res) {
                            }
                        });

                    }

                    function addProductLoading(input, product) {
                        if ($(input).val()) {
                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/addorderproductloading/",
                                data: { 'id': id, 'productid': product, 'containernumber': $(input).val() },
                                success: function (res) {
                                    var product_line = '';
                                    switch (res.ord_type) {
                                        case 'tr':
                                            product_line = '<div class="col-md-2 col-sm-4 col-6"></div>\
                    <div class="col-md-2 col-sm-4 col-6">\
                        <p class="fs-14"><span class="d-lg-none d-block mb-2 mt-3">QUANTITY</span></p>\
                        <div class="block_resize-input">\
                            <div class="table__span" style="display: none;"></div>\
                            <input type="text" onkeyup="saveOrderProductLoadingQuantity(this, '+ product + ', ' + res.containernumber + ')" name="product[loading_quantity]" placeholder=". . . . ." class="input-resize text-left w-min-35" value="">\
                        </div>\
                    </div>\
                    <div class="col-md-4 col-sm-4 col-6"></div>\
                    <div class="col-md-2 col-sm-4 col-6 pl-0"></div>';
                                            break;
                                        case 'or':
                                            product_line = '<div class="col-md-2 col-sm-4 col-6"></div>\
                    <div class="col-md-2 col-sm-4 col-6"></div>\
                    <div class="col-md-2 col-sm-4 col-6"></div>\
                    <div class="col-md-2 col-sm-4 col-6">\
                        <p class="fs-14"><span class="d-lg-none d-block mb-2 mt-3">QUANTITY</span></p>\
                        <div class="block_resize-input">\
                            <div class="table__span" style="display: none;"></div>\
                            <input type="text" onkeyup="saveOrderProductLoadingQuantity(this, '+ product + ', ' + res.containernumber + ')" name="product[loading_quantity]" placeholder=". . . . ." class="input-resize text-left w-min-35" value="">\
                        </div>\
                    </div>\
                    <div class="col-md-2 col-sm-4 col-6">\
                    <div class="d-flex align-items-center">\
                    <div class="block_resize-input">\
                        <div class="table__span" style="display: none;"></div>\
                        <input type="text" placeholder=". . . . ." class="input-resize text-left w-min-35" name="product[loading_palletsqty]" value="" onkeyup="saveOrderProductLoadingPallets(this, '+ product + ', ' + res.containernumber + ', \'palletsqty\')">\
                    </div>\
                    <div class="select h-auto b-0 w-fit-content  mb-0">\
                        <input type="hidden" name="product[loading_pltype]" onchange="saveOrderProductLoadingPallets(this, '+ product + ', ' + res.containernumber + ', \'pltype\')" value="">\
                        <div class="select__item lh-1 pl-1 c-dark"></div>\
                        <div class="select__drop right">\
                            <ul class="select__menu">\
                                <li data-value="st" class="select__option">Standard</li><li data-value="ht" class="select__option">HT</li><li data-value="eu" class="select__option">EURO</li>\
                            </ul>\
                        </div>\
                    </div>\
                </div>\
</div>';
                                            break;
                                    }
                                    var html = '<li class="row product-loading__item">\
            <div class="col-lg-4 pl-lg-5">\
                <p><span class="d-lg-none d-flex mb-2">ORDER NO:</span></p>\
                <div class="fs-14 c-blue-gray d-flex">'+ ($('#product_loadings_' + product).find('li.product-loading__item').length + 1) + '. ' + res.label + '\
                    <button type="button" class="close-small_2 ml-3" onclick="removeProductLoading(this, '+ product + ', ' + res.containernumber + ')">\
                        <img src="'+ baseUrl + '/img/acargo/gray__cancel.svg" alt="close">\
                    </button>\
                </div>\
            </div>\
            <div class="col-lg-8 col-12">\
                <div class="row justify-content-between">'+ product_line + '</div>\
            </div>\
        </li>';
                                    //                    var html = '<li class="fs-14 c-blue-gray mb-2 d-flex">'+($('#product_loadings_'+product).find('li').length+1)+'. '+res.label+'\
                                    //                        <button type="button" class="close-small_2 ml-3" onclick="removeProductLoading(this, '+product+', '+res.containernumber+')">\
                                    //                            <img src="'+baseUrl+'/img/acargo/gray__cancel.svg" alt="close">\
                                    //                        </button>\
                                    //                    </li>';

                                    $(html).insertBefore($(input).closest('li'));
                                    $('#product_all_loadings_' + product).find('.select__option[data-value="' + res.containernumber + '"]').addClass('hide');
                                    resetSelectDropdown($('#product_all_loadings_' + product));
                                    $('#product_loading_count_' + product).html($('#product_loadings_' + product).find('li.product-loading__item').length + ' x');
                                    initSelectDropdown($('#products_list'));
                                }
                            });
                        }
                    }

                    function appendNewProduct(html) {
                        $(html).insertBefore($('li.products-transppot__item'));
                        initSelectDropdown($('#products_list'));
                        $('#add_product_id').val('');
                        $('#add_product').val('');

                    }

                    function loadOrderProducts() {
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/orders/loadproducts/",
                            data: { 'id': id },
                            success: function (html) {
                                $('#products_list').html(html);
                                initSelectDropdown($('#products_list'));
                            }
                        });
                    }
                    function selectOrderProduct(input) {
                        //        console.log($(input).val())
                        if ($(input).val()) {
                            //            var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/saveorderproduct/",
                                data: { 'id': id, 'productid': $(input).val() },
                                success: function (res) {

                                    appendNewProduct(res);
                                }
                            });
                        }
                    }


                    function saveProduct(button) {
                        $(button).blur();
                        $('#add_product_errors').html('');
                        var valid = true;
                        var productquantity = parseInt($('#add_product_popup').find('input[name="product[quantity]"]').val());
                        var error_text;

                        if (!$('#add_product_popup').find('input[name="product[name]"]').val()) {
                            valid = false;
                            error_text = 'Product Name can not be empty';
                        }
                        if (!$('#add_product_popup').find('input[name="product[packaging]"]').val()) {
                            valid = false;
                            error_text = 'Product Packaging can not be empty';
                        }
                        if (!$('#add_product_popup').find('input[name="product[price]"]').val()) {
                            valid = false;
                            error_text = 'Product Price can not be empty';
                        }
                        if (!productquantity) {
                            valid = false;
                            error_text = 'Product Quantity can not be empty';
                        }

                        var totalproductloadedqty = 0;
                        $.each($('#add_product_popup').find('.product__qty'), function (prodind, proditem) {
                            totalproductloadedqty += parseInt($(proditem).val());
                        });
                        if (productquantity < totalproductloadedqty) {
                            valid = false;
                            error_text = 'Product Quantity does not match';
                        }
                        if (valid) {
                            var data = $('#add_product_popup').find('input').serialize();
                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/saveorderloadingnoproduct/",
                                data: data,
                                success: function (html) {
                                    $('#add_product_popup').find('a.close').trigger('click');
                                    $('#products_list').html(html);
                                }
                            });
                        } else {
                            showNotifyMessage('#add_product_errors', error_text, 'error');
                        }
                    }

                    function saveDocShares(input, docid) {
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/saveorderdocshares/",
                            data: { 'id': id, 'docid': docid, 'shares': $(input).val() },
                            success: function (res) {
                                if ($(input).closest('.order-doc__item').find('.document-shares').length) {
                                    $(input).closest('.order-doc__item').find('.document-shares').html('<span class="d-lg-none d-flex mb-2 mt-3">ASSIGNED:</span>' + $(input).val());
                                }
                            }
                        });
                    }

                    function saveBlShares(input) {
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/saveorderblhares/",
                            data: { 'id': id, 'shares': $(input).val() },
                            success: function (res) {
                                if ($(input).closest('.order-doc__item').find('.document-shares').length) {
                                    $(input).closest('.order-doc__item').find('.document-shares').html('<span class="d-lg-none d-flex mb-2 mt-3">ASSIGNED:</span>' + $(input).val());
                                }
                            }
                        });
                    }
                    function saveLoadingShares(input, containernumber) {
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/saveorderloadingshares/",
                            data: { 'id': id, 'containernumber': containernumber, 'shares': $(input).val() },
                            success: function (res) {

                            }
                        });
                    }

                    function addLandLoadingPlace(button) {
                        $(button).blur();
                        var index = parseInt($('.land-loading__item').last().attr('data-index')) + 1;
                        var html = '<div class="land-loading__item" data-index="' + index + '">\
        <div class="card__row d-flex w-100">\
            <div class="card__item w-50">Origin</div>\
            <div class="select card__select select-noarrow">\
                <input type="hidden" autocomplete="off" name="land_origin[]" id="land_origin_'+ index + '" value="">\
                <input class="select__item typeaheadcountry" type="text" autocomplete="off" name="land_origin_str[]" id="str_land_origin_'+ index + '" data-target="#land_origin_' + index + '" placeholder="Select country..." value="">\
            </div>\
        </div>\
        <div class="card__row d-flex w-100">\
            <div class="card__blue card__item w-50">Place of loading</div>\
            <div class="select card__select select-noarrow">\
                <input class="select__item" name="land_loading[]" placeholder="From..." value="">\
            </div>\
        </div>\
    </div>';
                        if ($('.land-loading__item').length < 3) {
                            $(html).insertBefore($(button));
                            addTypeAheadCountries($('#str_land_origin_' + index + ''));

                            var line = '<div class="card__way transport-orgin__' + index + '">\
    <img src="'+ baseUrl + '/img/acargo/delivery-truck-1.svg" alt="icon transport" class="card__way-img">\
    <div class="card__way-width d-flex align-items-center w-100">\
        <div class="card__way-point">\
            <p class="c-gray mt-2">Place of loading</p>\
        </div>\
        <div class="card__way-line"></div>\
    </div>\
</div>';
                            $('.transport-land__line').prepend(line);
                        }
                    }

                    function addLandDeliveryPlace(button) {
                        $(button).blur();
                        var index = parseInt($('.land-delivery__item').last().attr('data-index')) + 1;
                        var html = '<div class="land-delivery__item" data-index="' + index + '">\
        <div class="card__row d-flex w-100">\
            <div class="card__item w-50">Destination</div>\
            <div class="select card__select select-noarrow">\
                <input type="hidden" autocomplete="off" name="land_destination[]" id="land_destination_'+ index + '" value="">\
                <input class="select__item typeaheadcountry" type="text" autocomplete="off" name="land_destination_str[]" id="str_land_destination_'+ index + '" data-target="#land_destination_' + index + '" placeholder="Select country..." value="">\
            </div>\
        </div>\
        <div class="card__row d-flex w-100">\
            <div class="card__blue card__item w-50">Place of delivery</div>\
            <div class="select card__select select-noarrow">\
                <input class="select__item" name="land_delivery[]" placeholder="To..." value="">\
            </div>\
        </div>\
    </div>';
                        if ($('.land-delivery__item').length < 3) {
                            $(html).insertBefore($(button));
                            addTypeAheadCountries($('#str_land_destination_' + index + ''));
                            var line = '<div class="card__way transport-destination__' + index + '">\
                <img src="'+ baseUrl + '/img/acargo/delivery-truck-1.svg" alt="icon transport" class="card__way-img">\
                <div class="card__way-width d-flex align-items-center w-100">\
                    <div class="card__way-line"></div>\
                    <div class="card__way-point">\
                        <p class="c-gray mt-2">Place of delivery</p>\
                    </div>\
                </div>\
            </div>';
                            $('.transport-land__line').append(line);
                        }
                    }



                    function sendBooking(button) {
                        $(button).blur();
                        var data = $('#add_booking_2').serialize();
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/sendbooking/",
                            data: data,
                            success: function (res) {
                                //                $('#bookrates').find('.modal-content').html(res);
                                $('#booking_errors').html('');
                                if (res.errors.length) {
                                    $.each(res.errors, function (index, item) {
                                        showNotifyMessage('#booking_errors', item, 'error');
                                    });
                                } else {
                                    $('#bookingid').val(res.id);
                                    $('#order_form_content').find('form').append('<input type="hidden" name="bookingadd" value="1">');
                                    sendOrderBooking(button);
                                    $('#add_booking_2').find('.close').trigger('click');

                                    //                    location.reload();
                                }
                            }
                        });

                    }

                    function reverseParties(button) {
                        $(button).blur();
                        if (!$('input[name="sameshiping"]:checked').length) {
                            var shippingid = $('#shippingid').val();
                            var consigneeid = $('#consigneeid').val();
                            var shipping = $('#shipping').val();
                            var consignee = $('#consignee').val();

                            $('#shippingid').val(consigneeid);
                            $('#consigneeid').val(shippingid);
                            $('#shipping').val(consignee);
                            $('#consignee').val(shipping);
                        }

                    }

                    function setSameShipping(checkbox) {
                        if ($(checkbox).prop('checked')) {
                            $('#consignee').prop('disabled', true);
                        } else {
                            $('#consignee').prop('disabled', false);
                        }
                    }

                    function searchBookingRates() {
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/getbooking/",
                            data: {
                                'search': 1,
                                'id': id,
                                'q': $('#booking_rate_q').val(),
                                'providerid': $('#add_booking').find('input[name="providerid"]').val(),
                                'from_port': $('#booking_from_port').val(),
                                'from_country': $('#booking_from_country').val()
                            },
                            success: function (html) {
                                $('#booking_rates').html(html);
                            }
                        });
                    }

                    function makeNewBooking(button) {
                        $(button).blur();


                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/getbooking/",
                            data: { 'id': id },
                            success: function (html) {
                                $('.popup').html(html);
                                $.each($('#add_booking').find('.typeahead'), function (index, item) {
                                    addTypeAheadLocations(item);
                                });
                                $.each($('#add_booking').find('.typeaheadcountry'), function (index, item) {
                                    addTypeAheadCountries(item);
                                });
                                $.each($('#add_booking').find('.typeaheadcompany'), function (index, item) {
                                    addTypeAheadCompanies($(item), $(item).attr('data-type'));
                                });

                                showPopup('#add_booking');
                            }
                        });


                    }

                    function checkBooking(button) {
                        $(button).blur();
                        if ($('#booking_rates').find('input[name="rateid"]:checked').length) {
                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/nextbooking/",
                                data: { 'id': id, 'rateid': $('#booking_rates').find('input[name="rateid"]:checked').val() },
                                success: function (html) {
                                    $('.popup').html(html);
                                    $.each($('#add_booking_2').find('.typeaheadcompany'), function (index, item) {
                                        addTypeAheadCompanies($(item), $(item).attr('data-type'));
                                    });
                                    showPopup('#add_booking_2');

                                    if ($('#add_booking_2').find('input.datepicker-range').length) {
                                        initCustomDaterangepicker($('#add_booking_2').find('input.datepicker-range'), 'DD.MM.YYYY', function (start, end) {
                                            $('#add_booking_2').find('input.datepicker-range').val(start.format('DD.MM.YYYY') + ' - ' + end.format('DD.MM.YYYY'));
                                        });
                                    }

                                    if ($('#add_booking_2').find('input.fromdate').length) {
                                        initCustomDatepicker($('#add_booking_2').find('.fromdate[data-init="0"]'), "DD.MM.YYYY");
                                        //                        $('#add_booking_2').find('input.fromdate').datepicker({
                                        //                            format: "DD.MM.YYYY",
                                        //                            autoclose:true,
                                        //                            weekStart : 1
                                        //                        });
                                    }
                                }
                            });
                        } else {
                            showNotifyMessage('#booking_notifications', 'Rate can not be empty', 'error');
                        }
                    }

                    function checkCustomDocumentAdd(button) {
                        //        if ($(button).val()=="custom"){
                        //            $('#add_document').closest('.select').addClass('hide');
                        //            $('#add_custom_document').removeClass('hide');
                        //        }else{
                        //            $('#add_custom_document').addClass('hide');
                        //            $('#add_document').closest('.select').removeClass('hide');
                        //        }
                    }


                    function removeLoadingProducts(button, containernumber) {
                        $(button).blur();
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        if (containernumber) {
                            if ($('#loading_popup').find('input[name="loadingproduct[]"]:checked').length) {
                                var products = [];
                                $.each($('#loading_popup').find('input[name="loadingproduct[]"]:checked'), function (prodind, proditem) {
                                    if ($(proditem).val()) {
                                        products.push($(proditem).val());
                                    }
                                    $(proditem).closest('.loading-product__item').remove();
                                });

                                $.ajax({
                                    method: "POST",
                                    url: baseUrl + "/exports/ajax/removeorderloadingproducts/",
                                    data: { 'id': id, 'container': containernumber, 'products': products },
                                    success: function (res) {
                                        $('#remove_loading_products').addClass('hide');
                                    }
                                });
                            }
                        }

                    }

                    function checkLoadingRemoveProduct() {
                        if ($('#loading_popup').find('input[name="loadingproduct[]"]:checked').length) {
                            $('#remove_loading_products').removeClass('hide');
                        } else {
                            $('#remove_loading_products').addClass('hide');
                        }
                    }

                    function slideParties(button) {
                        $(button).blur();
                        if ($(button).attr('data-hidden') == "1") {
                            $(button).attr('data-hidden', "0");
                            $(button).text('Hide');
                        } else {
                            $(button).text('+ Add');
                            $(button).attr('data-hidden', "1");
                        }
                        $('#parties').find('.parties-item').slideToggle('slow', function () {

                            if ($('#parties').find('.parties-item').first()) {

                            }
                        });

                    }

                    function removeCustomLoading(button, container) {
                        $(button).blur();
                        $('#order_notifications').html('');
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/checkremovecont/",
                            data: { 'id': id, 'container': container },
                            success: function (res) {
                                if (res.success) {
                                    $(button).closest('li').remove();
                                    var quantity = parseInt($('#quantity').val()) > 1 ? parseInt($('#quantity').val()) - 1 : '';
                                    $('#quantity').val(quantity);
                                    checkCustomLoadings();
                                } else {
                                    if (res.loaded_err) {
                                        showNotifyMessage('#order_notifications', 'Order can\'t be deleted as it was already loaded', 'error');
                                    } else {
                                        showNotifyMessage('#order_notifications', 'To delete order, first must be canceled booked truck', 'error');
                                    }
                                    $('input.custom-order__no:checked').prop('checked', false);
                                }
                            }
                        });
                    }


                    function saveOrderCustomLoadings() {
                        $('#order_notifications').html('');
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/saveordercustomloading/",
                            data: { 'id': id, 'customordload': $('#customordload').prop('checked') ? 1 : 0 },
                            success: function (res) {
                                renewCustomLoadings($('#customordload'));
                            }
                        });
                    }

                    function checkCustomLoadings() {
                        if ($('#customordload').prop('checked')) {
                            //            $('#orderNumbrs').find('.remove').removeClass('hide');
                            //            $('#orderNumbrs').find('.orderno-edit').removeClass('hide');
                            $('#orderNumbrs').find('.custom-order__no').parent().removeClass('hide');
                            $('#order_tab_add_item').addClass('hide');
                            $('#add_custom_orderno_form').removeClass('hide');
                            $('#add_orderloadingno').removeClass('hide');
                        } else {
                            //            $('#orderNumbrs').find('.remove').addClass('hide');
                            //            $('#orderNumbrs').find('.orderno-edit').addClass('hide');

                            $('#orderNumbrs').find('.custom-order__no').parent().addClass('hide');
                            $('#orderNumbrs').find('.custom-order__no').parent().last().removeClass('hide');
                            $('#order_tab_add_item').removeClass('hide');
                            $('#order_tab_edit_item').addClass('hide');
                            $('#order_tab_save_item').addClass('hide');
                            $('#cargo_remove_button').addClass('hide');
                            $('#add_orderloadingno').addClass('hide');
                            $('input.custom-order__no:checked').prop('checked', false);
                            $.each($('input.custom-order__no'), function (ind, item) {
                                $(item).closest('li.table__body-item').find('.loading-edit__element').addClass('hide');
                                $(item).closest('li.table__body-item').find('.loading-view__element').removeClass('hide');
                            });

                            $('#add_custom_orderno_form').addClass('hide');
                        }
                    }

                    function addOneMoreDocument(button, section) {
                        $(button).blur();
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        //        var section = $('#add_document').val();
                        //        if (!section){
                        //            
                        //        }
                        if (section) {
                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/addorderdocument/",
                                data: { 'id': id, 'section': section, 'name': $('#add_custom_document').val() },
                                success: function (res) {

                                    var shares_html = '<a href="javascript:void(0)" class="notvisible link-share"><img src="' + baseUrl + '/img/acargo/share.svg" alt="print" class="share">\
                                        <div class="select__drop select-absolut">\
                                            <input type="hidden" name="docshares['+ res.documentid + ']" value="">\
                                            <ul class="select__menu">\
                                                <li class="select__option-check" data-value="TRK-DST">TRK-DST</li><li class="select__option-check" data-value="CLNT">CLNT</li><li class="select__option-check" data-value="AGNT">AGNT</li><li class="select__option-check" data-value="TRK-DST">TRK-DST</li><li class="select__option-check" data-value="FORWDR">FORWDR</li><li class="select__option-check" data-value="SPLIER">SPLIER</li><li class="select__option-check" data-value="CUST-BR">CUST-BR</li><li class="select__option-check" data-value="CNEE">CNEE</li><li class="select__option-check" data-value="SIPER">SIPER</li><li class="select__option-check" data-value="TRK-ORG">TRK-ORG</li>\
                                            </ul>\
                                        </div>\
                                    </a>';
                                    var html = '<li class="table__body-item order-doc__item" data-index="' + res.documentid + '">\
                            <div class="row align-items-center">\
                                <div class="col-lg-4">\
                                    <p><span class="d-lg-none d-flex mb-2">REQUIRED DOCUMENTS:</span>'+ res.name + '</p>\
                                </div>\
                                <div class="col-lg-2 col-md-4 col-6">\
                                    <p><span class="d-lg-none d-flex mb-2 mt-3">DATE:</span></p>\
                                </div>\
                                <div class="col-lg-2 col-md-4 col-6">\
                                    <p class="d-lg-none d-flex mb-2 mt-3"><span >DOCUMENT:</span></p>\
                                    <label onclick="uploadFile(\'document\','+ res.documentid + ')" class="document__add d-flex align-items-center">\
                                        <span class="loader__files-name">+ Add document</span>\
                                        <span class="close-document"></span>\
                                    </label>\
                                </div>\
                                <div class="col-lg-2 col-md-4 col-6"><p></p></div>\
                                <div class="col-lg-2 col-md-4 col-6">\
                                    <p><span class="d-lg-none d-flex mb-2 mt-3">ACTIONS:</span></p>\
                                    <div class="d-flex">'+ shares_html + '<a href="javascript:void(0)" class="notvisible"><img src="' + baseUrl + '/img/acargo/print.svg" alt="print" class="print"></a>\
                                        <a href="javascript:void(0)" onclick="removeDocument(this, '+ res.documentid + ')"> <img src="' + baseUrl + '/img/acargo/bin.svg" alt="garbage" class="garbage"></a>\
                                    </div>\
                                </div>\
                            </div>\
                        </li>';


                                    $('#add_custom_document').val('');
                                    //                    $('#add_document').closest('.select').find('.select__item').html('+ Add a new document');
                                    $('#add_custom_document').closest('.select').find('.select__option').removeClass('active');

                                    $('#other_documents').append(html);
                                    //                    checkCustomDocumentAdd($('#add_document'));
                                    initSelectDropdown('.order-doc__item[data-index="' + res.documentid + '"]');

                                }
                            });
                        }
                    }

                    function removeDocFile(button, docid) {
                        $(button).blur();
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        var html = '<label onclick="uploadFile(\'document\',' + docid + ')" class="document__add d-flex align-items-center">\
                            <span class="loader__files-name">+ Add document</span>\
                            <span class="close-document"></span>\
                        </label>';
                        $(button).closest('.order-doc__item').find('.share').parent().addClass('notvisible');
                        $(button).closest('.order-doc__item').find('.print').parent().addClass('notvisible');
                        $(button).parent().replaceWith(html);
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/removeorderdocfile/",
                            data: { 'id': id, 'docid': docid },
                            success: function (res) {
                            }
                        });
                    }

                    function removeDocument(button, doc_id) {
                        $(button).blur();
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        if (doc_id) {
                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/removeuploadeddocument/",
                                data: { 'docid': doc_id, 'id': id },
                                success: function (res) {
                                    $(button).closest('li.table__body-item').remove();
                                }
                            });
                        }
                    }

                    function nextShippingPopup(button) {
                        $(button).blur();
                        if (!$('#si_errors').length) {
                            $('<div id="si_errors"></div>').insertBefore($(button).parent());
                        }
                        var valid = true;
                        if ($('#cargo_choise_limited').prop('checked')) {
                            if (!$('#cargo_description_popup').val()) {
                                valid = false;
                                $('#cargo_description_popup').focus();
                                showNotifyMessage('#si_errors', 'Description required', 'error');
                            }
                            if (!$('#cargo_hscode_popup').val()) {
                                valid = false;
                                $('#cargo_hscode_popup').focus();
                                showNotifyMessage('#si_errors', 'HS code required', 'error');
                            }
                        }

                        if (valid) {
                            //            $('#order_shippings').find('.modal-title').text('Parties');
                            $('#order_shippings_step1').addClass('hide');
                            //            $('#order_shippings_step2').closest('.modal-dialog').addClass('modal-lg');
                            $('#order_shippings_step2').removeClass('hide');
                        }
                    }

                    function backToShippingPopup(button) {
                        $(button).blur();
                        //        $('#order_shippings_step1').find('h2').text('Cargo Details');
                        $('#order_shippings_step1').removeClass('hide');
                        //        $('#order_shippings_step2').closest('.modal-dialog').removeClass('modal-lg');
                        $('#order_shippings_step2').addClass('hide');
                    }

                    function getOrderShippingInstruction(button, id, section) {
                        switch (section) {
                            case 'vgm':
                                $(button).blur();
                                var html = '<div id="order_vgm" class="vgm-weight m-auto box-white d-flex justify-content-center align-items-center active">\
<form method="POST" action="https://test.cargo4s.com/orders/vgm/" target="_blank">\
    <input type="hidden" value="4397" name="id">\
    <input type="hidden" value="vgm" name="section">\
<div><div class="d-flex justify-content-end mb-3"><a href="#" class="close"><img src="../../img/gray__cancel.svg" alt="close"></a></div>\
    <h2 class="title-2 c-navy-blue weight-medium ">VGM WEIGHT</h2>\
    <div class="d-flex mt-4">\
        <label class="d-flex mr-3">\
            <input required="" id="vgm_choise_after" checked type="radio" name="vgm_choise" value="after" class="checkbox">\
            <span class="checkbox__icon-blue"></span>\
        </label>\
        <div>\
            <label for="vgm_choise_after" class="c-blue weight-medium mb-1">METHOD 1</label>\
            <p>Weighing container after it has been loaded</p>\
        </div>\
    </div>\
    <div class="d-flex mt-4">\
        <label class="d-flex mr-3">\
            <input required="" type="radio" id="vgm_choise_before" name="vgm_choise" value="before" class="checkbox">\
            <span class="checkbox__icon-blue"></span>\
        </label>\
        <div>\
            <label for="vgm_choise_before" class="c-blue weight-medium mb-1">METHOD 2</label>\
            <p>Weighing cargo and adding container tare weight</p>\
        </div>\
    </div>\
    <div class="mt-5 d-flex justify-content-center">\
        <button type="submit" class="btn-aquamarine btn-submit ">Submit </button>\
    </div>\
</div>\
</form>\
</div>';
                                $('.popup').html(html);
                                showPopup('#order_vgm');
                                break;
                            case 'shipping':
                                backToShippingPopup(button);
                                $.ajax({
                                    method: "POST",
                                    url: baseUrl + "/exports/ajax/loadshippingspopup/",
                                    data: { 'id': id },
                                    success: function (html) {

                                        $('.popup').html(html);
                                        showPopup('#order_shippings');

                                        //                        $('#order_shippings').modal('show');
                                        //                        $('#order_shippings').find('.modal-content').html(html);
                                        //                        initSelectPicker('#order_shippings');
                                        //                        $('#order_shippings').find('.modal-content').find('input[type="radio"]').styler();
                                    }
                                });


                                break;
                        }
                        return false;
                    }

                    function addOneMoreCurrier(button) {
                        $(button).blur();
                        var index = 1;

                        $.each($('.documents-currier__item'), function (ind, item) {
                            if (parseInt($(item).attr('data-index')) >= index) {
                                index = parseInt($(item).attr('data-index')) + 1;
                            }
                        });
                        //        
                        var docs_option_html = '';
                        $.each($('#documents_options select').find('option'), function (ind, item) {
                            var doc_key = documents[$(item).val()] ? documents[$(item).val()].short : $(item).text();
                            docs_option_html += '<li class="select__option-check" onclick="addOneMoreDocToCourrier(this, event, \'' + index + '\')" data-value="' + doc_key + '">\
                    '+ $(item).text() + ' - ' + doc_key + '</li>';
                        });

                        var html = '<div class="box-white pb-5 px-sm-4 documents-currier__item" data-index="' + index + '">\
<div class="box-white__top d-flex justify-content-between align-items-end py-3">\
    <h2 class="title">COURIER '+ (index + 1) + '</h2>\
    <div class="btns d-flex">\
        <a href="javascript:void(0)" onclick="saveOrderCourier(this, '+ (index + 1) + ')" class="btn-aquamarine d-flex justify-content-center align-items-center">\
            <img src="'+ baseUrl + '/img/acargo/check-white.svg" alt="save" title="save" class="check">\
        </a>\
        <a href="javascript:void(0)" onclick="deleteOrderCourier(this, false)" class="btn-aquamarine d-flex justify-content-center align-items-center">\
            <img src="'+ baseUrl + '/img/acargo/white-bin.svg" alt="garbage" class="garbage">\
        </a>\
    </div>\
</div>\
<div class="row">\
    <div class="col-xl-10 col-lg-9 col-sm-8">\
        <div class="row">\
            <div class="col-xl-3 col-lg-4 col-sm-6 mt-4">\
                <p class="text-14">Courier</p>\
                <input type="text" class="input" name="courrier[name]['+ index + ']" value="">\
            </div>\
            <div class="col-xl-3 col-lg-4 col-sm-6  mt-4">\
                <p class="text-14">Date</p>\
                <input type="text" data-init="0" class="input fromdate" name="courrier[date]['+ index + ']" value="" >\
            </div>\
            <div class="col-xl-3 col-lg-4 col-sm-6 mt-4">\
                <p class="text-14">Tracking No.</p>\
                <input type="text" class="input" name="courrier[track]['+ index + ']" value="">\
            </div>\
            <div class="col-xl-3 col-lg-4 col-sm-6 mt-4">\
                <p class="text-14">Company</p>\
                <input type="hidden" autocomplete="off" name="courrier[provider]['+ index + ']" id="cprovider_' + index + '" value="">\
                <input name="courrier[providerstr]['+ index + ']" autocomplete="off" id="cproviderstr_' + index + '" data-target="#cprovider_' + index + '" value="" type="text" class="typeaheadcompany input">\
            </div>\
        </div>\
    </div>\
    <div class="col-xl-2 col-lg-3 col-sm-4 mt-4">\
        <p class="text-14">Documents</p>\
        <div class="select">\
            <input type="hidden" name="courrier[docs]['+ index + ']" value="">\
            <div class="select__item">Not Selected</div>\
            <div class="select__drop">\
                <ul class="select__menu">'+ docs_option_html + '</ul>\
            </div>\
        </div>\
    </div>\
</div>\
</div>';
                        $('#order_documents_curriers').append(html);
                        initSelectDropdown('#order_documents_curriers');

                        addTypeAheadCompanies($('#cproviderstr_' + index), 0);
                        initCustomDatepicker($('#order_documents_curriers').find('.fromdate[data-init="0"]'), "DD.MM.YYYY");
                        //        $('#order_documents_curriers').find('.fromdate[data-init="0"]').datepicker({
                        //            format: "DD.MM.YYYY",
                        //            autoclose:true,
                        //            weekStart : 1
                        //        });
                    }





                    function saveLoading(button) {
                        $(button).blur();
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        var data = { 'id': id, 'data': $('#loading_popup').find('input').serialize() };
                        //        $.each($('#loading_popup').find('input'), function(ind, item){
                        //            data[$(item).attr('name')] = $(item).val();
                        //        });

                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/saveloading/",
                            data: data,
                            success: function (html) {
                                getOrderLoading($('#tab_loading'), false);
                                $('#loading_popup').find('a.close').trigger('click');
                            }
                        });
                    }

                    function addLoading(button, loadingid) {
                        $(button).blur();
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/getorderloading/",
                            data: { 'id': id, 'loadingid': loadingid },
                            success: function (html) {
                                $('.popup').html(html);
                                showPopup('#loading_popup');
                                initInputsResizable('#loading_popup');
                                initCustomDatepicker($('#loading_popup').find('input.fromdate'), "DD MMM YYYY");
                                if ($('#loading_popup').find('.typeaheadpacking').length) {
                                    $.each($('#loading_popup').find('.typeaheadpacking'), function (index, item) {
                                        addTypeAheadPacking($(item));
                                        $(item).on('focus', $(item).typeahead.bind($(item), 'lookup'));
                                    });
                                }
                                //                $('.fromdate').datepicker({
                                //                    format: "DD MMM YYYY",
                                //                    autoclose:true,
                                //                    weekStart : 1
                                //                });
                            }
                        });
                    }

                    //    function checkInvoiceFields(){
                    //        if (invoiceAddValidation(false)){
                    //            $('#save_loading_invoice').removeClass('btn-disabled');
                    //            $('#save_loading_invoice').addClass('btn-blue');
                    //        }else{
                    //            $('#save_loading_invoice').addClass('btn-disabled');
                    //            $('#save_loading_invoice').removeClass('btn-blue');
                    //        }
                    //        $('#loading_docs_notifications').html('');
                    //    }


                    function saveLoadingInvoice(button) {
                        $(button).blur();
                        if (invoiceAddValidation(true)) {
                            var data = $('#loading_doc_popup').find('input').serialize();
                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/saveorderloadingdocs/",
                                data: data,
                                success: function (html) {

                                    if ($('#tab_documents').find('a').hasClass('focus')) {
                                        reloadInvoices();
                                    }
                                    if ($('#tab_loading').find('a').hasClass('focus')) {
                                        getOrderLoading($('#tab_loading'), false);
                                    }
                                    $('#loading_doc_popup').find('a.close').trigger('click');
                                }
                            });
                        }
                    }
                    function saveInvoice(button) {
                        $(button).blur();
                        if (invoiceAddValidation(true)) {
                            var data = $('#loading_doc_popup').find('input').serialize();
                            lockActionButton(button, 'Sending...');

                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/saveorderinvoice/",
                                data: data,
                                success: function (res) {
                                    unlockActionButton(button, $(button).attr('data-label'));
                                    if (Object.keys(res.errors).length) {
                                        displayFormValidation('#loading_doc_popup', res.errors, '#loading_docs_notifications');
                                    } else {
                                        if (res.success) {
                                            if ($('#loading_doc_popup').find('input[name="loadings"]').length) {
                                                reloadInvoices();
                                            }
                                            $('#loading_doc_popup').find('a.close').trigger('click');
                                        }
                                    }
                                }
                            });
                        }
                    }
                    function removeInvoice(button, docid) {
                        $(button).blur();
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/removeorderinvoice/",
                            data: { 'id': id, 'docid': docid },
                            success: function (res) {
                                if (Object.keys(res.errors).length) {
                                    displayFormValidation('#order_notifications', res.errors, '#order_notifications');
                                } else {
                                    $(button).closest('li.table__body-item').remove();
                                    reloadInvoices();
                                }
                            }
                        });
                    }

                    function removeGeneratedInvoice(button, invoiceid) {
                        $(button).blur();
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/removeordergeneratedinvoice/",
                            data: { 'id': id, 'invoiceid': invoiceid },
                            success: function (res) {
                                if (Object.keys(res.errors).length) {
                                    displayFormValidation('#order_notifications', res.errors, '#order_notifications');
                                } else {
                                    $(button).closest('li.table__body-item').remove();
                                    reloadInvoices(button);
                                }
                            }
                        });
                    }
                    function reloadInvoices(button) {
                        $(button).blur();
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/reloadinvoices/",
                            data: { 'id': id },
                            success: function (html) {
                                $('#invoices_section').html(html);
                                initSelectDropdown('#invoices_section');
                                checkDocumentsCompleted();
                            }
                        });
                    }
                    function removeLoadingDoc(button, containernumber) {
                        $(button).blur();
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/removeorderloadinginvoice/",
                            data: { 'id': id, 'containernumber': containernumber },
                            success: function (res) {
                                $(button).closest('li.table__body-item').remove();
                                reloadInvoices(button);
                            }
                        });
                    }

                    function addLoadingDocuments(button, loadingid) {
                        $(button).blur();
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/getloadingdocpopup/",
                            data: { 'id': id, 'loadingid': loadingid },
                            success: function (html) {
                                $('.popup').html(html);
                                showPopup('#loading_doc_popup');
                                initCustomDatepicker($('#loading_doc_popup').find('input.fromdate'), "DD.MM.YYYY");
                                //                $('#loading_doc_popup').find('input.fromdate').datepicker({
                                //                    format: "DD.MM.YYYY",
                                //                    autoclose:true,
                                //                    weekStart : 1
                                //                });
                                initOrerDocumentsUploader('#invoice_drop_area');
                                initOrerDocumentsUploader('#packing_drop_area');
                                checkInvoiceFields();
                            }
                        });
                    }



                    function uploadInvoiceType(button, invoiceid) {
                        addInvoice(button, invoiceid, $('input[name="invoice_type"]:checked').val());
                    }

                    function addInvoice(button, invoiceid, type) {
                        $(button).blur();
                        if (!type) {
                            var html = '<div class="box-white p-3" id="upload_invoice_type_popup">\
		<div class="d-flex justify-content-end mb-3">\
		<a href="javascript:void(0)" class="close"><img src="'+ baseUrl + '/img/acargo/gray__cancel.svg" alt="close"></a></div>\
		<h2 class="title-2">Select Invoice Type</h2>\
		<div class="row justify-content-center align-items-center my-3 ">\
		<div class="col-md-5">\
		<div class="row">\
			<div class="col-sm-6 mb-4">\
				<div class="d-flex justify-content-center align-items-center mt-4 loading__file mt-3 p-0">\
					<label class="d-flex align-items-center ml-4 pb-3">\
						<input type="radio" checked="" name="invoice_type" value="products" class="checkbox">\
						<span class="checkbox__icon-blue ml-0 mr-3"></span><span class="c-dark text-italic">Products</span>\
					</label>\
				</div>\
			</div>\
			<div class="col-sm-6 mb-4">\
				<div class="d-flex justify-content-center align-items-center mt-4 loading__file mt-3 p-0">\
					<label class="d-flex align-items-center mr-lg-5 pr-3 pb-3">\
						<input type="radio" name="invoice_type" value="transport" class="checkbox">\
						<span class="checkbox__icon-blue ml-0 mr-3"></span><span class="c-dark text-italic">Transport Service</span>\
					</label>\
				</div>\
			</div>\
		</div>\
		</div>\
	</div><div class="d-flex justify-content-center">\
		<button type="button" onclick="uploadInvoiceType(this, '+ invoiceid + ')" class="btn-aquamarine big">Upload Invoice</button>\
	</div></div>';
                            $('.popup').html(html);
                            showPopup('#upload_invoice_type_popup');
                        } else {
                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/getinvoicepopup/",
                                data: { 'id': id, 'invoiceid': invoiceid, 'inv_type': type },
                                success: function (html) {
                                    $('.popup').html(html);
                                    showPopup('#loading_doc_popup');
                                    initCustomDatepicker($('#loading_doc_popup').find('input.fromdate'), "DD.MM.YYYY");
                                    //                    $('#loading_doc_popup').find('input.fromdate').datepicker({
                                    //                        format: "DD.MM.YYYY",
                                    //                        autoclose:true,
                                    //                        weekStart : 1
                                    //                    });
                                    initOrerDocumentsUploader('#invoice_drop_area');
                                    initOrerDocumentsUploader('#packing_drop_area');
                                    checkInvoiceFields();
                                }
                            });
                        }
                    }


                    function recountInvoiceProductsPrice(input) {
                        var defaultcurrency;
                        $.each(currencies, function (ind, currency) {
                            if (currency.id == $(input).val()) {
                                defaultcurrency = currency;
                            }
                        });
                        if (defaultcurrency.default == "1") {
                            $('#invoice_currency_rate').addClass('hide');
                        } else {
                            $('#invoice_currency_rate').removeClass('hide');
                        }

                        var salerate = (parseFloat(defaultcurrency.rate) + parseFloat(defaultcurrency.currency_margin)).toFixed(4);
                        var html = '<li class="d-md-flex justify-content-end">\
            <p class="fs-14 c-blue-gray text-md-right pt-3 w-100 max-400 ">Central bank rate 1 '+ defaultcurrency.code + ' = ' + defaultcurrency.rate + ' EUR</p>\
            <div class="d-flex max-400 w-100 justify-content-md-end pt-3 pl-md-2">\
                <input type="hidden" id="currencyrate" data-step="0.005" name="currencyrate" onchange="recountOrderInvoiceProducts(this)" value="'+ salerate + '">\
                <p class="fs-14 c-blue-gray text-md-right">Our rate 1 '+ defaultcurrency.code + ' = <span id="current_sale_rate">' + salerate + '</span> EUR\
                <div class="d-flex pl-1 ">\
                    <button type="button" class="btm-small-minus ml-2 currency-minus" onclick="setCurrencyRate(this);"></button>\
                    <button type="button" class="btm-small-plus ml-2 currency-plus" onclick="setCurrencyRate(this);"></button>\
                </div>\
            </div>\
        </li>';
                        $('#invoice_currency_rate').html(html);
                        recountOrderInvoiceProducts($('#currencyrate'));
                    }

                    function setOrderInvoiceCurrency(input, invoiceid) {
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/saveorderinvoicecurrency/",
                            data: { 'id': id, 'invoiceid': invoiceid, 'currency': $(input).val() },
                            success: function (res) {

                            }
                        });
                    }

                    function recountOrderInvoiceProducts(input) {

                        var defaultcurrency, totalprice = 0.00;
                        $.each(currencies, function (ind, currency) {
                            if (currency.id == $('#invoice_currency').val()) {
                                defaultcurrency = currency;
                            }
                        });
                        var defaultrate = defaultcurrency.default == "1" ? defaultcurrency.rate : $('#currencyrate').val();
                        $.each($('.product-price__item'), function (ind, item) {
                            var productprice = parseFloat($(item).attr('data-price'));
                            if (defaultcurrency.id != $(item).attr('data-currency')) {
                                productprice = Math.floor((parseFloat($(item).attr('data-price')) * parseFloat($(item).attr('data-rate'))) / parseFloat(defaultrate));
                            }

                            $(item).html('<span class="d-lg-none d-block mb-2 mt-3 c-blue-gray text-up" >price</span>' + productprice.toFixed(2) + ' ' + defaultcurrency.code);
                        });
                        $.each($('.product-price__subtotal'), function (ind, item) {
                            var subtotalprice = parseFloat($(item).attr('data-price'));
                            if (defaultcurrency.id != $(item).attr('data-currency')) {
                                subtotalprice = Math.floor((parseFloat($(item).attr('data-price')) * parseFloat($(item).attr('data-rate'))) / parseFloat(defaultrate));
                            }
                            $(item).html('<span class="d-lg-none d-block mb-2 mt-3 c-blue-gray text-up">subtotal</span>' + subtotalprice.toFixed(2) + ' ' + defaultcurrency.code);
                            totalprice = subtotalprice + totalprice;
                        });

                        $('#totalproductsprice').val(totalprice.toFixed(2));
                        $('#totalproductspricelabel').html(totalprice.toFixed(2) + ' ' + defaultcurrency.code);
                    }

                    function setCurrencyRate(button) {
                        $(button).blur();
                        var rate = parseFloat($('#currencyrate').val());
                        var step = parseFloat($('#currencyrate').attr('data-step'));
                        //        console.log('RATE: '+ rate);
                        //        console.log('STEP: '+ step);
                        if ($(button).hasClass('currency-minus')) {
                            if (rate - step > 0) {
                                rate = rate - step;
                            } else {
                                rate = 0;
                            }
                        } else {
                            rate = rate + step;
                        }
                        rate = Number((rate).toFixed(4));
                        //        console.log('RESULT: '+ rate);
                        $('#currencyrate').val(rate);
                        $('#current_sale_rate').html(rate);
                        $('#currencyrate').trigger('change');
                    }

                    function saveInvoiceShares(input, invoiceid) {
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/saveorderinvoiceshares/",
                            data: { 'id': id, 'invoiceid': invoiceid, 'shares': $(input).val() },
                            success: function (res) {
                                if ($(input).closest('.order-doc__item').find('.document-shares').length) {
                                    $(input).closest('.order-doc__item').find('.document-shares').html('<span class="d-lg-none d-flex mb-2 mt-3">ASSIGNED:</span>' + $(input).val());
                                }
                            }
                        });
                    }

                    function confirmOrderInvoice(button) {
                        $(button).blur();
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        var data = $('#generate_invoice_popup').find('input, textarea').serialize();
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/confirmorderinvoice/",
                            data: { 'id': id, 'data': data, 'invoiceid': $('#invoiceid').val() },
                            success: function (res) {

                                if (res.errors.length) {
                                    $('#order_invoice_info').removeClass('hide');
                                    $('#order_invoice_preview').addClass('hide');
                                    $.each(res.errors, function (index, item) {
                                        showNotifyMessage('#order_invoice_errors', item, 'error');
                                    });
                                } else {
                                    reloadInvoices();
                                    closePopup('#generate_invoice_popup');
                                    window.open($(button).attr('data-url'), '_blank').focus();
                                    if ($(button).attr('data-packing')) {
                                        window.open($(button).attr('data-packing'), '_blank').focus();
                                    }
                                }
                            }
                        });
                    }

                    function generateOrderInvoice(button) {
                        $(button).blur();
                        var data = $('#generate_invoice_popup').find('input, textarea').serialize();
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/generateorderinvoice/",
                            data: { 'id': id, 'data': data },
                            success: function (res) {
                                if (res.errors.length) {
                                    $.each(res.errors, function (index, item) {
                                        showNotifyMessage('#order_invoice_errors', item, 'error');
                                    });
                                } else {

                                    $('#invoiceid').val(res.invoiceid);
                                    $('#confirm_invoice').attr('data-url', res.url);
                                    if (res.packingurl) {
                                        $('#confirm_invoice').attr('data-packing', res.packingurl);
                                    }
                                    PDFObject.embed(res.url + '?preview=1', "#invoice_pdf");
                                    $('#order_invoice_info').addClass('hide');
                                    $('#order_invoice_preview').removeClass('hide');
                                }
                            }
                        });

                    }


                    function BackToGenerateOrderInvoice(button) {
                        $(button).blur();
                        $('#order_invoice_info').removeClass('hide')
                        $('#order_invoice_preview').addClass('hide')
                    }

                    function generateInvoiceType(button, invoiceid) {
                        $(button).blur();
                        generateInvoice(button, invoiceid, $('input[name="invoice_type"]:checked').val());
                    }

                    function generateInvoice(button, invoiceid, type) {
                        $(button).blur();
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        if (!type) {
                            var html = '<div class="box-white p-3" id="generate_invoice_type_popup">\
            <div class="d-flex justify-content-end mb-3">\
            <a href="javascript:void(0)" class="close"><img src="'+ baseUrl + '/img/acargo/gray__cancel.svg" alt="close"></a></div>\
            <h2 class="title-2">Select Invoice Type</h2>\
            <div class="row justify-content-center align-items-center my-3 ">\
            <div class="col-md-5">\
            <div class="row">\
                <div class="col-sm-6 mb-4">\
                    <div class="d-flex justify-content-center align-items-center mt-4 loading__file mt-3 p-0">\
                        <label class="d-flex align-items-center ml-4 pb-3">\
                            <input type="radio" checked="" name="invoice_type" value="products" class="checkbox">\
                            <span class="checkbox__icon-blue ml-0 mr-3"></span><span class="c-dark text-italic">Products</span>\
                        </label>\
                    </div>\
                </div>\
                <div class="col-sm-6 mb-4">\
                    <div class="d-flex justify-content-center align-items-center mt-4 loading__file mt-3 p-0">\
                        <label class="d-flex align-items-center mr-lg-5 pr-3 pb-3">\
                            <input type="radio" name="invoice_type" value="transport" class="checkbox">\
                            <span class="checkbox__icon-blue ml-0 mr-3"></span><span class="c-dark text-italic">Transport Service</span>\
                        </label>\
                    </div>\
                </div>\
            </div>\
            </div>\
        </div><div class="d-flex justify-content-center">\
            <button type="button" onclick="generateInvoiceType(this, '+ invoiceid + ')" class="btn-aquamarine big">Generate Invoice</button>\
        </div></div>';
                            $('.popup').html(html);
                            showPopup('#generate_invoice_type_popup');
                        } else {
                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/getinvoicegenpopup/",
                                data: { 'id': id, 'invoiceid': invoiceid, 'inv_type': type },
                                success: function (html) {
                                    $('.popup').html(html);
                                    showPopup('#generate_invoice_popup');
                                    initCustomDatepicker($('#generate_invoice_popup').find('input.fromdate'), "DD.MM.YYYY");
                                    //                    $('#generate_invoice_popup').find('input.fromdate').datepicker({
                                    //                        format: "DD.MM.YYYY",
                                    //                        autoclose:true,
                                    //                        weekStart : 1
                                    //                    });
                                    if ($('#generate_invoice_popup').find('.typeaheadaddress').length) {
                                        $.each($('#generate_invoice_popup').find('.typeaheadaddress'), function (index, item) {
                                            addTypeAheadAddress(item);
                                        });
                                    }
                                    if ($('#generate_invoice_popup').find('.typeaheadcountry').length) {
                                        $.each($('#generate_invoice_popup').find('.typeaheadcountry'), function (index, item) {
                                            addTypeAheadCountries(item);
                                        });
                                    }
                                    $("input.range-way6").bootstrapSlider({
                                        look_to_sticks: true
                                    });
                                    initInputsResizable('#generate_invoice_popup');
                                }
                            });
                        }
                    }

                    function uploadFile(section, target) {
                        $('#general_uploader_file').trigger('click');
                        $('#general_uploader').find('input[name="section"]').val(section);
                        $('#general_uploader').find('input[name="target"]').val(target);
                    }

                    function printCRM(button, id, container) {
                        $(button).blur();
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/getcmr/",
                            data: { 'id': id, 'container': container },
                            success: function (html) {
                                $('.popup').html(html);
                                showPopup('#cmr_popup');
                            }
                        });

                    }

                    function hideContainerDates(button) {
                        $(button).blur();
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/geteditnottruckedcontainers/",
                            data: { 'id': id },
                            success: function (html) {
                                $('#not_trucked').html(html);
                                reinitNotTruckedContainers();
                            }
                        });
                        $(button).attr('onclick', 'editContainerDates(this)');
                        $(button).html('<img src="' + baseUrl + '/img/acargo/white__create-24-px.svg" alt="save" class="edit">');
                    }
                    function editContainerDates(button) {
                        $(button).blur();
                        $('.trucks-assign__details').addClass('hide');
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/geteditnottruckedcontainers/",
                            data: { 'id': id, 'edit': 1 },
                            success: function (html) {
                                $('#not_trucked').html(html);
                                reinitNotTruckedContainers();
                            }
                        });
                        $(button).attr('onclick', 'hideContainerDates(this)');
                        $(button).html('<img src="' + baseUrl + '/img/acargo/check-white.svg" alt="save" class="check">');

                    }

                    function reinitNotTruckedContainers() {
                        if ($('#not_trucked').find('input.fromdate').length) {
                            initCustomDatepicker($('#not_trucked').find('input.fromdate'), "DD MMM YYYY");
                            //                $('#not_trucked').find('input.fromdate').datepicker({
                            //                    format: "DD MMM YYYY",
                            //                    autoclose:true,
                            //                    weekStart : 1
                            //                });
                        }

                        if ($('#not_trucked').find('.datepicker-range').length) {
                            $.each($('#not_trucked').find('.datepicker-range'), function (index, item) {
                                initCustomDaterangepicker($('#' + $(item).attr('id')), 'DD MMM', function (start, end) {
                                    $(item).val(start.format('DD MMM') + ' - ' + end.format('DD MMM'));
                                    if ($(item).attr('data-source').length) {
                                        $($(item).attr('data-source')).val(start.format('YYYY-MM-DD') + ' ' + end.format('YYYY-MM-DD'));
                                        $($(item).attr('data-source')).trigger('change');
                                    }
                                });
                            });
                        }

                        initSelectDropdown('#not_trucked');
                    }


                    function saveContainerValue(input, containernumber, date) {
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        //        console.log($(input).val())
                        if (!$(input).attr('processing')) {
                            $(input).attr('processing', 1);
                            if (date == 'date_r' || date == 'date_l' || date == 'delivery_date_range' || date == 'delivery_time_range' || date == 'date_d' || date == 'date_range' || date == 'time_range') {
                                if ($('#display_' + $(input).attr('id')).length) {
                                    $('#display_' + $(input).attr('id')).contents().filter(function () {
                                        return this.nodeType == 3
                                    }).each(function () {
                                        if (this.textContent.length) {
                                            this.textContent = $(input).val();
                                        }
                                    });
                                }
                            }
                            if (date == 'date_r') {
                                var readytimestamp = moment($(input).val()).format("X");
                                $('#not_trucked').find('input[name="containers[]"][value="' + containernumber + '"]').attr('data-ready', readytimestamp);
                                $('#not_trucked').find('input[name="containers[]"][value="' + containernumber + '"]').attr('data-ready-display', $(input).val());
                            }
                            setTimeout(function () {
                                $.ajax({
                                    method: "POST",
                                    url: baseUrl + "/exports/ajax/saveordertruckvalue/",
                                    data: { 'id': id, 'containernumber': containernumber, 'field': date, 'value': $(input).val() },
                                    success: function (html) {
                                        $(input).removeAttr('processing');
                                    }
                                });
                            }, 100);
                        }
                    }
                    function deleteTruckContainer(button, truckid, container) {
                        $(button).blur();
                        if (confirm('Do you really want to remove truck container?')) {
                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/removeordertruckcontainer/",
                                data: { 'id': id, 'truckid': truckid, 'container': container },
                                success: function (res) {
                                    if ($('.truck-item_' + truckid).find('.pre-carriage__card-row').length < 2) {
                                        $('.truck-item_' + truckid).remove();
                                        $('#tab_trucks').find('a').trigger('click');
                                    } else {
                                        $(button).closest('.pre-carriage__card-row').remove();
                                    }
                                }
                            });
                        }
                    }
                    function deleteTruck(button, truckid) {
                        $(button).blur();
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        if (truckid) {
                            var orderids = [];
                            $.each($('.truck-item_' + truckid).find('input[name="truckcontainer[]"]:checked'), function (ind, item) {
                                orderids.push($(item).val());
                            });
                            if (!orderids.length) {
                                if (!confirm('Do you really want to remove truck?')) {
                                    return false;
                                }
                            }

                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/removeordertruck/",
                                data: { 'id': id, 'truckid': truckid, 'containers': orderids },
                                success: function (html) {
                                    if (orderids.length) {
                                        $.each($('.truck-item_' + truckid).find('input[name="truckcontainer[]"]:checked'), function (ind, item) {
                                            $(item).closest('.pre-carriage__card-row').remove();
                                        });
                                        if (!$('.truck-item_' + truckid).find('.pre-carriage__card-row').length) {
                                            $(button).closest('.truck-item_' + truckid).remove();
                                        }
                                    } else {
                                        $(button).closest('.truck-item_' + truckid).remove();
                                    }

                                    $('#not_trucked').html(html);
                                    if ($('#not_trucked').find('input.fromdate').length) {
                                        initCustomDatepicker($('#not_trucked').find('input.fromdate'), "DD.MM.YYYY");
                                        //                        $('#not_trucked').find('input.fromdate').datepicker({
                                        //                            format: "DD.MM.YYYY",
                                        //                            autoclose:true,
                                        //                            weekStart : 1
                                        //                        });
                                    }
                                }
                            });
                        }
                    }

                    function checkAllTrucks(input, container) {
                        if ($(container).length) {
                            if ($(input).prop('checked')) {
                                $(container).find('input[type="checkbox"]').prop('checked', true);
                            } else {
                                $(container).find('input[type="checkbox"]').prop('checked', false);
                            }
                            checkTrucks(input);
                        }
                    }
                    function checkTrucks(input) {
                        if ($('#not_trucked').length) {
                            if ($('#not_trucked').find('input[type="checkbox"]:checked').length) {
                                var lastreadyvalue = 0;
                                $.each($('#not_trucked').find('input[type="checkbox"]:checked'), function (ind, item) {
                                    if (parseInt($(item).attr('data-ready')) > lastreadyvalue) {
                                        lastreadyvalue = parseInt($(item).attr('data-ready'));
                                        $('#ready_date').val($(item).attr('data-ready-display'));
                                        $('#ready_date').trigger('change');
                                    }
                                });
                                $('#add_trucks').removeClass('disabled');
                                $('.trucks-assign__details').removeClass('hide');
                            } else {
                                $('#add_trucks').addClass('disabled');
                                $('.trucks-assign__details').addClass('hide');
                            }
                        }
                    }



                    function editTruck(button, truckid) {
                        $(button).blur();
                        $('.truck-item_' + truckid).find('input').prop('disabled', false);
                        $('.truck-item_' + truckid).find('.select').removeClass('disabled');

                        $('.truck-item_' + truckid).find('.container-action').removeClass('hide');
                        $('.truck-item_' + truckid).find('.container-title').addClass('hide');
                        $(button).attr('onclick', 'disableTruck(this, ' + truckid + ')');
                        $(button).html('<img src="' + baseUrl + '/img/acargo/check-white.svg" alt="check" class="check">');
                    }

                    function editTrucksTransporter(button, id) {
                        $(button).blur();
                        $(button).closest('.order-transporter').find('input').prop('disabled', false);
                        $(button).closest('.order-transporter').find('.select').removeClass('disabled');
                        $(button).attr('onclick', 'saveTrucksTransporter(this, ' + id + ')');
                        $(button).html('<img src="' + baseUrl + '/img/acargo/check-white.svg" alt="check" class="check">');
                    }

                    function disableTruck(button, truckid) {
                        $(button).blur();

                        //        $('.truck-item_'+truckid).find('.container-action').addClass('hide');
                        //        $('.truck-item_'+truckid).find('.container-title').removeClass('hide');

                        $('.truck-item_' + truckid).find('input[type="checkbox"]').prop('checked', false);
                        $('.truck-item_' + truckid).find('input').prop('disabled', true);
                        $('.truck-item_' + truckid).find('.select').addClass('disabled');
                        $(button).attr('onclick', 'editTruck(this, ' + truckid + ')');
                        $(button).html('<img src="' + baseUrl + '/img/acargo/white__create-24-px.svg" alt="edit" class="edit">');
                    }

                    function editTruckContainers(button, truckid) {
                        $(button).blur();
                        //        $('.truck-item_'+truckid).find('.container-action').removeClass('hide');
                        //        $('.truck-item_'+truckid).find('.container-title').addClass('hide');
                        $(button).attr('onclick', 'disableTruck(this, ' + truckid + ')');
                        $(button).html('<img src="' + baseUrl + '/img/acargo/check-white.svg" alt="check" class="check">');
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/getedittruckcontainers/",
                            data: {
                                'id': id,
                                'truckid': truckid
                            },
                            success: function (html) {
                                $('#truck_item_edit_' + truckid).html(html);
                                if ($('#truck_item_edit_' + truckid).find('input.fromdate').length) {
                                    initCustomDatepicker($('#truck_item_edit_' + truckid).find('input.fromdate'), "DD.MM.YYYY");
                                    //                    $('#truck_item_edit_'+truckid).find('input.fromdate').datepicker({
                                    //                        format: "DD.MM.YYYY",
                                    //                        autoclose:true,
                                    //                        weekStart : 1
                                    //                    });
                                }

                                if ($('#truck_item_edit_' + truckid).find('.datepicker-range').length) {
                                    $.each($('#truck_item_edit_' + truckid).find('.datepicker-range'), function (index, item) {
                                        initCustomDaterangepicker($('#' + $(item).attr('id')), 'DD MMM', function (start, end) {
                                            $(item).val(start.format('DD MMM') + ' - ' + end.format('DD MMM'));
                                            if ($(item).attr('data-source').length) {
                                                $($(item).attr('data-source')).val(start.format('YYYY-MM-DD') + ' ' + end.format('YYYY-MM-DD'));
                                                $($(item).attr('data-source')).trigger('change');
                                            }
                                        });
                                    });
                                }

                                initSelectDropdown('#truck_item_edit_' + truckid);
                            }
                        });
                    }

                    function saveTrucksTransporter(button, id) {
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/saveordertransporter/",
                            data: {
                                'id': id,
                                'transporter': $('#booking_transporter').val(),
                                'vehicle_type': $('#booking_transpor_vehicle_type').val(),
                                'transporter_name': $('#booking_transporter_str').val(),
                                'destinationbookingid': $('#destinationbookingid').val(),
                                'transport_price': $('#booking_transport_price').val(),
                                'transport_currency': $('#booking_transport_currency').val(),
                            },
                            success: function (res) {
                                if (!$('#booking_transporter').val()) {
                                    $('#booking_transporter').val(res.transporter);
                                }
                                $('#destinationbookingid').val(res.destinationbookingid);

                                if (!$('#booking_transpor_vehicle_type').val()) {
                                    setDropdownValue('#booking_transpor_vehicle_type', res.vehicle_type);
                                }
                                $('#booking_transporter_str').val(res.transporter_name);
                                $('#booking_transport_price').val(res.transport_price);
                                setDropdownValue('#booking_transport_currency', res.transport_currency);

                                $(button).closest('.order-transporter').find('input').prop('disabled', true);
                                $(button).closest('.order-transporter').find('.select').addClass('disabled');
                                $(button).attr('onclick', 'editTrucksTransporter(this, ' + id + ')');
                                $(button).html('<img src="' + baseUrl + '/img/acargo/white__create-24-px.svg" alt="edit" class="edit">');

                                checkPrecarriageCompleted();
                            }
                        });
                    }
                    function saveOrderCourier(button, index) {
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/saveordercourier/",
                            data: {
                                'id': id,
                                'data': $(button).closest('.documents-currier__item').find('input').serialize()
                            },
                            success: function (res) {
                                $(button).closest('.documents-currier__item').find('input').prop('disabled', true);
                                $(button).closest('.documents-currier__item').find('.select').addClass('disabled');
                                $(button).attr('onclick', 'editOrderCourier(this, ' + index + ')');
                                $(button).html('<img src="' + baseUrl + '/img/acargo/white__create-24-px.svg" alt="edit" class="edit">');
                            }
                        });
                    }
                    function deleteOrderCourier(button, corierid) {
                        $(button).blur();
                        if (corierid) {
                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/deleteordercourier/",
                                data: {
                                    'id': id,
                                    'corierid': corierid
                                },
                                success: function (res) { }
                            });
                        }
                        $(button).closest('.documents-currier__item').remove();
                    }
                    function editOrderCourier(button, index) {
                        $(button).blur();
                        $(button).closest('.documents-currier__item').find('input').prop('disabled', false);
                        $(button).closest('.documents-currier__item').find('.select').removeClass('disabled');
                        $(button).attr('onclick', 'saveOrderCourier(this, ' + index + ')');
                        $(button).html('<img src="' + baseUrl + '/img/acargo/check-white.svg" alt="edit" class="edit">');
                    }


                    function addTrucks(button) {
                        $(button).blur();
                        var data = $(button).closest('form').serialize();

                        lockActionButton(button);
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/addordertruck/",
                            data: data,
                            success: function (res) {
                                unlockActionButton(button, 'Order');
                                if (res.errors.length) {
                                    $.each(res.errors, function (index, item) {
                                        showNotifyMessage('#order_notifications', item, 'error');
                                    });
                                } else {

                                    $('#not_trucked').find('input[type="checkbox"]:checked').closest('li').remove();
                                    if (!$('#transporterid').prop('readonly')) {
                                        $('#transporterid').val('');
                                    }
                                    if (!$('#transporter').prop('readonly')) {
                                        $('#transporter').val('');
                                    }
                                    if (!$('#sendorder').length) {
                                        $('#sendorder').prop('checked', false)
                                    }
                                    if ($('input[name="vehicle_types[]"]').length && $('input[name="vehicle_types[]"]:checked').length) {
                                        $('input[name="vehicle_types[]"]').prop('checked', false)
                                    }
                                    $('#originbookingid').val('');
                                    if ($('#originbookingval').length) {
                                        $('#originbookingval').val('');
                                    }
                                    if ($('#loading_time').length) {
                                        $('#loading_time').val('');
                                        $('#loading_time_from').val('08:00');
                                        $('#loading_time_till').val('20:00');
                                    }
                                    if ($('#delivery_time').length) {
                                        $('#delivery_time').val('');
                                        $('#delivery_time_from').val('08:00');
                                        $('#delivery_time_till').val('20:00');
                                    }
                                    if ($('#loading_date_source').length) {
                                        $('#loading_date_source').val('');
                                        $('#loading_date').val('');
                                    }
                                    if ($('#delivery_date_source').length) {
                                        $('#delivery_date_source').val('');
                                        $('#delivery_date').val('');
                                    }
                                    if ($('#transporter_vehicle_type').length) {
                                        resetSelectDropdown($('#transporter_vehicle_type').closest('.select'));
                                    }
                                    if ($('#requirements_description').find('textarea[name="requirements"]').length) {
                                        resetSelectDropdown($('#truck_requirements'));
                                        $('#requirements_description').addClass('hide');
                                    }

                                    $('#transporter_price').val('');
                                    if ($('#transporter_cont').length) {
                                        $('#transporter_cont').val('');
                                    }
                                    if ($('#transporter_trailer').length) {
                                        $('#transporter_trailer').val('');
                                    }
                                    $('#assigned_containers').html(res.html);
                                    if ($('#assigned_containers').find('input.fromdate').length) {
                                        initCustomDatepicker($('#assigned_containers').find('input.fromdate'), "DD.MM.YYYY");
                                        //                        $('#assigned_containers').find('input.fromdate').datepicker({
                                        //                            format: "DD.MM.YYYY",
                                        //                            autoclose:true,
                                        //                            weekStart : 1
                                        //                        });
                                    }
                                    initSelectDropdown('#assigned_containers');
                                    checkTrucks(button);

                                    checkPrecarriageCompleted();
                                }
                            }
                        });


                    }

                    function renewCustomLoadings(button) {
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        if (!$('#customordload').prop('checked')) {
                            var quantity = $('#quantity').val() ? parseInt($('#quantity').val()) : 1;
                            var label = '';
                            switch ($('input[name="customorderno"]:checked').val()) {
                                case 'our':
                                    var label = $('#internalorderid').val();
                                    break;
                                case 'client':
                                    var label = $('#clientorderid').val();
                                    break;
                                case 'shipper':
                                    var label = $('#shipperorderid').val();
                                    break;
                            }
                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/saveorderloadingno/",
                                data: { 'id': id, 'quantity': quantity, 'label': label },
                                success: function (html) {
                                    $('#orderNumbrs').html(html);
                                    checkCustomLoadings();
                                }
                            });
                        }

                    }
                    function checkPartiesNotifyCount(button) {

                    }


                    function editOrderNo(button, containernumber, label) {
                        $(button).blur();
                        if ($('#customordload').prop('checked')) {
                            $(button).closest('.table__body-item').find('.edit-orderno').html('<input type="text" onblur="saveOrderNo(this, ' + containernumber + ')" value="' + label + '" name="editorderno" class="input">');
                            $(button).closest('.table__body-item').find('.orderno-edit').addClass('hide');
                        }
                    }

                    function saveOrderNo(input, containernumber) {

                        if ($(input).val()) {
                            //            var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/saveorderloadingnlabel/",
                                data: { 'id': id, 'label': $(input).val(), 'containernumber': containernumber },
                                success: function (res) {
                                    if (res.status == "success") {
                                        $(input).closest('.table__body-item').find('.orderno-edit').removeClass('hide');
                                        $(input).closest('.table__body-item').find('.orderno-edit').attr('onclick', 'editOrderNo(this, ' + containernumber + ', \'' + res.label + '\')');
                                        $(input).closest('.table__body-item').find('.edit-orderno').html('<p><span class="d-lg-none d-flex mb-2">ORDER NO:</span>' + res.label + '</p><img src="' + baseUrl + '/img/acargo/arrow-drop-down-24-px.svg" alt="arrow drop" class="table__arrow">');

                                    }
                                }
                            });
                        }

                    }


                    function addOrderLoadingNo(button, event) {
                        if (event.keyCode == 13) {
                            var label = $('#add_orderloadingno').val();
                            if (label) {
                                //                var id = $('#order_form_content').find('form').find('input[name="id"]').val();

                                $.ajax({
                                    method: "POST",
                                    url: baseUrl + "/exports/ajax/orderaddcustomloading/",
                                    data: { 'id': id, 'label': label },
                                    success: function (res) {
                                        if (res.error) {
                                            showNotifyMessage('#add_addorderno_errors', res.message, 'error');
                                        } else {
                                            var html = '<li class="table__body-item py-3 px-sm-4 px-3">\
                                <div class="row">\
                                    <div class="col-md-7 ">\
                                        <div class="d-flex">\
                                            <label class="d-flex mr-4 completed-hide">\
                                                <input type="checkbox" name="order_loading['+ res.containernumber + ']" value="' + res.containernumber + '" class="checkbox custom-order__no" onclick="checkCustomOrdersAction(this)">\
                                                <span class="checkbox__icon-blue ml-md-2 ml-0"></span>\
                                            </label>\
                                            <div class="table__item d-flex justify-content-between align-items-center w-100" onclick="showOrderProductContent(this)">\
                                                <p><span class="d-md-none d-flex mb-2">ORDER NO:</span>'+ label + '</p>\
                                                <img src="'+ baseUrl + '/img/acargo/arrow-drop-down-24-px.svg" alt="arrow drop" class="table__arrow mr-xl-5">\
                                            </div>\
                                        </div>\
                                    </div>\
                                    <div class="col-md-3 col-6 "><p><span class="d-md-none d-flex mb-2 mt-3">PRODUCTS:</span>0x</p></div>\
                                    <div class="col-md-2 col-6"><p><span class="d-md-none d-flex mb-2 mt-3 ">QUANTITY:</span>0</p></div>\
                                </div>\
                                <ul class="table__drop collapse"></ul>\
                            </li>';
                                            $(html).insertBefore($('#add_orderloadingno').closest('li'));
                                            $('#add_orderloadingno').val('');
                                            $('#quantity').val(res.quantity);
                                            checkCustomLoadings();
                                        }

                                    }
                                });

                            }
                        }
                    }

                    function removeLoadingProduct(button) {
                        $(button).blur();
                        $(button).closest('.table__body-item').remove();
                    }

                    function addToLoadingNewProduct(button) {
                        $(button).blur();
                        //        console.log($('#newproduct').val());
                        //        console.log($('#newproductname').val());
                        if ($('#newproduct').val() || $('#newproductname').val()) {

                            var name = $('#newproduct').val() ? $('#newproduct').closest('.select').find('li.active').text() : $('#newproductname').val();
                            var productid = $('#newproduct').val() ? $('#newproduct').val() : 0;
                            //            var ord_type = $('#newproduct').attr('ord_type');
                            var counter = parseInt($('#loading_products').find('li.loading-product__item').length) + 1;
                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/orderaddproducttoloading/",
                                data: { 'id': id, 'name': name, 'productid': productid, 'counter': counter },
                                success: function (html) {
                                    $(html).insertBefore($(button).closest('li'));
                                    initSelectDropdown('#loading_popup');
                                    resetSelectDropdown($('#addProductTOLoading'));
                                    initInputsResizable('#loading_popup');
                                    if ($('#loading_popup').find('.typeaheadpacking').length) {
                                        $.each($('#loading_popup').find('.typeaheadpacking'), function (index, item) {
                                            addTypeAheadPacking($(item));
                                            $(item).on('focus', $(item).typeahead.bind($(item), 'lookup'));
                                        });
                                    }


                                    //                    initInputsResizable('#loading_popup');
                                }
                            });
                        }
                    }
                    function addProductToLoading(button) {
                        $(button).blur();
                        var valid = true;
                        var error_text;
                        $('#add_product_errors').html('');
                        var unitsquantity = parseInt($(button).closest('.table__body-item').find('input[name="unitsquantity"]').val());
                        var palletsqty = $(button).closest('.table__body-item').find('input[name="pallets"]').val();
                        var loadingid = $(button).closest('.table__body-item').find('input[name="loadingid"]').val();
                        var onpallets = $('#add_product_popup').find('input[name="product[onpallets]"]').val();
                        var ht = $('#add_product_popup').find('input[name="product[pltype]"]').val() == "ht" ? ' HT' : '';
                        var productqty = parseInt($('#add_product_popup').find('input[name="product[quantity]"]').val());

                        if (!$('#add_product_popup').find('input[name="product[quantity]"]').val()) {
                            valid = false;
                            error_text = 'Product Quantity can not be empty';
                        }
                        if (!unitsquantity || !loadingid) {
                            valid = false;
                            error_text = 'Loading Number and Quantity can not be empty';
                        }
                        var totalproductloadedqty = unitsquantity;
                        $.each($('#add_product_popup').find('.product__qty'), function (prodind, proditem) {
                            totalproductloadedqty += parseInt($(proditem).val());
                        });
                        if (totalproductloadedqty > productqty) {
                            valid = false;
                            error_text = 'Product Quantity does not match';
                        }
                        if ($('#add_product_popup').find('input[name="loadingproduct[' + loadingid + '][id]"]').length) {
                            valid = false;
                            error_text = 'Already loaded with this product';
                        }
                        if (valid) {
                            var loading = $(button).closest('.table__body-item').find('.select__item').text();
                            var html = '<li class="table__body-item">\
        <div class="row justify-content-between">\
            <div class="col-lg-4 col-12">\
                <input type="hidden" name="loadingproduct['+ loadingid + '][id]" value="' + loadingid + '"><p><span class="d-lg-none d-flex mb-2">ORDER NO:</span>' + loading + '</p>\
            </div>\
            <div class="col-lg-2 col-6"><input type="hidden" name="loadingproduct['+ loadingid + '][palletsqty]" value="' + palletsqty + '"><p><span class="d-lg-none d-flex mb-2 mt-3">PALLETS:</span>' + palletsqty + ht + '</p></div>\
            <div class="col-lg-2 col-6"><p><span class="d-lg-none d-flex mb-2 mt-3">ON PALLET:</span>'+ onpallets + '</p></div>\
            <div class="col-lg-2 col-6"><input type="hidden" class="product__qty" name="loadingproduct['+ loadingid + '][quantity]" value="' + unitsquantity + '"><p><span class="d-lg-none d-flex mb-2 mt-3 ">QUANTITY:</span>' + unitsquantity + '</p></div>\
            <div class="col-lg-1 col-6">\
                <p><span class="d-lg-none d-flex mb-2 mt-3">ACTION:</span></p>\
                <div class="d-flex">\
                    <a href="javascript:void(0)"> <i class="fa fa-print"></i></a>\
                    <a href="javascript:void(0)" onclick="removeLoadingProduct(this)"> <img src="../../img/bin.svg" alt="garbage" class="garbage"></a>\
                </div>\
            </div>\
        </div>\
    </li>';

                            $(html).insertBefore($(button).closest('.table__body-item'));
                            $(button).closest('.product-order__loading').find('input[name="unitsquantity"]').val('');
                            $(button).closest('.product-order__loading').find('input[name="pallets"]').val('');
                            resetSelectDropdown($(button).closest('.table__body-item').find('.select'));
                        } else {
                            showNotifyMessage('#add_product_errors', error_text, 'error');
                        }

                    }

                    function recountProductPalletsQty(input) {
                        var pallets = parseInt($('.product-pallets').val());
                        var onpallets = parseInt($('.product-on__pallets').val());
                        if (onpallets > 0 && pallets > 0) {
                            $('.product-quantity').val(pallets * onpallets);
                        }
                    }
                    function recountOrderPalletsQty(input) {
                        var pallets = parseInt($(input).closest('.product-order__loading').find('input[name="pallets"]').val());
                        var onpallets = parseInt($('.on-pallets__default').text());
                        if (onpallets > 0 && pallets > 0) {
                            $(input).closest('.product-order__loading').find('input[name="unitsquantity"]').val(pallets * onpallets);
                        }
                    }

                    function showOrderStep(tab, step) {
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        //        reloadTopTabs(id, tab);

                        initSelectDropdown('#order_form_content');
                        if ($('#order_form_content').find('.typeaheadcompany').length) {
                            $.each($('#order_form_content').find('.typeaheadcompany'), function (index, item) {
                                addTypeAheadCompanies($(item), $(item).attr('data-type'));
                            });
                        }

                        if ($('#order_form_content').find('.typeaheadcountry').length) {
                            $.each($('#order_form_content').find('.typeaheadcountry'), function (index, item) {
                                addTypeAheadCountries(item);
                            });
                        }
                        if ($('#order_form_content').find('.typeaheadaddress').length) {
                            $.each($('#order_form_content').find('.typeaheadaddress'), function (index, item) {
                                addTypeAheadAddress(item);
                            });
                        }

                        if ($('#order_form_content').find('.typeahead').length) {
                            $.each($('#order_form_content').find('.typeahead'), function (index, item) {
                                addTypeAheadLocations(item);
                            });
                        }
                        if ($('#order_form_content').find('.typeaheadbooking').length) {
                            addTypeAheadBooking($('#order_form_content').find('.typeaheadbooking'));
                        }
                        if ($('#order_form_content').find('.typeaheadlandbooking').length) {
                            addTypeAheadLandBooking($('#order_form_content').find('.typeaheadlandbooking'));
                        }

                        //        if (step=="order"){
                        //            $('#order_payment_terms').addClass('hide');
                        //            $('#edit_payment_terms').removeClass('hide');
                        //        }else{
                        //            $('#order_payment_terms').removeClass('hide');
                        //            $('#edit_payment_terms').addClass('hide');
                        //        }
                        if ($('#order_form_content').find('input.fromdate').length) {
                            initCustomDatepicker($('#order_form_content').find('input.fromdate'), "DD.MM.YYYY");
                            //            $('#order_form_content').find('input.fromdate').datepicker({
                            //                format: "DD.MM.YYYY",
                            //                autoclose:true,
                            //                weekStart : 1
                            //            });
                        }

                        checkStepCompleted($('#order_form_content').find('input[name="completed"]'), $('#order_form_content').find('input[name="tab"]'));
                        //        if ($('#drag-and-share-zone').length){
                        //            initOrerDocumentsUploader('#drag-and-share-zone');
                        //        }
                    }

                    function getOrder(button, event) {
                        $(button).blur();
                        setOrderTab(button, event);
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        $.ajax({
                            method: "GET",
                            url: baseUrl + "/exports/ajax/saveorder/",
                            data: { 'id': id },
                            success: function (html) {
                                $('#order_form_content').find('form').html(html);
                                showOrderStep('order');
                                //                reloadTopTabs(id, 'order');
                            }
                        });
                        return false;
                    }

                    function getOrderBookings(button, event) {
                        $(button).blur();
                        setOrderTab(button, event);
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        $.ajax({
                            method: "GET",
                            url: baseUrl + "/exports/ajax/saveorderbooking/",
                            data: { 'id': id },
                            success: function (html) {
                                $('#order_form_content').find('form').html(html);
                                showOrderStep('booking');

                            }
                        });
                    }

                    function getOrderTrucks(button, event) {
                        $(button).blur();
                        setOrderTab(button, event);
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        $.ajax({
                            method: "GET",
                            url: baseUrl + "/exports/ajax/saveordertrucks/",
                            data: { 'id': id },
                            success: function (html) {
                                $('#order_form_content').find('form').html(html);
                                showOrderStep('trucks');
                            }
                        });
                    }

                    function getOrderLoading(button, event) {
                        $(button).blur();
                        setOrderTab(button, event);
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        $.ajax({
                            method: "GET",
                            url: baseUrl + "/exports/ajax/saveorderloading/",
                            data: { 'id': id },
                            success: function (html) {
                                $('#order_form_content').find('form').html(html);
                                showOrderStep('loading');
                                //                if (loadingid && $('#loading_docs_uploader_'+loadingid).length){
                                //                    initOrerDocumentsUploader('#loading_docs_uploader_'+loadingid);
                                //                }
                            }
                        });
                    }

                    function getOrderDocuments(button, event) {
                        $(button).blur();
                        setOrderTab(button, event);
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        $.ajax({
                            method: "GET",
                            url: baseUrl + "/exports/ajax/saveorderdocuments/",
                            data: { 'id': id },
                            success: function (html) {
                                $('#order_form_content').find('form').html(html);
                                showOrderStep('documents');
                            }
                        });
                    }

                    function sendOrder(button) {
                        $(button).blur();
                        if ($('#form_data').val()) {
                            var data = $('#form_data').val();
                        } else {
                            var data = $('#order_form_content').find('form').serialize();
                        }
                        var saveonly = $(button).attr('data-value') == "save" ? 1 : 0;
                        //        var id = parseInt($('#order_form_content').find('form').find('input[name="id"]').val());
                        $('#tab_order').attr('data-completed', $('#order_form_content').find('form').find('input[name="completed"]').prop('checked') ? '1' : '0');
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/saveorder/?saveonly=" + saveonly,
                            data: data,
                            success: function (html) {
                                $('#order_form_content').find('form').html(html);
                                var tab = $('#order_form_content').find('input[name="tab"]').val();
                                showOrderStep(tab);
                                if (tab == "booking") {
                                    setOrderTab($('#tab_booking').find('a'), false);
                                    //                    reloadTopTabs(id, 'booking');
                                } else {
                                    setTimeout(function () {
                                        $('#order_notifications').html('');
                                    }, 5000);
                                }

                            }
                        });
                    }

                    function sendOrderBooking(button) {
                        $(button).blur();
                        var saveonly = $(button).attr('data-value') == "save" ? 1 : 0;
                        $('#tab_booking').attr('data-completed', $('#order_form_content').find('form').find('input[name="completed"]').prop('checked') ? '1' : '0');
                        if ($('#form_data').val()) {
                            var data = $('#form_data').val();
                        } else {
                            var data = $('#order_form_content').find('form').serialize();
                        }
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/saveorderbooking/?saveonly=" + saveonly,
                            data: data,
                            success: function (html) {
                                $('#order_form_content').find('form').html(html);
                                var tab = $('#order_form_content').find('input[name="tab"]').val();
                                showOrderStep(tab);
                                if (!saveonly) {

                                    setOrderTab($('#tab_' + tab).find('a'), false);
                                } else {
                                    setTimeout(function () {
                                        $('#order_notifications').html('');
                                    }, 5000);
                                }
                            }
                        });
                    }

                    function sendOrderTrucks(button) {
                        $(button).blur();
                        var saveonly = $(button).attr('data-value') == "save" ? 1 : 0;
                        $('#tab_booking').attr('data-completed', $('#order_form_content').find('form').find('input[name="completed"]').prop('checked') ? '1' : '0');
                        if ($('#form_data').val()) {
                            var data = $('#form_data').val();
                        } else {
                            var data = $('#order_form_content').find('form').serialize();
                        }
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/saveordertrucks/?saveonly=" + saveonly,
                            data: data,
                            success: function (html) {
                                $('#order_form_content').find('form').html(html);
                                var tab = $('#order_form_content').find('input[name="tab"]').val();
                                showOrderStep(tab);
                                //                var loadingid = $('#order_form_content').find('.order-item').first().attr('data-value');
                                //                if (loadingid && $('#loading_docs_uploader_'+loadingid).length){
                                //                    initOrerDocumentsUploader('#loading_docs_uploader_'+loadingid);
                                //                }
                                setOrderTab($('#tab_' + tab).find('a'), false);
                                if (saveonly) {
                                    setTimeout(function () {
                                        $('#order_notifications').html('');
                                    }, 5000);
                                }

                            }
                        });
                    }

                    function sendOrderLoading(button) {
                        $(button).blur();
                        var saveonly = $(button).attr('data-value') == "save" ? 1 : 0;
                        if ($('#form_data').val()) {
                            var data = $('#form_data').val();
                        } else {
                            var data = $('#order_form_content').find('form').serialize();
                        }
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/saveorderloading/?saveonly=" + saveonly,
                            data: data,
                            success: function (html) {
                                $('#order_form_content').find('form').html(html);
                                var tab = $('#order_form_content').find('input[name="tab"]').val();
                                showOrderStep(tab);
                                setOrderTab($('#tab_' + tab).find('a'), false);
                                if (saveonly) {
                                    setTimeout(function () {
                                        $('#order_notifications').html('');
                                    }, 5000);
                                }
                            }
                        });
                    }

                    function sendOrderDocuments(button) {
                        $(button).blur();
                        if ($('#form_data').val()) {
                            var data = $('#form_data').val();
                        } else {
                            var data = $('#order_form_content').find('form').serialize();
                        }
                        //        $('#tab_documents').attr('data-completed', $('#order_form_content').find('form').find('input[name="completed"]').prop('checked')?'1':'0');
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/saveorderdocuments/",
                            data: data,
                            success: function (html) {
                                $('#order_form_content').find('form').html(html);
                                showOrderStep($('#order_form_content').find('input[name="tab"]').val());
                                setTimeout(function () {
                                    $('#order_notifications').html('');
                                }, 5000);
                                //                if ($('#order_documents_saved_success').length){
                                //                    $('#order_documents_saved_success').removeClass('hide');
                                //                    setTimeout(function(){
                                //                        $('#order_documents_saved_success').remove();
                                //                    }, 2000);
                                //                }
                            }
                        });
                    }


                    function changeOrderBooking(select) {
                        //        var id = $('#order_form_content').find('form').find('input[name="id"]').val();
                        $.ajax({
                            method: "GET",
                            url: baseUrl + "/exports/ajax/saveorderbooking/",
                            data: { 'id': id, 'bookingid': $(select).val() },
                            success: function (html) {
                                $('#order_form_content').find('form').html(html);
                                showOrderStep('booking');
                            }
                        });
                    }

                    function checkDocumentsBl(checkbox, event) {
                        if ($(checkbox).attr('readonly')) {
                            event.stopPropagation();
                            event.preventDefault();
                            return false;
                        }
                        if ($('#ord_cat').val() != 'land' && $('#incoterm').val() != "1" && $('#incoterm').val() != "11") {
                            switch ($(checkbox).val()) {
                                case 'bl':
                                    if ($(checkbox).prop('checked')) {
                                        $('input[name="documents[sw]"]').prop('checked', false);
                                    } else {
                                        $('input[name="documents[sw]"]').prop('checked', true);
                                    }
                                    break;
                                case 'sw':
                                    if ($(checkbox).prop('checked')) {
                                        $('input[name="documents[bl]"]').prop('checked', false);
                                    } else {
                                        $('input[name="documents[bl]"]').prop('checked', true);
                                    }
                                    break;
                            }
                        }
                    }

                    function reloadTopTabs(id, tab) {
                        $.ajax({
                            method: "GET",
                            url: baseUrl + "/exports/ajax/gettoptabs/",
                            data: { 'id': id, 'tab': tab },
                            success: function (html) {
                                $('.breadcrumbs').replaceWith(html);
                            }
                        });
                    }

                    function setOrderTab(button, event) {
                        if (event) {
                            event.stopPropagation();
                            event.preventDefault();
                        }
                        window.history.pushState('', 'Add New Order', $(button).attr('href'));
                    }

                    function markStepCompleted(button, tab) {

                        $(button).toggleClass('active');
                        if ($(button).hasClass('active')) {
                            $('input[name="completed"]').val('1');
                            $(button).text('COMPLETED');
                        } else {
                            $('input[name="completed"]').val('0');
                            $(button).text('Mark as complete');
                        }
                        checkStepCompleted(button, tab);
                        $('a[data-value="save"]').trigger('click');
                    }

                    function checkStepCompleted(input, tab) {


                        switch ($(tab).val()) {
                            case 'order':
                                reloadIncotermsConditions($('#incoterm'));
                                checkCustomLoadings();
                                break;
                        }
                        if (!$(input).length || $(input).val() == "1") {
                            //        if ($(input).prop('checked')){
                            var data = $('#order_form_content').find('form').serialize();
                            $('#form_data').val(data);
                            //            $.each($(input).closest('form').find('.remove, a.full'), function(index, item){
                            //                if (!$(item).attr('data-disabled')){
                            //                    $(item).addClass('hide');
                            //                }
                            //            });

                            $('.completed-hide').addClass('hide');
                            $('.replace-click').attr('data-onclick', $('.replace-click').attr('onclick'));
                            $('.replace-click').attr('onclick', '');
                            $.each($('#add_order_form').find('input, div.select, select, textarea'), function (index, item) {
                                if (!$(item).attr('data-disabled')) {
                                    if ($(item).attr('name') != "completed") {
                                        if ($(item).prop('tagName') == "SELECT") {
                                            $(item).prop('disabled', true);
                                        } else if ($(item).hasClass('select') && $(item).prop('tagName') == "DIV") {
                                            $(item).attr('disabled', 1);
                                        } else if ($(item).hasClass('fromdate') || $(item).attr('type') == "checkbox" || $(item).attr('type') == "radio") {
                                            $(item).prop('disabled', true);
                                        } else {
                                            $(item).prop('readonly', true);
                                        }
                                    }
                                }
                            });
                        } else {

                            $('#form_data').val('');
                            $('.completed-hide').removeClass('hide');
                            //            $.each($(input).closest('form').find('.remove, a.full'), function(index, item){
                            //                if (!$(item).attr('data-disabled')){
                            //                    $(item).removeClass('hide');
                            //                }
                            //            });
                            $('.replace-click').attr('onclick', $('.replace-click').attr('data-onclick'));
                            $.each($(input).closest('form').find('input, div.select, select, textarea'), function (index, item) {
                                if (!$(item).attr('data-disabled')) {
                                    if ($(item).attr('name') != "completed") {
                                        if ($(item).prop('tagName') == "SELECT") {
                                            $(item).prop('disabled', false);
                                        } else if ($(item).hasClass('select') && $(item).prop('tagName') == "DIV") {
                                            $(item).removeAttr('disabled');
                                        } else if ($(item).hasClass('fromdate') || $(item).attr('type') == "checkbox" || $(item).attr('type') == "radio") {
                                            $(item).prop('disabled', false);
                                        } else {
                                            $(item).prop('readonly', false);
                                        }
                                    }
                                }
                            });
                            if ($(tab).val() == 'order') {
                                if ($('#customordload').prop('checked')) {
                                    $('#order_tab_add_item').addClass('hide');
                                }
                                $('#add_custom_orderno').addClass('hide');
                                $('#cargo_remove_button').addClass('hide');
                                if ($('#order_tabs').find('a[href="#contents__item-1"]').hasClass('active')) {
                                    $('#add_custom_orderno').removeClass('hide');
                                    checkCustomLoadings();
                                }
                            }
                            if ($("#ready_week").length) {
                                initCustomDatepicker($("#ready_week"), 'W');
                                //                $("#ready_week").datepicker({
                                //                    autoclose:true,
                                //                    weekStart : 1,
                                //                    calendarWeeks: true,
                                //                    format: {
                                //                        toDisplay: function (date, format, language) {
                                //                            var week, year;
                                //                            $.each(getWeekNumber(new Date(date)), function(index, value){
                                //                                switch(index){
                                //                                    case 0:
                                //                                        year = value;
                                //                                        $('#ready_year').val(value);
                                //                                        break;
                                //                                    case 1:
                                //                                        $('#ready_week').val(value);
                                //                                        week = value;
                                //                                        break;
                                //                                }
                                //                            });
                                //                            return parseInt(week);
                                //                        },
                                //                        toValue: function (date, format, language) {
                                //                            var week = $('#ready_week').val();
                                //                            var year = $('#ready_year').val();
                                //                            if (week && year){
                                //                                return getDateOfISOWeek(week, year);
                                //                            }else{
                                //                                return new Date(date);
                                //                            }
                                //                        }
                                //                    },
                                //                });
                            }

                            if ($('.datepicker-range').length) {
                                $.each($('.datepicker-range'), function (index, item) {
                                    initCustomDaterangepicker($('#' + $(item).attr('id')), 'DD MMM', function (start, end) {
                                        $(item).val(start.format('DD MMM') + ' - ' + end.format('DD MMM'));
                                        if ($(item).attr('data-source').length) {
                                            $($(item).attr('data-source')).val(start.format('YYYY-MM-DD') + ' ' + end.format('YYYY-MM-DD'));
                                            $($(item).attr('data-source')).trigger('change');
                                        }
                                    });

                                });
                            }

                        }
                    }

                    function checkCargoRemove() {
                        if ($('input[name="cargo_item[]"]:checked').length) {
                            $('#cargo_remove_button').removeClass('hide');
                        } else {
                            $('#cargo_remove_button').addClass('hide');
                        }
                    }
                    function removeCargoItems(button) {
                        $(button).blur();

                        switch ($('#order_tabs').find('a.active').attr('href')) {
                            case '#contents__item-1':
                                $.each($('.custom-order__no:checked'), function (index, item) {
                                    removeCustomLoading(item, $(item).val())
                                });
                                break;
                            case '#contents__item-2':
                                var products = [];
                                $.each($('input[name="productid[]"]:checked'), function (index, item) {
                                    products.push($(item).val());
                                });
                                $.ajax({
                                    method: "POST",
                                    url: baseUrl + "/exports/ajax/removeorderproducts/",
                                    data: { 'id': id, 'products': products },
                                    success: function (res) {
                                        $('input[name="productid[]"]:checked').closest('li.table__body-item').remove();
                                    }
                                });
                                break;
                            case '#contents__item-3':
                                $('input[name="cargo_item[]"]:checked').closest('.fields__row').remove();
                                break;
                            case '#contents__item-4':
                                break;
                        }


                        $('#order_tab_edit_item').addClass('hide');
                        $('#cargo_remove_button').addClass('hide');
                    }

                    function allLclItem(button) {
                        $(button).blur();
                        var html = `<div class="row">
                                        <label class="absolute l-0 py-4 ml--25">
                                            <input type="checkbox" name="cargo_item[]" value="" class="checkbox" onclick="checkCargoRemove()">
                                            <span class="checked-customer dark br-4">
                                                <svg class="svg-sprite-icon c-none mx-auto" width="12px" height="18px">
                                                    <use xlink:href="../../img/sprite/symbol/sprite.svg#check">
                                                    </use>
                                                </svg>
                                            </span>
                                        </label>
                                        <div class="col-md-6 mb-3">
                                            <p class="c-gray-69 mb-1">Cargo type</p>
                                            <div class="select bg-white br-4 b-gray-bd" inited="1">
                                                <input type="hidden" name="transport_items[cargo_type][]" value="pallet">
                                                <div class="select__item">Pallet</div>
                                                <div class="select__drop">
                                                    <ul class="select__menu p-2">
                                                        <li class="select__option p-1 mb-1" data-value="pallet">Pallet</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <p class="c-gray-69 mb-1">Weight of one</p>
                                            <input type="text" class="bg-white br-4 b-gray-bd" name="transport_items[weight_of_one][]" value="">
                                        </div>
                                        <div class="col-md-6 mb-3 d-flex">
                                            <p class="c-white w-100px bg-orange-f4 br-4 h-100 flex-center">QTY</p>
                                            <input type="text" name="transport_items[qty][]" class="bg-white br-4 b-gray-bd ml--1" value=""> 
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <div class="d-flex fs-13">
                                                <div class="relative">
                                                    <p class="absolute l-0 t-center px-2">L</p>
                                                    <input type="number" name="transport_items[i_length][]" class="br-4-left b-gray-bd pl-4" value="" inited="1">
                                                </div>
                                                <div class="relative">
                                                    <p class="absolute l-0 t-center px-2">H</p>
                                                    <input type="number" name="transport_items[i_height][]" class="b-gray-bd pl-4" value="" inited="1">
                                                </div>
                                                <div class="relative">
                                                    <p class="absolute l-0 t-center px-2">W</p>
                                                    <input type="number" name="transport_items[i_width][]" class="b-gray-bd pl-4" value="" inited="1">
                                                </div>
                                                <div class="w-100px flex-center bg-orange-f4 c-white br-4-right ">cm</div>
                                            </div>
                                        </div>
                                    </div>`;
                        $(html).insertBefore($('#add_lcl_item').parent());
                        initSelectDropdown($('.cont-load__container[data-value="lcl"]'));
                        initTransportItem();
                    }

                    function setOrderCategory(button) {
                        $(button).blur();
                        if (!$('#ord_cat').prop('readonly')) {
                            $(button).toggleClass('active').siblings().removeClass('active');
                            $('#ord_cat').val($(button).attr('data-value'));
                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/loadcatincoterms/",
                                data: { 'cat': $(button).attr('data-value') },
                                success: function (res) {
                                    var incoterm = $('#incoterm').val();

                                    var options_html = '';
                                    $.each(res, function (ind, item) {
                                        options_html += '<li data-value="' + item.id + '" class="select__option' + (item.id == incoterm ? ' active' : '') + '">' + item.name + '</li>'
                                    });
                                    var html = '<div class="select" >\
                <input type="hidden" onchange="reloadIncotermsConditions(this)" id="incoterm" name="incoterm" value="">\
                <div class="select__item"></div>\
                <div class="select__drop">\
                    <ul class="select__menu">'+ options_html + '</ul>\
                </div>\
            </div>';
                                    $('#incoterm').closest('.select').replaceWith(html);
                                    initSelectDropdown($('#incoterm').closest('.fields__item'));
                                    if ($('#incoterm').closest('.select').find('li.active').length) {
                                        $('#incoterm').closest('.select').find('li.active').trigger('click');
                                    }
                                }
                            });
                            $('.category-transport__origin').addClass('hide');
                            $('.category-transport__origin[data-value="' + $(button).attr('data-value') + '"]').removeClass('hide');
                            getOrderCategoryIcons(button);
                            switch ($(button).attr('data-value')) {
                                case 'sea':
                                    $('#container_text').text('Container type');
                                    $('#container_text').parent().removeClass('hide');
                                    $('#movetype').parent().parent().removeClass('hide');
                                    $('.transport-block_4').removeClass('hide');
                                    if (!$('#weight').attr('data-default')) {
                                        $('#weight').val('26000');
                                    }
                                    break;
                                case 'land':
                                    //                    $('#container_text').text('Trailer Type');
                                    $('#container_text').parent().addClass('hide');
                                    $('#movetype').parent().parent().addClass('hide');
                                    $('#movetype').val('');
                                    $('.transport-block_4').addClass('hide');
                                    if (!$('#weight').attr('data-default')) {
                                        $('#weight').val('24000');
                                    }
                                    break;
                            }
                        }
                    }

                    function setContainerLoad(button, type) {
                        $(button).blur();
                        if (!$('#cont_load').prop('readonly')) {
                            var label = '';
                            if ($('#cont_load').val() != type) {
                                $(button).toggleClass('active').siblings().removeClass('active');
                            }

                            $('#cont_load').val(type);
                            $('.cont-load__container').addClass('hide');
                            $('.cont-load__container[data-value="' + type + '"]').removeClass('hide');
                            switch (type) {
                                case 'fcl':
                                    label = 'FULL CONTAINER LOAD';
                                    $('#incoterm').closest('.incoterms-container').find('.card__label').addClass('hide');
                                    break;
                                case 'lcl':
                                    label = 'LESS CONTAINER LOAD';
                                    $('#incoterm').closest('.incoterms-container').find('.card__label').removeClass('hide');
                                    break;
                            }
                            $('.transport-mode__container').text(label);
                        }
                    }

                    function checkIfOrderCompleted() {
                        return (($('input[name="completed"]').val() == "1") ? true : false);
                    }

                    function checkOrderProductsEditable(button, event) {
                        event.stopPropagation();
                        //        event.preventDefault();
                        if ($('input[name="productid[]"]:checked').length) {
                            $('#order_tab_edit_item').removeClass('hide');
                            $('#cargo_remove_button').removeClass('hide');
                        } else {
                            $('#order_tab_edit_item').addClass('hide');
                            $('#cargo_remove_button').addClass('hide');
                        }
                    }

                    function switchOrderTabs(button) {
                        $(button).blur();
                        //        var id = parseInt($('#order_form_content').find('form').find('input[name="id"]').val());
                        $('#order_tab_add_item').addClass('hide');
                        $('#order_tab_edit_item').addClass('hide');
                        $('#add_custom_orderno').addClass('hide');
                        $('#cargo_remove_button').addClass('hide');
                        switch ($(button).attr('href')) {
                            case '#contents__item-1':
                                //                if (!checkIfOrderCompleted()){
                                $('#add_custom_orderno').removeClass('hide');
                                //                }

                                $.ajax({
                                    method: "POST",
                                    url: baseUrl + "/exports/ajax/addordergetloadings/",
                                    data: { 'id': id },
                                    success: function (html) {
                                        $('#orderNumbrs').html(html);
                                        checkCustomLoadings();
                                        checkStepCompleted($('#order_form_content').find('input[name="completed"]'), $('#order_form_content').find('input[name="tab"]'));

                                        //                        if ($("#orderNumbrs").length){
                                        //                            $("#orderNumbrs .table__item").click(function () {
                                        //                                $(this).find(".table__arrow").toggleClass('active');
                                        //                                $(this).closest(".table__body-item").find(".table__drop").slideToggle(300);
                                        //                            });
                                        //                        }

                                    }
                                });

                                $('#order_tab_add_item').removeClass('hide');
                                break;
                            case '#contents__item-2':
                                if (!checkIfOrderCompleted()) {
                                    $('#add_product').closest('.table__body-item').removeClass('hide');
                                    //                    $('#order_tab_add_item').removeClass('hide');
                                } else {
                                    $('#add_product').closest('.table__body-item').addClass('hide');
                                }
                                //                if ($("#products_list").length){
                                //                    $("#products_list .table__item").click(function () {
                                //                        $(this).find(".table__arrow").toggleClass('active');
                                //                        $(this).closest(".table__body-item").find(".table__drop").slideToggle(300);
                                //                    });
                                //                }
                                break;
                            case '#contents__item-3':
                                break;
                            case '#contents__item-4':
                                //                if (!checkIfOrderCompleted()){
                                //                    $('#order_tab_add_item').removeClass('hide');
                                //                }
                                $('#order_tab_add_item').addClass('hide');
                                break;
                        }

                    }

                    function addOrderProduct(id, productid) {
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/addorderproductpopup/",
                            data: { 'id': id, 'productid': productid },
                            success: function (html) {
                                $('.popup').html(html);
                                showPopup('#add_product_popup');
                            }
                        });
                    }


                    function checkCustomOrdersAction(input) {
                        if ($('.custom-order__no:checked').length) {
                            if ($('#customordload').prop('checked')) {
                                $('#order_tab_edit_item').removeClass('hide');
                            }
                            $('#cargo_remove_button').removeClass('hide');
                        } else {
                            $('#order_tab_edit_item').addClass('hide');
                            $('#cargo_remove_button').addClass('hide');
                        }
                    }


                    function addOrderTabItem(button) {
                        $(button).blur();
                        //        var id = parseInt($('#order_form_content').find('form').find('input[name="id"]').val());
                        switch ($('#order_tabs').find('a.active').attr('href')) {
                            case '#contents__item-1':
                                $('#add_custom_orderno').removeClass('hide');

                                $.ajax({
                                    method: "POST",
                                    url: baseUrl + "/exports/ajax/addorderno/",
                                    data: { 'id': id },
                                    success: function (res) {
                                        if (res.error) {
                                            showNotifyMessage('#add_addorderno_errors', res.message, 'error');
                                        } else {
                                            $('#quantity').val(res.quantity);
                                            $('#order_tabs').find('a[href="#contents__item-1"]').trigger('click');
                                        }

                                    }
                                });

                                break;
                            case '#contents__item-2':
                                $('#order_tab_add_item').removeClass('hide');
                                addOrderProduct(id, false);
                                break;
                            case '#contents__item-3':

                                break;
                            case '#contents__item-4':
                                if ($('#add_document').val()) {
                                    var html = '<label class="checkbox__blue d-flex justify-content-between align-items-center"><input name="documents[]" type="hidden" value="0"><input name="customdocuments[]" type="hidden" value="' + $('#add_document').val() + '">\
<input name="custrequired[]" onclick="checkCustomDoc(this)" type="checkbox" value="'+ $('#add_document').val() + '" class="checkbox">\
<span class="checkbox__text">'+ $('#add_document').val() + '</span>\
<span class="checkbox__icon-blue"></span>\
</label>';
                                    $('#add_document').val('');
                                    $('#documents').find('.document-container').last().append(html);
                                }
                                break;
                        }

                        //        $('#order_tab_add_item').
                    }
                    function editOrderTabItem(button) {
                        $(button).blur();
                        //        var id = parseInt($('#order_form_content').find('form').find('input[name="id"]').val());
                        switch ($('#order_tabs').find('a.active').attr('href')) {
                            case '#contents__item-1':
                                if ($('#customordload').prop('checked')) {
                                    $.each($('input.custom-order__no:checked'), function (ind, item) {
                                        $(item).closest('li.table__body-item').find('.loading-edit__element').removeClass('hide');
                                        $(item).closest('li.table__body-item').find('.loading-view__element').addClass('hide');
                                    });
                                    $(button).addClass('hide');
                                    $('#order_tab_save_item').removeClass('hide');
                                }
                                break;
                            case '#contents__item-2':
                                if ($('input[name="productid[]"]:checked').length) {
                                    $.each($('input[name="productid[]"]:checked'), function (ind, item) {
                                        $(item).closest('li.table__body-item').find('.product-edit__element').removeClass('hide');
                                        $(item).closest('li.table__body-item').find('.product-view__element').addClass('hide');

                                        if ($(item).closest('li.table__body-item').find('.product-temp__item').length) {

                                            $(item).closest('li.table__body-item').find('.switch-yn').removeClass('b-gray');
                                            //                        $(item).closest('li.table__body-item').find('.switch-yn').removeClass('.switch-yn_circle').addClass();

                                        }
                                        if ($(item).closest('li.table__body-item').find('.product-adr__item').length) {
                                            $(item).closest('li.table__body-item').find('.switch-yn').removeClass('b-gray');
                                            $(item).closest('li.table__body-item').find('.switch-yn_circle').removeClass('bg-gray_4');
                                        }
                                    });
                                }
                                if ($('input[name="transport_rate_edit"]:checked').length) {
                                    $('input[name="transport_rate_edit"]').closest('li.table__body-item').find('.product-edit__element').removeClass('hide');
                                    $('input[name="transport_rate_edit"]').closest('li.table__body-item').find('.product-view__element').addClass('hide');
                                }
                                $(button).attr('onclick', 'saveOrderTabItem(this)');
                                $(button).html('<img src="' + baseUrl + '/img/acargo/check-white.svg" alt="edit" class="edit">');
                                break;
                            case '#contents__item-3':
                                break;
                            case '#contents__item-4':
                                break;
                        }
                    }
                    function saveOrderTabItem(button) {
                        $(button).blur();
                        //        var id = parseInt($('#order_form_content').find('form').find('input[name="id"]').val());
                        switch ($('#order_tabs').find('a.active').attr('href')) {
                            case '#contents__item-1':
                                if ($('#customordload').prop('checked')) {
                                    var loadingnames = {};
                                    $.each($('input.custom-order__no:checked'), function (ind, item) {
                                        $(item).closest('li.table__body-item').find('.loading-edit__element').addClass('hide');
                                        $(item).closest('li.table__body-item').find('.loading-view__element').removeClass('hide');
                                        var newvalue = $(item).closest('li.table__body-item').find('.loading-edit__element').val();
                                        loadingnames[$(item).val()] = newvalue;
                                        $(item).closest('li.table__body-item').find('.loading-view__element').find('p').html('<span class="d-md-none d-flex mb-2">ORDER NO:</span>' + newvalue);
                                        $(item).prop('checked', false);
                                    });
                                    $('input[name="selectallcustomnumbers"]').prop('checked', false);
                                    $.ajax({
                                        method: "POST",
                                        url: baseUrl + "/exports/ajax/setcustomorderloadings/",
                                        data: { 'id': id, 'loadings': loadingnames },
                                        success: function (res) {
                                        }
                                    });
                                }
                                $('#order_tab_save_item').addClass('hide');
                                break;
                            case '#contents__item-2':
                                $('input[name="productid[]"]:checked').prop('checked', false);
                                $('#order_tab_edit_item').addClass('hide');
                                $('#cargo_remove_button').addClass('hide');
                                $(button).attr('onclick', 'editOrderTabItem(this)');
                                $(button).html('<img src="' + baseUrl + '/img/acargo/white__create-24-px.svg" alt="edit" class="edit">');
                                loadOrderProducts();
                                break;
                        }
                    }

                    function checkCustomDoc(input) {
                        $(input).parent().find('input[name="documents[]"]').val($(input).prop('checked') ? 1 : 0);
                    }



                    function getCustomerDestination(input) {
                        if (!$(input).val()) {
                            $('#destination').prop('disabled', true);
                        } else {
                            $('#destination').prop('disabled', false);

                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/getcustdest/",
                                data: { 'customer': $(input).val() },
                                success: function (res) {
                                    $.each(res.places, function (ind, item) {
                                        $('#destination_list').append('<option value="' + item.name + '">');
                                    });
                                    if (res.specification) {
                                        if ($('.notes').length) {
                                            $('.notes').remove();
                                        }
                                        $('#notes').removeClass('hide')
                                        $('.message-info__text').addClass('hide');
                                        $('.message-info__edit').removeClass('hide')
                                        $('textarea[name="notes"]').val(res.specification);
                                    }
                                    if (Object.keys(res.documents).length) {
                                        $.each(res.documents, function (doc_key, doc_item) {
                                            if ($('#' + doc_item).length) {
                                                $('#' + doc_item).prop('checked', true);
                                                $('#' + doc_item).attr('required', true);
                                                $('#' + doc_item).attr('readonly', true);
                                            }
                                        });
                                    }
                                }
                            });
                        }
                    }
                    function getShipperOrigin(input) {
                        if (!$(input).val()) {
                            $('#origin').prop('disabled', true);
                        } else {
                            $('#origin').prop('disabled', false);

                            $.ajax({
                                method: "POST",
                                url: baseUrl + "/exports/ajax/getshipperorigin/",
                                data: { 'shipper': $(input).val() },
                                success: function (res) {
                                    $.each(res, function (ind, item) {
                                        $('#origin_list').append('<option value="' + item.name + '">');
                                    });
                                }
                            });

                        }
                    }

                    function saveShipperOrigin(button) {
                        $(button).blur();
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/addshipperorigin/",
                            data: { 'shipper': $('#partyid_3_1').val(), 'name': $('#origin').val() },
                            success: function (res) {
                                $('#origin_save_loading').addClass('hide');
                                $('#origin_list').html(origin_list_options);
                                $('#origin_list').append('<option value="' + $('#origin').val() + '">');
                                origin_list_options = $('#origin_list').html();
                            }
                        });
                    }
                    function saveCustomerDestination(button) {
                        $(button).blur();
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/addcustdest/",
                            data: { 'customer': $('#partyid_8_1').val(), 'name': $('#destination').val() },
                            success: function (res) {
                                $('#destination_save_loading').addClass('hide');
                                $('#destination_list').html(destination_list_options);
                                $('#destination_list').append('<option value="' + $('#destination').val() + '">');
                                destination_list_options = $('#destination_list').html();
                            }
                        });
                    }

                    function addParty(button) {
                        $(button).blur();
                        switch ($(button).attr('data-type')) {
                            case '16': var label = 'Transporter'; break; case '8': var label = 'Customer'; break; case '5': var label = 'Agent'; break; case '9': var label = 'Carrier'; break; case '10': var label = 'Forwarder'; break; case '11': var label = 'Supplier'; break; case '6': var label = 'Customs Broker'; break; case '14': var label = 'Fumigation'; break; case '15': var label = 'Certificates'; break; case '1': var label = 'Booking party'; break; case '4': var label = 'Consignee'; break; case '12': var label = 'Notify'; break; case '2': var label = 'Paying party'; break; case '13': var label = 'Service provider'; break; case '3': var label = 'Shipper'; break; case '7': var label = 'Shipping line'; break;
                        }

                        var index = $('input[name="parties[' + $(button).attr('data-type') + '][]"]').length + 1;

                        var html = '<div class="fields__item">\
                    <p class="text-14">'+ label + '</p><div class="d-flex align-items-center">\
                        <label for="party_'+ $(button).attr('data-type') + '_' + index + '"></label>\
                        <input type="hidden" autocomplete="off" name="partiesid['+ $(button).attr('data-type') + '][]" id="partyid_' + $(button).attr('data-type') + '_' + index + '" value="">\
                        <input name="parties['+ $(button).attr('data-type') + '][]" data-type="' + $(button).attr('data-type') + '" autocomplete="off" data-target="#partyid_' + $(button).attr('data-type') + '_' + index + '" id="party_' + $(button).attr('data-type') + '_' + index + '" value="" type="text" class="typeaheadcompany input">\
                    <label class="radio">\
                        <input type="checkbox" name="partiesnotify['+ $(button).attr('data-type') + '][]" value="1" class="checkbox" >\
                        <span class="radio__check"></span>\
                    </label>\
                    </div>\
                </div>';
                        $('#parties').append(html);

                        addTypeAheadCompanies($('#partyid_' + $(button).attr('data-type') + '_' + index + '').closest('.fields__item').find('.typeaheadcompany'), $('#partyid_' + $(button).attr('data-type') + '_' + index + '').closest('.fields__item').find('.typeaheadcompany').attr('data-type'));

                    }

                    function closeShippingPopup() {
                        setTimeout('closePopup()', 500);
                        location.reload();
                    }

                    function originListener(input) {
                        var str = $(input).val();
                        var origincontent = $('#origin_list').html();
                        if (str) {
                            var matched = false;
                            $.each($('#origin_list').find('option'), function (ind, item) {
                                if (str.indexOf($(item).val()) > -1) {
                                    matched = true;
                                }
                            });
                            if (!matched) {
                                $('#origin_save_loading').removeClass('hide');
                                if ($('#origin_list').html() != '') {
                                    origin_list_options = $('#origin_list').html();
                                }
                                $('#origin_list').html(origincontent);
                                //                $('#origin_list').html('');
                            } else {
                                $('#origin_save_loading').addClass('hide');
                                $('#origin_list').html(origin_list_options);
                            }
                        } else {
                            $('#origin_save_loading').addClass('hide');
                            $('#origin_list').html(origin_list_options);
                        }
                    }

                    function destinationListener(input) {
                        var str = $(input).val();
                        if (str) {
                            var matched = false;
                            var destinationhtml = $('#destination_list').html();
                            $.each($('#destination_list').find('option'), function (ind, item) {
                                if (str.indexOf($(item).val()) > -1) {
                                    matched = true;
                                }
                            });
                            if (!matched) {
                                $('#destination_save_loading').removeClass('hide');
                                if ($('#destination_list').html() != '') {
                                    destination_list_options = $('#destination_list').html();
                                }
                                $('#destination_list').html(destinationhtml);
                                //                $('#destination_list').html('');
                            } else {
                                $('#destination_save_loading').addClass('hide');
                                $('#destination_list').html(destination_list_options);
                            }
                        } else {
                            $('#destination_save_loading').addClass('hide');
                            $('#destination_list').html(destination_list_options);
                        }
                    }


                    // document.addEventListener('DOMContentLoaded', function () {
                    //     if ($('.typeaheadcompany').length) {
                    //         $.each($('.typeaheadcompany'), function (index, item) {
                    //             addTypeAheadCompanies(item, $(item).attr('data-type'));
                    //         });
                    //     }
                    //     if ($('#order_form_content').find('.typeaheadlandbooking').length) {
                    //         addTypeAheadLandBooking($('#order_form_content').find('.typeaheadlandbooking'));
                    //     }
                    //     if ($('.typeaheadcountry').length) {
                    //         $.each($('.typeaheadcountry'), function (index, item) {
                    //             addTypeAheadCountries(item);
                    //         });
                    //     }
                    //     if ($('.typeaheadaddress').length) {
                    //         $.each($('.typeaheadaddress'), function (index, item) {
                    //             addTypeAheadAddress(item);
                    //         });
                    //     }
                    //     if ($('.typeaheadproducts').length) {
                    //         $.each($('.typeaheadproducts'), function (index, item) {
                    //             addTypeAheadProducts(item);
                    //             $("#add_product").on('focus', $("#add_product").typeahead.bind($("#add_product"), 'lookup'));
                    //         });
                    //     }
                    //     if ($('.datepicker-range').length) {
                    //         $.each($('.datepicker-range'), function (index, item) {
                    //             initCustomDaterangepicker($('#' + $(item).attr('id')), 'DD MMM', function (start, end) {
                    //                 $(item).val(start.format('DD MMM') + ' - ' + end.format('DD MMM'));
                    //                 if ($(item).attr('data-source').length) {
                    //                     $($(item).attr('data-source')).val(start.format('YYYY-MM-DD') + ' ' + end.format('YYYY-MM-DD'));
                    //                     $($(item).attr('data-source')).trigger('change');
                    //                 }
                    //             });
                    //         });
                    //     }

                    //     if ($('#order_form_content').find('.typeaheadbooking').length) {
                    //         addTypeAheadBooking($('#order_form_content').find('.typeaheadbooking'));
                    //     }
                    //     checkStepCompleted($('#order_form_content').find('input[name="completed"]'), $('#order_form_content').find('input[name="tab"]'));
                    //     if ($('#order_form_content').find('input.fromdate').length) {
                    //         //            $.each($('#order_form_content').find('input.fromdate'), function(ind, item){
                    //         //                $(item).datepicker({
                    //         //                    format: "DD MMM YYYY",
                    //         //                    autoclose:true,
                    //         //                    weekStart : 1
                    //         //                }).on('show', function(e){
                    //         //                    if ($(item).attr('readonly')){
                    //         //                        $('.day').click(function(event) {
                    //         //
                    //         //                            event.preventDefault();
                    //         //                            event.stopPropagation();
                    //         //                        });
                    //         //                    }
                    //         //                });
                    //         //            });
                    //     }
                    //     if ($('#general_uploader').length) {
                    //         initOrerDocumentsUploader('#general_uploader');
                    //     }
                    //     //Initialize the datePicker(I have taken format as mm-dd-yyyy, you can     //have your owh)

                    // });


                    function showCancelBookingPopup(button) {
                        $(button).blur();
                        var html = '<div class="popup_v2 d-flex" id="cancel_booking">\
                    <div class="box-white max-650 w-100 active m-auto p-3">\
                        <div class="d-flex justify-content-end">\
                            <a href="#" class="close close-small">\
                                <img src="'+ baseUrl + '/img/acargo/gray__cancel.svg" alt="close">\
                            </a>\
                        </div>\
                        <h2 class="fs-17 weight-medium pb-3 text-center fs-16_1440 fs-14-1280">Reason</h2>\
                        <div class="d-flex px-4">\
                          <div class="w-100 mb-4 mb-0_1440 v-c__item">\
                            <div id="cancel_booking_notifications"></div>\
                              <div class="relative">\
                                  <textarea name="reason" id="reason" class="fs-14 textarea_v3 pb-4 fs-13_1440 "></textarea>\
                              </div>\
                          </div>\
                      </div>\
                      <button type="button" onclick="cancelBookingOrder(this)" class="btn-aquamarine fs-16 min-w-auto px-2 mx-auto my-2 d-block fs-14_1440">\
                          <span class="px-1">Cancel</span>\
                      </button>\
                    </div>\
                </div>';
                        $('.popup').html(html);
                        showPopup('#cancel_booking');
                    }

                    function cancelBookingOrder(button, id) {
                        $(button).blur();
                        if (!$('#reason').val()) {
                            showNotifyMessage('#cancel_booking_notifications', 'Reason can not be empty', 'error');
                        } else {
                            $.ajax({
                                method: "POST",
                                url: "https://test.cargo4s.com/shipments/4397/request/?cancel=1",
                                data: { 'reason': $('#reason').val() },
                                success: function (res) {
                                    closePopup();
                                    setTimeout(function () {
                                        location.href = 'https://test.cargo4s.com/orders/';
                                    }, 200);
                                }
                            });
                        }
                    }

                    function confirmProviderBookingOrder(button, id) {
                        $(button).blur();
                        lockActionButton(button, 'Confirmation...');
                        $.ajax({
                            method: "POST",
                            url: baseUrl + "/exports/ajax/shipments/confirmorderrequest/",
                            data: { 'id': id },
                            success: function (res) {
                                unlockActionButton(button, 'Confirm order');
                                if (res.success) {
                                    setTimeout(function () {
                                        location.href = 'https://test.cargo4s.com/orders/4397/complete/';
                                    }, 200);
                                }
                            }
                        });
                    }

                </script>
            </div>
        </div>
    </div>

    <script src="../../vendor/jquery/jquery.min.js"></script>
    <script src="../../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="../../vendor/jquery-easing/jquery.easing.min.js"></script>
    <!-- <script src="../../vendor/sticky/jquery.sticky.js"></script> -->
    <!-- <script src="https://acargo.click/test/js/plugins/bootstrap-slider/bootstrap-slider.min.js"></script> -->
    <!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script> -->
    <script src="https://code.jquery.com/ui/1.14.1/jquery-ui.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script src="../../js/admin.js"></script>
</body>

</html>